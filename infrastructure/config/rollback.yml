# AutoBot Rollback Configuration
# ==============================
#
# Configuration for deployment rollback system

# Health check settings
health_check_timeout: 300      # Maximum time (seconds) to wait for health checks
health_check_interval: 10      # Interval (seconds) between health checks
service_start_timeout: 120     # Maximum time (seconds) to wait for service startup
rollback_timeout: 600          # Maximum total rollback time (seconds)

# Rollback behavior
pre_rollback_backup: true      # Create backup before rollback
verify_rollback: true          # Verify services after rollback
cleanup_failed_rollback: true  # Attempt recovery on rollback failure

# Service rollback order (important for dependencies)
services_order:
  - redis                      # Database first
  - ai-stack                   # AI services
  - npu-worker                 # NPU worker
  - backend                    # API backend
  - frontend                   # Web interface

# Strategy-specific configuration
strategies:
  immediate:
    max_downtime: 300          # Maximum acceptable downtime (seconds)
    parallel_stops: false      # Stop services sequentially for safety

  zero_downtime:
    parallel_deployment: true  # Deploy new version in parallel
    health_check_before_switch: true
    traffic_switch_timeout: 30 # Maximum time for traffic switch

  service_by_service:
    service_rollback_timeout: 120  # Timeout per service rollback
    continue_on_service_failure: false  # Stop on first service failure

# Recovery settings
recovery:
  max_attempts: 3              # Maximum recovery attempts
  attempt_interval: 30         # Time between recovery attempts (seconds)
  fallback_to_backup: true     # Use backup if git rollback fails

# Notification settings (optional)
notifications:
  enabled: false
  webhook_url: ""              # Slack/Teams webhook URL
  email_recipients: []         # Email addresses for notifications

# Logging
logging:
  level: INFO                  # DEBUG, INFO, WARNING, ERROR
  rollback_history_limit: 50   # Number of rollback events to keep
  detailed_logs: true          # Include detailed step logs
