import{b as c,j as e,a as o,B as h,e as P,P as b,L as w,g as k,k as W,q as I,p as u}from"./vendor.536e8ebf.js";const R=c(e.jsx("path",{d:"M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3m5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72z"}),"Mic"),E=c(e.jsx("path",{d:"M6 19h4V5H6zm8-14v14h4V5z"}),"Pause"),M=c(e.jsx("path",{d:"M8 5v14l11-7z"}),"PlayArrow"),_=c(e.jsx("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"}),"Send"),N=()=>{const[d,x]=o.useState([]),[n,p]=o.useState(""),[i,g]=o.useState(!1),[l,y]=o.useState(!1),a=o.useRef(null),s=o.useRef(null);o.useEffect(()=>(s.current=new WebSocket("ws://localhost:8000/ws"),s.current.onmessage=r=>{const t=JSON.parse(r.data);(t.type==="user_message"||t.type==="llm_response"||t.type==="error")&&x(v=>[...v,{sender:t.type==="user_message"?"user":t.type==="error"?"error":"bot",text:t.payload.message||t.payload.response||t.payload.message}])},s.current.onerror=r=>{console.error("WebSocket error:",r),x(t=>[...t,{sender:"error",text:"Connection error. Please try again."}])},s.current.onclose=()=>{console.log("WebSocket closed")},()=>{s.current&&s.current.close()}),[]),o.useEffect(()=>{a.current&&(a.current.scrollTop=a.current.scrollHeight)},[d]);const f=()=>{if(n.trim()&&s.current&&s.current.readyState===WebSocket.OPEN){const r={type:"user_message",payload:{message:n}};s.current.send(JSON.stringify(r)),p("")}},m=r=>{r.key==="Enter"&&!r.shiftKey&&(r.preventDefault(),f())},S=()=>{g(!i),s.current&&s.current.readyState===WebSocket.OPEN&&s.current.send(JSON.stringify({type:i?"resume_agent":"pause_agent"}))},j=()=>{y(!l),s.current&&s.current.readyState===WebSocket.OPEN&&s.current.send(JSON.stringify({type:l?"stop_recording":"start_recording"}))};return e.jsxs(h,{sx:{display:"flex",flexDirection:"column",height:"calc(100vh - 64px - 48px)"},children:[e.jsx(P,{variant:"h5",gutterBottom:!0,children:"Chat with AutoBot"}),e.jsx(b,{elevation:3,sx:{flexGrow:1,overflowY:"auto",mb:2,p:2},ref:a,children:e.jsx(w,{children:d.map((r,t)=>e.jsx(k,{sx:{flexDirection:r.sender==="user"?"row-reverse":"row"},children:e.jsx(W,{primary:r.text,sx:{bgcolor:r.sender==="user"?"#e3f2fd":r.sender==="error"?"#ffebee":"#f5f5f5",borderRadius:2,p:1,maxWidth:"80%"}})},t))})}),e.jsxs(h,{sx:{display:"flex",gap:1},children:[e.jsx(I,{fullWidth:!0,variant:"outlined",placeholder:"Type your message here...",value:n,onChange:r=>p(r.target.value),onKeyPress:m,multiline:!0,maxRows:3}),e.jsx(u,{variant:"contained",onClick:f,disabled:!n.trim(),sx:{minWidth:"auto"},children:e.jsx(_,{})}),e.jsx(u,{variant:"outlined",onClick:j,color:l?"error":"primary",sx:{minWidth:"auto"},children:e.jsx(R,{})}),e.jsx(u,{variant:"outlined",onClick:S,sx:{minWidth:"auto"},children:i?e.jsx(M,{}):e.jsx(E,{})})]})]})};export{N as default};
//# sourceMappingURL=index.28b88b30.js.map
