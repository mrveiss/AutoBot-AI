{"version":3,"file":"index.890556ab.js","sources":["../node_modules/@mui/icons-material/esm/ArrowUpward.js","../node_modules/@mui/icons-material/esm/CloudDownload.js","../node_modules/@mui/icons-material/esm/CloudUpload.js","../node_modules/@mui/icons-material/esm/Delete.js","../src/views/Files/index.jsx"],"sourcesContent":["\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"m4 12 1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8z\"\n}), 'ArrowUpward');","\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96M17 13l-5 5-5-5h3V9h4v4z\"\n}), 'CloudDownload');","\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96M14 13v4h-4v-4H7l5-5 5 5z\"\n}), 'CloudUpload');","\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z\"\n}), 'Delete');","import React, { useState, useEffect } from 'react';\nimport { Box, Button, Table, TableBody, TableCell, TableHead, TableRow, Typography, TextField } from '@mui/material';\nimport { ArrowUpward as ArrowUpwardIcon, CloudDownload as CloudDownloadIcon, Delete as DeleteIcon, CloudUpload as CloudUploadIcon } from '@mui/icons-material';\n\nconst Files = () => {\n  const [files, setFiles] = useState([]);\n  const [currentPath, setCurrentPath] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [sortBy, setSortBy] = useState('name');\n  const [sortDirection, setSortDirection] = useState('asc');\n\n  useEffect(() => {\n    fetchFiles(currentPath);\n  }, [currentPath]);\n\n  const fetchFiles = async (path) => {\n    setIsLoading(true);\n    try {\n      const response = await fetch(`/api/files?path=${encodeURIComponent(path)}`);\n      const data = await response.json();\n      if (response.ok) {\n        setFiles(data.files || []);\n      } else {\n        console.error('Error fetching files:', data.message);\n      }\n    } catch (error) {\n      console.error('Error fetching files:', error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const navigateUp = () => {\n    const parentPath = currentPath.split('/').slice(0, -1).join('/');\n    setCurrentPath(parentPath);\n  };\n\n  const navigateToFolder = (path) => {\n    setCurrentPath(path);\n  };\n\n  const toggleSort = (field) => {\n    if (sortBy === field) {\n      setSortDirection(sortDirection === 'asc' ? 'desc' : 'asc');\n    } else {\n      setSortBy(field);\n      setSortDirection('asc');\n    }\n  };\n\n  const sortedFiles = [...files].sort((a, b) => {\n    if (sortBy === 'name') {\n      return sortDirection === 'asc' ? a.name.localeCompare(b.name) : b.name.localeCompare(a.name);\n    } else if (sortBy === 'size') {\n      return sortDirection === 'asc' ? (a.size || 0) - (b.size || 0) : (b.size || 0) - (a.size || 0);\n    } else if (sortBy === 'date') {\n      return sortDirection === 'asc' ? a.last_modified - b.last_modified : b.last_modified - a.last_modified;\n    }\n    return 0;\n  });\n\n  const formatFileSize = (bytes) => {\n    if (bytes === null || bytes === undefined) return '—';\n    if (bytes < 1024) return bytes + ' B';\n    else if (bytes < 1048576) return (bytes / 1024).toFixed(1) + ' KB';\n    else return (bytes / 1048576).toFixed(1) + ' MB';\n  };\n\n  const formatDate = (timestamp) => {\n    if (!timestamp) return '—';\n    const date = new Date(timestamp * 1000);\n    return date.toLocaleString();\n  };\n\n  const downloadFile = async (file) => {\n    try {\n      const response = await fetch(`/api/download?path=${encodeURIComponent(file.path)}`);\n      if (response.ok) {\n        const blob = await response.blob();\n        const url = window.URL.createObjectURL(blob);\n        const a = document.createElement('a');\n        a.href = url;\n        a.download = file.name;\n        document.body.appendChild(a);\n        a.click();\n        a.remove();\n        window.URL.revokeObjectURL(url);\n      } else {\n        console.error('Error downloading file');\n      }\n    } catch (error) {\n      console.error('Error downloading file:', error);\n    }\n  };\n\n  const deleteFile = async (file) => {\n    if (window.confirm(`Are you sure you want to delete ${file.name}?`)) {\n      try {\n        const response = await fetch(`/api/delete_file?path=${encodeURIComponent(file.path)}`, { method: 'DELETE' });\n        if (response.ok) {\n          fetchFiles(currentPath); // Refresh file list\n        } else {\n          console.error('Error deleting file');\n        }\n      } catch (error) {\n        console.error('Error deleting file:', error);\n      }\n    }\n  };\n\n  const handleFileUpload = async (event) => {\n    const fileInput = event.target;\n    const filesToUpload = fileInput.files;\n    if (filesToUpload.length > 0) {\n      const formData = new FormData();\n      for (let i = 0; i < filesToUpload.length; i++) {\n        formData.append('file', filesToUpload[i]);\n      }\n      formData.append('file_type', 'generic');\n      \n      try {\n        const response = await fetch(`/api/uploadfile/?path=${encodeURIComponent(currentPath)}`, {\n          method: 'POST',\n          body: formData,\n        });\n        if (response.ok) {\n          fetchFiles(currentPath); // Refresh file list\n        } else {\n          console.error('Error uploading files');\n        }\n      } catch (error) {\n        console.error('Error uploading files:', error);\n      }\n      fileInput.value = ''; // Reset input\n    }\n  };\n\n  return (\n    <Box sx={{ p: 3 }}>\n      <Typography variant=\"h5\" gutterBottom>\n        File Browser\n      </Typography>\n      <Box sx={{ display: 'flex', justifyContent: 'space-between', mb: 2 }}>\n        <Button variant=\"outlined\" onClick={navigateUp} startIcon={<ArrowUpwardIcon />}>\n          Up\n        </Button>\n        <Button variant=\"contained\" component=\"label\" startIcon={<CloudUploadIcon />}>\n          Upload Files\n          <input type=\"file\" multiple hidden onChange={handleFileUpload} />\n        </Button>\n      </Box>\n      <Typography variant=\"body1\" gutterBottom>\n        Current Path: {currentPath || '/'}\n      </Typography>\n      {isLoading ? (\n        <Typography variant=\"body1\">Loading...</Typography>\n      ) : files.length === 0 ? (\n        <Typography variant=\"body1\">No files found</Typography>\n      ) : (\n        <Table>\n          <TableHead>\n            <TableRow>\n              <TableCell onClick={() => toggleSort('name')} sx={{ cursor: 'pointer' }}>\n                Name {sortBy === 'name' && (sortDirection === 'asc' ? '↑' : '↓')}\n              </TableCell>\n              <TableCell onClick={() => toggleSort('size')} sx={{ cursor: 'pointer' }}>\n                Size {sortBy === 'size' && (sortDirection === 'asc' ? '↑' : '↓')}\n              </TableCell>\n              <TableCell onClick={() => toggleSort('date')} sx={{ cursor: 'pointer' }}>\n                Modified {sortBy === 'date' && (sortDirection === 'asc' ? '↑' : '↓')}\n              </TableCell>\n              <TableCell>Actions</TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {sortedFiles.map((file) => (\n              <TableRow key={file.path} onClick={() => file.is_dir && navigateToFolder(file.path)} sx={{ cursor: file.is_dir ? 'pointer' : 'default' }}>\n                <TableCell>{file.name}</TableCell>\n                <TableCell>{file.is_dir ? '—' : formatFileSize(file.size)}</TableCell>\n                <TableCell>{formatDate(file.last_modified)}</TableCell>\n                <TableCell>\n                  {!file.is_dir && (\n                    <>\n                      <IconButton size=\"small\" onClick={(e) => { e.stopPropagation(); downloadFile(file); }} sx={{ mr: 1 }}>\n                        <CloudDownloadIcon fontSize=\"small\" />\n                      </IconButton>\n                      <IconButton size=\"small\" color=\"error\" onClick={(e) => { e.stopPropagation(); deleteFile(file); }}>\n                        <DeleteIcon fontSize=\"small\" />\n                      </IconButton>\n                    </>\n                  )}\n                </TableCell>\n              </TableRow>\n            ))}\n          </TableBody>\n        </Table>\n      )}\n    </Box>\n  );\n};\n\nexport default Files;\n"],"names":["ArrowUpwardIcon","createSvgIcon","_jsx","CloudDownloadIcon","CloudUploadIcon","DeleteIcon","Files","files","setFiles","useState","currentPath","setCurrentPath","isLoading","setIsLoading","sortBy","setSortBy","sortDirection","setSortDirection","useEffect","fetchFiles","path","response","data","error","navigateUp","parentPath","navigateToFolder","toggleSort","field","sortedFiles","a","b","formatFileSize","bytes","formatDate","timestamp","downloadFile","file","blob","url","deleteFile","handleFileUpload","event","fileInput","filesToUpload","formData","i","Box","jsx","Typography","jsxs","Button","Table","TableHead","TableRow","TableCell","TableBody","Fragment","e"],"mappings":"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","x_google_ignoreList":[0,1,2,3]}