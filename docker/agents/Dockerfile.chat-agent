# AutoBot Chat Agent
# Extends standardized Python agent base image
# Optimized for lightweight, fast responses

# Use standardized Python agent base
FROM python-agent-base:latest AS chat-agent

# Agent-specific metadata
LABEL maintainer="AutoBot Team"
LABEL description="AutoBot Chat Agent - Lightweight conversational AI"
LABEL agent.type="chat"
LABEL agent.capabilities="conversation,fast_response,lightweight"

# Chat agent specific configuration
ENV AGENT_TYPE=chat \
    AGENT_NAME="AutoBot Chat Agent" \
    AGENT_DESCRIPTION="Lightweight conversational AI agent" \
    DEFAULT_MODEL_NAME=llama3.2:1b \
    CHAT_RESPONSE_TIMEOUT=30 \
    CHAT_MAX_HISTORY=50

# Chat agent specific dependencies (if any)
# RUN pip install --no-cache-dir \
#     tiktoken==0.5.1 \
#     transformers==4.35.0

# Agent-specific health check (override base health check)
ENV HEALTH_CHECK_PORT=8000
HEALTHCHECK --interval=15s --timeout=5s --start-period=15s --retries=2 \
    CMD curl -f http://localhost:${HEALTH_CHECK_PORT}/health/chat || exit 1

# Chat agent startup command
CMD ["python", "src/agents/chat_agent_server.py"]
