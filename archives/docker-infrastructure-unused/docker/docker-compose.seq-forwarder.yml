version: '3.8'

services:
  seq-forwarder:
    image: python:3.10-slim
    container_name: autobot-seq-forwarder
    restart: unless-stopped
    volumes:
      - ./logs:/app/logs:ro  # Read-only access to log files
      - ./scripts:/app/scripts:ro  # Access to forwarder script
      - ./src:/app/src:ro  # Access to src modules
    environment:
      - SEQ_URL=http://autobot-seq:5341  # Use container name
      - PYTHONPATH=/app
    command: python /app/scripts/seq_log_forwarder.py --tail-and-forward
    networks:
      - autobot-network
    depends_on:
      - seq

networks:
  autobot-network:
    external: true
    name: autobot-network