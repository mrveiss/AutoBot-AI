(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))t(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&t(l)}).observe(document,{childList:!0,subtree:!0});function o(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function t(i){if(i.ep)return;i.ep=!0;const r=o(i);fetch(i.href,r)}})();/**
* @vue/shared v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function So(s){const e=Object.create(null);for(const o of s.split(","))e[o]=1;return o=>o in e}const We={},xs=[],Ft=()=>{},wa=()=>!1,Pn=s=>s.charCodeAt(0)===111&&s.charCodeAt(1)===110&&(s.charCodeAt(2)>122||s.charCodeAt(2)<97),To=s=>s.startsWith("onUpdate:"),vt=Object.assign,Eo=(s,e)=>{const o=s.indexOf(e);o>-1&&s.splice(o,1)},ka=Object.prototype.hasOwnProperty,Ke=(s,e)=>ka.call(s,e),Te=Array.isArray,Cs=s=>nn(s)==="[object Map]",As=s=>nn(s)==="[object Set]",$o=s=>nn(s)==="[object Date]",Me=s=>typeof s=="function",nt=s=>typeof s=="string",Nt=s=>typeof s=="symbol",$e=s=>s!==null&&typeof s=="object",Kl=s=>($e(s)||Me(s))&&Me(s.then)&&Me(s.catch),Wl=Object.prototype.toString,nn=s=>Wl.call(s),_a=s=>nn(s).slice(8,-1),Hl=s=>nn(s)==="[object Object]",Io=s=>nt(s)&&s!=="NaN"&&s[0]!=="-"&&""+parseInt(s,10)===s,js=So(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Rn=s=>{const e=Object.create(null);return o=>e[o]||(e[o]=s(o))},xa=/-(\w)/g,Et=Rn(s=>s.replace(xa,(e,o)=>o?o.toUpperCase():"")),Ca=/\B([A-Z])/g,as=Rn(s=>s.replace(Ca,"-$1").toLowerCase()),Dn=Rn(s=>s.charAt(0).toUpperCase()+s.slice(1)),Qn=Rn(s=>s?`on${Dn(s)}`:""),ns=(s,e)=>!Object.is(s,e),vn=(s,...e)=>{for(let o=0;o<s.length;o++)s[o](...e)},uo=(s,e,o,t=!1)=>{Object.defineProperty(s,e,{configurable:!0,enumerable:!1,writable:t,value:o})},kn=s=>{const e=parseFloat(s);return isNaN(e)?s:e};let zo;const Mn=()=>zo||(zo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ct(s){if(Te(s)){const e={};for(let o=0;o<s.length;o++){const t=s[o],i=nt(t)?Ia(t):ct(t);if(i)for(const r in i)e[r]=i[r]}return e}else if(nt(s)||$e(s))return s}const Sa=/;(?![^(]*\))/g,Ta=/:([^]+)/,Ea=/\/\*[^]*?\*\//g;function Ia(s){const e={};return s.replace(Ea,"").split(Sa).forEach(o=>{if(o){const t=o.split(Ta);t.length>1&&(e[t[0].trim()]=t[1].trim())}}),e}function G(s){let e="";if(nt(s))e=s;else if(Te(s))for(let o=0;o<s.length;o++){const t=G(s[o]);t&&(e+=t+" ")}else if($e(s))for(const o in s)s[o]&&(e+=o+" ");return e.trim()}const Pa="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Ra=So(Pa);function ql(s){return!!s||s===""}function Da(s,e){if(s.length!==e.length)return!1;let o=!0;for(let t=0;o&&t<s.length;t++)o=vs(s[t],e[t]);return o}function vs(s,e){if(s===e)return!0;let o=$o(s),t=$o(e);if(o||t)return o&&t?s.getTime()===e.getTime():!1;if(o=Nt(s),t=Nt(e),o||t)return s===e;if(o=Te(s),t=Te(e),o||t)return o&&t?Da(s,e):!1;if(o=$e(s),t=$e(e),o||t){if(!o||!t)return!1;const i=Object.keys(s).length,r=Object.keys(e).length;if(i!==r)return!1;for(const l in s){const a=s.hasOwnProperty(l),u=e.hasOwnProperty(l);if(a&&!u||!a&&u||!vs(s[l],e[l]))return!1}}return String(s)===String(e)}function Po(s,e){return s.findIndex(o=>vs(o,e))}const Gl=s=>!!(s&&s.__v_isRef===!0),m=s=>nt(s)?s:s==null?"":Te(s)||$e(s)&&(s.toString===Wl||!Me(s.toString))?Gl(s)?m(s.value):JSON.stringify(s,$l,2):String(s),$l=(s,e)=>Gl(e)?$l(s,e.value):Cs(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((o,[t,i],r)=>(o[Zn(t,r)+" =>"]=i,o),{})}:As(e)?{[`Set(${e.size})`]:[...e.values()].map(o=>Zn(o))}:Nt(e)?Zn(e):$e(e)&&!Te(e)&&!Hl(e)?String(e):e,Zn=(s,e="")=>{var o;return Nt(s)?`Symbol(${(o=s.description)!=null?o:e})`:s};/**
* @vue/reactivity v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let kt;class Ma{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=kt,!e&&kt&&(this.index=(kt.scopes||(kt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,o;if(this.scopes)for(e=0,o=this.scopes.length;e<o;e++)this.scopes[e].pause();for(e=0,o=this.effects.length;e<o;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,o;if(this.scopes)for(e=0,o=this.scopes.length;e<o;e++)this.scopes[e].resume();for(e=0,o=this.effects.length;e<o;e++)this.effects[e].resume()}}run(e){if(this._active){const o=kt;try{return kt=this,e()}finally{kt=o}}}on(){++this._on===1&&(this.prevScope=kt,kt=this)}off(){this._on>0&&--this._on===0&&(kt=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let o,t;for(o=0,t=this.effects.length;o<t;o++)this.effects[o].stop();for(this.effects.length=0,o=0,t=this.cleanups.length;o<t;o++)this.cleanups[o]();if(this.cleanups.length=0,this.scopes){for(o=0,t=this.scopes.length;o<t;o++)this.scopes[o].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function Aa(){return kt}let Ge;const Xn=new WeakSet;class zl{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,kt&&kt.active&&kt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Xn.has(this)&&(Xn.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Yl(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Jo(this),Ql(this);const e=Ge,o=Pt;Ge=this,Pt=!0;try{return this.fn()}finally{Zl(this),Ge=e,Pt=o,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Mo(e);this.deps=this.depsTail=void 0,Jo(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Xn.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){fo(this)&&this.run()}get dirty(){return fo(this)}}let Jl=0,Bs,Ks;function Yl(s,e=!1){if(s.flags|=8,e){s.next=Ks,Ks=s;return}s.next=Bs,Bs=s}function Ro(){Jl++}function Do(){if(--Jl>0)return;if(Ks){let e=Ks;for(Ks=void 0;e;){const o=e.next;e.next=void 0,e.flags&=-9,e=o}}let s;for(;Bs;){let e=Bs;for(Bs=void 0;e;){const o=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(t){s||(s=t)}e=o}}if(s)throw s}function Ql(s){for(let e=s.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Zl(s){let e,o=s.depsTail,t=o;for(;t;){const i=t.prevDep;t.version===-1?(t===o&&(o=i),Mo(t),Ua(t)):e=t,t.dep.activeLink=t.prevActiveLink,t.prevActiveLink=void 0,t=i}s.deps=e,s.depsTail=o}function fo(s){for(let e=s.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Xl(e.dep.computed)||e.dep.version!==e.version))return!0;return!!s._dirty}function Xl(s){if(s.flags&4&&!(s.flags&16)||(s.flags&=-17,s.globalVersion===Ys)||(s.globalVersion=Ys,!s.isSSR&&s.flags&128&&(!s.deps&&!s._dirty||!fo(s))))return;s.flags|=2;const e=s.dep,o=Ge,t=Pt;Ge=s,Pt=!0;try{Ql(s);const i=s.fn(s._value);(e.version===0||ns(i,s._value))&&(s.flags|=128,s._value=i,e.version++)}catch(i){throw e.version++,i}finally{Ge=o,Pt=t,Zl(s),s.flags&=-3}}function Mo(s,e=!1){const{dep:o,prevSub:t,nextSub:i}=s;if(t&&(t.nextSub=i,s.prevSub=void 0),i&&(i.prevSub=t,s.nextSub=void 0),o.subs===s&&(o.subs=t,!t&&o.computed)){o.computed.flags&=-5;for(let r=o.computed.deps;r;r=r.nextDep)Mo(r,!0)}!e&&!--o.sc&&o.map&&o.map.delete(o.key)}function Ua(s){const{prevDep:e,nextDep:o}=s;e&&(e.nextDep=o,s.prevDep=void 0),o&&(o.prevDep=e,s.nextDep=void 0)}let Pt=!0;const ei=[];function zt(){ei.push(Pt),Pt=!1}function Jt(){const s=ei.pop();Pt=s===void 0?!0:s}function Jo(s){const{cleanup:e}=s;if(s.cleanup=void 0,e){const o=Ge;Ge=void 0;try{e()}finally{Ge=o}}}let Ys=0;class La{constructor(e,o){this.sub=e,this.dep=o,this.version=o.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Ao{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Ge||!Pt||Ge===this.computed)return;let o=this.activeLink;if(o===void 0||o.sub!==Ge)o=this.activeLink=new La(Ge,this),Ge.deps?(o.prevDep=Ge.depsTail,Ge.depsTail.nextDep=o,Ge.depsTail=o):Ge.deps=Ge.depsTail=o,ti(o);else if(o.version===-1&&(o.version=this.version,o.nextDep)){const t=o.nextDep;t.prevDep=o.prevDep,o.prevDep&&(o.prevDep.nextDep=t),o.prevDep=Ge.depsTail,o.nextDep=void 0,Ge.depsTail.nextDep=o,Ge.depsTail=o,Ge.deps===o&&(Ge.deps=t)}return o}trigger(e){this.version++,Ys++,this.notify(e)}notify(e){Ro();try{for(let o=this.subs;o;o=o.prevSub)o.sub.notify()&&o.sub.dep.notify()}finally{Do()}}}function ti(s){if(s.dep.sc++,s.sub.flags&4){const e=s.dep.computed;if(e&&!s.dep.subs){e.flags|=20;for(let t=e.deps;t;t=t.nextDep)ti(t)}const o=s.dep.subs;o!==s&&(s.prevSub=o,o&&(o.nextSub=s)),s.dep.subs=s}}const mo=new WeakMap,ps=Symbol(""),po=Symbol(""),Qs=Symbol("");function ft(s,e,o){if(Pt&&Ge){let t=mo.get(s);t||mo.set(s,t=new Map);let i=t.get(o);i||(t.set(o,i=new Ao),i.map=t,i.key=o),i.track()}}function qt(s,e,o,t,i,r){const l=mo.get(s);if(!l){Ys++;return}const a=u=>{u&&u.trigger()};if(Ro(),e==="clear")l.forEach(a);else{const u=Te(s),p=u&&Io(o);if(u&&o==="length"){const f=Number(t);l.forEach((v,w)=>{(w==="length"||w===Qs||!Nt(w)&&w>=f)&&a(v)})}else switch((o!==void 0||l.has(void 0))&&a(l.get(o)),p&&a(l.get(Qs)),e){case"add":u?p&&a(l.get("length")):(a(l.get(ps)),Cs(s)&&a(l.get(po)));break;case"delete":u||(a(l.get(ps)),Cs(s)&&a(l.get(po)));break;case"set":Cs(s)&&a(l.get(ps));break}}Do()}function ws(s){const e=Be(s);return e===s?e:(ft(e,"iterate",Qs),St(s)?e:e.map(dt))}function An(s){return ft(s=Be(s),"iterate",Qs),s}const Oa={__proto__:null,[Symbol.iterator](){return eo(this,Symbol.iterator,dt)},concat(...s){return ws(this).concat(...s.map(e=>Te(e)?ws(e):e))},entries(){return eo(this,"entries",s=>(s[1]=dt(s[1]),s))},every(s,e){return Kt(this,"every",s,e,void 0,arguments)},filter(s,e){return Kt(this,"filter",s,e,o=>o.map(dt),arguments)},find(s,e){return Kt(this,"find",s,e,dt,arguments)},findIndex(s,e){return Kt(this,"findIndex",s,e,void 0,arguments)},findLast(s,e){return Kt(this,"findLast",s,e,dt,arguments)},findLastIndex(s,e){return Kt(this,"findLastIndex",s,e,void 0,arguments)},forEach(s,e){return Kt(this,"forEach",s,e,void 0,arguments)},includes(...s){return to(this,"includes",s)},indexOf(...s){return to(this,"indexOf",s)},join(s){return ws(this).join(s)},lastIndexOf(...s){return to(this,"lastIndexOf",s)},map(s,e){return Kt(this,"map",s,e,void 0,arguments)},pop(){return Ls(this,"pop")},push(...s){return Ls(this,"push",s)},reduce(s,...e){return Yo(this,"reduce",s,e)},reduceRight(s,...e){return Yo(this,"reduceRight",s,e)},shift(){return Ls(this,"shift")},some(s,e){return Kt(this,"some",s,e,void 0,arguments)},splice(...s){return Ls(this,"splice",s)},toReversed(){return ws(this).toReversed()},toSorted(s){return ws(this).toSorted(s)},toSpliced(...s){return ws(this).toSpliced(...s)},unshift(...s){return Ls(this,"unshift",s)},values(){return eo(this,"values",dt)}};function eo(s,e,o){const t=An(s),i=t[e]();return t!==s&&!St(s)&&(i._next=i.next,i.next=()=>{const r=i._next();return r.value&&(r.value=o(r.value)),r}),i}const Fa=Array.prototype;function Kt(s,e,o,t,i,r){const l=An(s),a=l!==s&&!St(s),u=l[e];if(u!==Fa[e]){const v=u.apply(s,r);return a?dt(v):v}let p=o;l!==s&&(a?p=function(v,w){return o.call(this,dt(v),w,s)}:o.length>2&&(p=function(v,w){return o.call(this,v,w,s)}));const f=u.call(l,p,t);return a&&i?i(f):f}function Yo(s,e,o,t){const i=An(s);let r=o;return i!==s&&(St(s)?o.length>3&&(r=function(l,a,u){return o.call(this,l,a,u,s)}):r=function(l,a,u){return o.call(this,l,dt(a),u,s)}),i[e](r,...t)}function to(s,e,o){const t=Be(s);ft(t,"iterate",Qs);const i=t[e](...o);return(i===-1||i===!1)&&Oo(o[0])?(o[0]=Be(o[0]),t[e](...o)):i}function Ls(s,e,o=[]){zt(),Ro();const t=Be(s)[e].apply(s,o);return Do(),Jt(),t}const Na=So("__proto__,__v_isRef,__isVue"),si=new Set(Object.getOwnPropertyNames(Symbol).filter(s=>s!=="arguments"&&s!=="caller").map(s=>Symbol[s]).filter(Nt));function Va(s){Nt(s)||(s=String(s));const e=Be(this);return ft(e,"has",s),e.hasOwnProperty(s)}class ni{constructor(e=!1,o=!1){this._isReadonly=e,this._isShallow=o}get(e,o,t){if(o==="__v_skip")return e.__v_skip;const i=this._isReadonly,r=this._isShallow;if(o==="__v_isReactive")return!i;if(o==="__v_isReadonly")return i;if(o==="__v_isShallow")return r;if(o==="__v_raw")return t===(i?r?Ja:ai:r?ii:li).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(t)?e:void 0;const l=Te(e);if(!i){let u;if(l&&(u=Oa[o]))return u;if(o==="hasOwnProperty")return Va}const a=Reflect.get(e,o,gt(e)?e:t);return(Nt(o)?si.has(o):Na(o))||(i||ft(e,"get",o),r)?a:gt(a)?l&&Io(o)?a:a.value:$e(a)?i?ci(a):rs(a):a}}class oi extends ni{constructor(e=!1){super(!1,e)}set(e,o,t,i){let r=e[o];if(!this._isShallow){const u=os(r);if(!St(t)&&!os(t)&&(r=Be(r),t=Be(t)),!Te(e)&&gt(r)&&!gt(t))return u?!1:(r.value=t,!0)}const l=Te(e)&&Io(o)?Number(o)<e.length:Ke(e,o),a=Reflect.set(e,o,t,gt(e)?e:i);return e===Be(i)&&(l?ns(t,r)&&qt(e,"set",o,t):qt(e,"add",o,t)),a}deleteProperty(e,o){const t=Ke(e,o);e[o];const i=Reflect.deleteProperty(e,o);return i&&t&&qt(e,"delete",o,void 0),i}has(e,o){const t=Reflect.has(e,o);return(!Nt(o)||!si.has(o))&&ft(e,"has",o),t}ownKeys(e){return ft(e,"iterate",Te(e)?"length":ps),Reflect.ownKeys(e)}}class ja extends ni{constructor(e=!1){super(!0,e)}set(e,o){return!0}deleteProperty(e,o){return!0}}const Ba=new oi,Ka=new ja,Wa=new oi(!0);const go=s=>s,un=s=>Reflect.getPrototypeOf(s);function Ha(s,e,o){return function(...t){const i=this.__v_raw,r=Be(i),l=Cs(r),a=s==="entries"||s===Symbol.iterator&&l,u=s==="keys"&&l,p=i[s](...t),f=o?go:e?_n:dt;return!e&&ft(r,"iterate",u?po:ps),{next(){const{value:v,done:w}=p.next();return w?{value:v,done:w}:{value:a?[f(v[0]),f(v[1])]:f(v),done:w}},[Symbol.iterator](){return this}}}}function fn(s){return function(...e){return s==="delete"?!1:s==="clear"?void 0:this}}function qa(s,e){const o={get(i){const r=this.__v_raw,l=Be(r),a=Be(i);s||(ns(i,a)&&ft(l,"get",i),ft(l,"get",a));const{has:u}=un(l),p=e?go:s?_n:dt;if(u.call(l,i))return p(r.get(i));if(u.call(l,a))return p(r.get(a));r!==l&&r.get(i)},get size(){const i=this.__v_raw;return!s&&ft(Be(i),"iterate",ps),Reflect.get(i,"size",i)},has(i){const r=this.__v_raw,l=Be(r),a=Be(i);return s||(ns(i,a)&&ft(l,"has",i),ft(l,"has",a)),i===a?r.has(i):r.has(i)||r.has(a)},forEach(i,r){const l=this,a=l.__v_raw,u=Be(a),p=e?go:s?_n:dt;return!s&&ft(u,"iterate",ps),a.forEach((f,v)=>i.call(r,p(f),p(v),l))}};return vt(o,s?{add:fn("add"),set:fn("set"),delete:fn("delete"),clear:fn("clear")}:{add(i){!e&&!St(i)&&!os(i)&&(i=Be(i));const r=Be(this);return un(r).has.call(r,i)||(r.add(i),qt(r,"add",i,i)),this},set(i,r){!e&&!St(r)&&!os(r)&&(r=Be(r));const l=Be(this),{has:a,get:u}=un(l);let p=a.call(l,i);p||(i=Be(i),p=a.call(l,i));const f=u.call(l,i);return l.set(i,r),p?ns(r,f)&&qt(l,"set",i,r):qt(l,"add",i,r),this},delete(i){const r=Be(this),{has:l,get:a}=un(r);let u=l.call(r,i);u||(i=Be(i),u=l.call(r,i)),a&&a.call(r,i);const p=r.delete(i);return u&&qt(r,"delete",i,void 0),p},clear(){const i=Be(this),r=i.size!==0,l=i.clear();return r&&qt(i,"clear",void 0,void 0),l}}),["keys","values","entries",Symbol.iterator].forEach(i=>{o[i]=Ha(i,s,e)}),o}function Uo(s,e){const o=qa(s,e);return(t,i,r)=>i==="__v_isReactive"?!s:i==="__v_isReadonly"?s:i==="__v_raw"?t:Reflect.get(Ke(o,i)&&i in t?o:t,i,r)}const Ga={get:Uo(!1,!1)},$a={get:Uo(!1,!0)},za={get:Uo(!0,!1)};const li=new WeakMap,ii=new WeakMap,ai=new WeakMap,Ja=new WeakMap;function Ya(s){switch(s){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Qa(s){return s.__v_skip||!Object.isExtensible(s)?0:Ya(_a(s))}function rs(s){return os(s)?s:Lo(s,!1,Ba,Ga,li)}function ri(s){return Lo(s,!1,Wa,$a,ii)}function ci(s){return Lo(s,!0,Ka,za,ai)}function Lo(s,e,o,t,i){if(!$e(s)||s.__v_raw&&!(e&&s.__v_isReactive))return s;const r=Qa(s);if(r===0)return s;const l=i.get(s);if(l)return l;const a=new Proxy(s,r===2?t:o);return i.set(s,a),a}function Ss(s){return os(s)?Ss(s.__v_raw):!!(s&&s.__v_isReactive)}function os(s){return!!(s&&s.__v_isReadonly)}function St(s){return!!(s&&s.__v_isShallow)}function Oo(s){return s?!!s.__v_raw:!1}function Be(s){const e=s&&s.__v_raw;return e?Be(e):s}function Za(s){return!Ke(s,"__v_skip")&&Object.isExtensible(s)&&uo(s,"__v_skip",!0),s}const dt=s=>$e(s)?rs(s):s,_n=s=>$e(s)?ci(s):s;function gt(s){return s?s.__v_isRef===!0:!1}function b(s){return di(s,!1)}function Xa(s){return di(s,!0)}function di(s,e){return gt(s)?s:new er(s,e)}class er{constructor(e,o){this.dep=new Ao,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=o?e:Be(e),this._value=o?e:dt(e),this.__v_isShallow=o}get value(){return this.dep.track(),this._value}set value(e){const o=this._rawValue,t=this.__v_isShallow||St(e)||os(e);e=t?e:Be(e),ns(e,o)&&(this._rawValue=e,this._value=t?e:dt(e),this.dep.trigger())}}function Ts(s){return gt(s)?s.value:s}const tr={get:(s,e,o)=>e==="__v_raw"?s:Ts(Reflect.get(s,e,o)),set:(s,e,o,t)=>{const i=s[e];return gt(i)&&!gt(o)?(i.value=o,!0):Reflect.set(s,e,o,t)}};function ui(s){return Ss(s)?s:new Proxy(s,tr)}class sr{constructor(e,o,t){this.fn=e,this.setter=o,this._value=void 0,this.dep=new Ao(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ys-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!o,this.isSSR=t}notify(){if(this.flags|=16,!(this.flags&8)&&Ge!==this)return Yl(this,!0),!0}get value(){const e=this.dep.track();return Xl(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function nr(s,e,o=!1){let t,i;return Me(s)?t=s:(t=s.get,i=s.set),new sr(t,i,o)}const mn={},xn=new WeakMap;let fs;function or(s,e=!1,o=fs){if(o){let t=xn.get(o);t||xn.set(o,t=[]),t.push(s)}}function lr(s,e,o=We){const{immediate:t,deep:i,once:r,scheduler:l,augmentJob:a,call:u}=o,p=A=>i?A:St(A)||i===!1||i===0?Gt(A,1):Gt(A);let f,v,w,k,h=!1,P=!1;if(gt(s)?(v=()=>s.value,h=St(s)):Ss(s)?(v=()=>p(s),h=!0):Te(s)?(P=!0,h=s.some(A=>Ss(A)||St(A)),v=()=>s.map(A=>{if(gt(A))return A.value;if(Ss(A))return p(A);if(Me(A))return u?u(A,2):A()})):Me(s)?e?v=u?()=>u(s,2):s:v=()=>{if(w){zt();try{w()}finally{Jt()}}const A=fs;fs=f;try{return u?u(s,3,[k]):s(k)}finally{fs=A}}:v=Ft,e&&i){const A=v,ae=i===!0?1/0:i;v=()=>Gt(A(),ae)}const x=Aa(),_=()=>{f.stop(),x&&x.active&&Eo(x.effects,f)};if(r&&e){const A=e;e=(...ae)=>{A(...ae),_()}}let S=P?new Array(s.length).fill(mn):mn;const L=A=>{if(!(!(f.flags&1)||!f.dirty&&!A))if(e){const ae=f.run();if(i||h||(P?ae.some((se,be)=>ns(se,S[be])):ns(ae,S))){w&&w();const se=fs;fs=f;try{const be=[ae,S===mn?void 0:P&&S[0]===mn?[]:S,k];S=ae,u?u(e,3,be):e(...be)}finally{fs=se}}}else f.run()};return a&&a(L),f=new zl(v),f.scheduler=l?()=>l(L,!1):L,k=A=>or(A,!1,f),w=f.onStop=()=>{const A=xn.get(f);if(A){if(u)u(A,4);else for(const ae of A)ae();xn.delete(f)}},e?t?L(!0):S=f.run():l?l(L.bind(null,!0),!0):f.run(),_.pause=f.pause.bind(f),_.resume=f.resume.bind(f),_.stop=_,_}function Gt(s,e=1/0,o){if(e<=0||!$e(s)||s.__v_skip||(o=o||new Set,o.has(s)))return s;if(o.add(s),e--,gt(s))Gt(s.value,e,o);else if(Te(s))for(let t=0;t<s.length;t++)Gt(s[t],e,o);else if(As(s)||Cs(s))s.forEach(t=>{Gt(t,e,o)});else if(Hl(s)){for(const t in s)Gt(s[t],e,o);for(const t of Object.getOwnPropertySymbols(s))Object.prototype.propertyIsEnumerable.call(s,t)&&Gt(s[t],e,o)}return s}/**
* @vue/runtime-core v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function on(s,e,o,t){try{return t?s(...t):s()}catch(i){Un(i,e,o)}}function Vt(s,e,o,t){if(Me(s)){const i=on(s,e,o,t);return i&&Kl(i)&&i.catch(r=>{Un(r,e,o)}),i}if(Te(s)){const i=[];for(let r=0;r<s.length;r++)i.push(Vt(s[r],e,o,t));return i}}function Un(s,e,o,t=!0){const i=e?e.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:l}=e&&e.appContext.config||We;if(e){let a=e.parent;const u=e.proxy,p=`https://vuejs.org/error-reference/#runtime-${o}`;for(;a;){const f=a.ec;if(f){for(let v=0;v<f.length;v++)if(f[v](s,u,p)===!1)return}a=a.parent}if(r){zt(),on(r,null,10,[s,u,p]),Jt();return}}ir(s,o,i,t,l)}function ir(s,e,o,t=!0,i=!1){if(i)throw s;console.error(s)}const bt=[];let Lt=-1;const Es=[];let es=null,ks=0;const fi=Promise.resolve();let Cn=null;function mt(s){const e=Cn||fi;return s?e.then(this?s.bind(this):s):e}function ar(s){let e=Lt+1,o=bt.length;for(;e<o;){const t=e+o>>>1,i=bt[t],r=Zs(i);r<s||r===s&&i.flags&2?e=t+1:o=t}return e}function Fo(s){if(!(s.flags&1)){const e=Zs(s),o=bt[bt.length-1];!o||!(s.flags&2)&&e>=Zs(o)?bt.push(s):bt.splice(ar(e),0,s),s.flags|=1,mi()}}function mi(){Cn||(Cn=fi.then(gi))}function rr(s){Te(s)?Es.push(...s):es&&s.id===-1?es.splice(ks+1,0,s):s.flags&1||(Es.push(s),s.flags|=1),mi()}function Qo(s,e,o=Lt+1){for(;o<bt.length;o++){const t=bt[o];if(t&&t.flags&2){if(s&&t.id!==s.uid)continue;bt.splice(o,1),o--,t.flags&4&&(t.flags&=-2),t(),t.flags&4||(t.flags&=-2)}}}function pi(s){if(Es.length){const e=[...new Set(Es)].sort((o,t)=>Zs(o)-Zs(t));if(Es.length=0,es){es.push(...e);return}for(es=e,ks=0;ks<es.length;ks++){const o=es[ks];o.flags&4&&(o.flags&=-2),o.flags&8||o(),o.flags&=-2}es=null,ks=0}}const Zs=s=>s.id==null?s.flags&2?-1:1/0:s.id;function gi(s){try{for(Lt=0;Lt<bt.length;Lt++){const e=bt[Lt];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),on(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Lt<bt.length;Lt++){const e=bt[Lt];e&&(e.flags&=-2)}Lt=-1,bt.length=0,pi(),Cn=null,(bt.length||Es.length)&&gi()}}let xt=null,vi=null;function Sn(s){const e=xt;return xt=s,vi=s&&s.type.__scopeId||null,e}function cr(s,e=xt,o){if(!e||s._n)return s;const t=(...i)=>{t._d&&al(-1);const r=Sn(e);let l;try{l=s(...i)}finally{Sn(r),t._d&&al(1)}return l};return t._n=!0,t._c=!0,t._d=!0,t}function B(s,e){if(xt===null)return s;const o=Nn(xt),t=s.dirs||(s.dirs=[]);for(let i=0;i<e.length;i++){let[r,l,a,u=We]=e[i];r&&(Me(r)&&(r={mounted:r,updated:r}),r.deep&&Gt(l),t.push({dir:r,instance:o,value:l,oldValue:void 0,arg:a,modifiers:u}))}return s}function ds(s,e,o,t){const i=s.dirs,r=e&&e.dirs;for(let l=0;l<i.length;l++){const a=i[l];r&&(a.oldValue=r[l].value);let u=a.dir[t];u&&(zt(),Vt(u,o,8,[s.el,a,s,e]),Jt())}}const dr=Symbol("_vte"),ur=s=>s.__isTeleport;function No(s,e){s.shapeFlag&6&&s.component?(s.transition=e,No(s.component.subTree,e)):s.shapeFlag&128?(s.ssContent.transition=e.clone(s.ssContent),s.ssFallback.transition=e.clone(s.ssFallback)):s.transition=e}/*! #__NO_SIDE_EFFECTS__ */function Vo(s,e){return Me(s)?vt({name:s.name},e,{setup:s}):s}function hi(s){s.ids=[s.ids[0]+s.ids[2]+++"-",0,0]}function Ws(s,e,o,t,i=!1){if(Te(s)){s.forEach((h,P)=>Ws(h,e&&(Te(e)?e[P]:e),o,t,i));return}if(Hs(t)&&!i){t.shapeFlag&512&&t.type.__asyncResolved&&t.component.subTree.component&&Ws(s,e,o,t.component.subTree);return}const r=t.shapeFlag&4?Nn(t.component):t.el,l=i?null:r,{i:a,r:u}=s,p=e&&e.r,f=a.refs===We?a.refs={}:a.refs,v=a.setupState,w=Be(v),k=v===We?()=>!1:h=>Ke(w,h);if(p!=null&&p!==u&&(nt(p)?(f[p]=null,k(p)&&(v[p]=null)):gt(p)&&(p.value=null)),Me(u))on(u,a,12,[l,f]);else{const h=nt(u),P=gt(u);if(h||P){const x=()=>{if(s.f){const _=h?k(u)?v[u]:f[u]:u.value;i?Te(_)&&Eo(_,r):Te(_)?_.includes(r)||_.push(r):h?(f[u]=[r],k(u)&&(v[u]=f[u])):(u.value=[r],s.k&&(f[s.k]=u.value))}else h?(f[u]=l,k(u)&&(v[u]=l)):P&&(u.value=l,s.k&&(f[s.k]=l))};l?(x.id=-1,_t(x,o)):x()}}}Mn().requestIdleCallback;Mn().cancelIdleCallback;const Hs=s=>!!s.type.__asyncLoader,bi=s=>s.type.__isKeepAlive;function fr(s,e){yi(s,"a",e)}function mr(s,e){yi(s,"da",e)}function yi(s,e,o=pt){const t=s.__wdc||(s.__wdc=()=>{let i=o;for(;i;){if(i.isDeactivated)return;i=i.parent}return s()});if(Ln(e,t,o),o){let i=o.parent;for(;i&&i.parent;)bi(i.parent.vnode)&&pr(t,e,o,i),i=i.parent}}function pr(s,e,o,t){const i=Ln(e,s,t,!0);ut(()=>{Eo(t[e],i)},o)}function Ln(s,e,o=pt,t=!1){if(o){const i=o[s]||(o[s]=[]),r=e.__weh||(e.__weh=(...l)=>{zt();const a=ln(o),u=Vt(e,o,s,l);return a(),Jt(),u});return t?i.unshift(r):i.push(r),r}}const Yt=s=>(e,o=pt)=>{(!en||s==="sp")&&Ln(s,(...t)=>e(...t),o)},gr=Yt("bm"),it=Yt("m"),vr=Yt("bu"),hr=Yt("u"),br=Yt("bum"),ut=Yt("um"),yr=Yt("sp"),wr=Yt("rtg"),kr=Yt("rtc");function _r(s,e=pt){Ln("ec",s,e)}const xr="components";function Je(s,e){return Sr(xr,s,!0,e)||s}const Cr=Symbol.for("v-ndc");function Sr(s,e,o=!0,t=!1){const i=xt||pt;if(i){const r=i.type;{const a=fc(r,!1);if(a&&(a===e||a===Et(e)||a===Dn(Et(e))))return r}const l=Zo(i[s]||r[s],e)||Zo(i.appContext[s],e);return!l&&t?r:l}}function Zo(s,e){return s&&(s[e]||s[Et(e)]||s[Dn(Et(e))])}function ye(s,e,o,t){let i;const r=o,l=Te(s);if(l||nt(s)){const a=l&&Ss(s);let u=!1,p=!1;a&&(u=!St(s),p=os(s),s=An(s)),i=new Array(s.length);for(let f=0,v=s.length;f<v;f++)i[f]=e(u?p?_n(dt(s[f])):dt(s[f]):s[f],f,void 0,r)}else if(typeof s=="number"){i=new Array(s);for(let a=0;a<s;a++)i[a]=e(a+1,a,void 0,r)}else if($e(s))if(s[Symbol.iterator])i=Array.from(s,(a,u)=>e(a,u,void 0,r));else{const a=Object.keys(s);i=new Array(a.length);for(let u=0,p=a.length;u<p;u++){const f=a[u];i[u]=e(s[f],f,u,r)}}else i=[];return i}const vo=s=>s?Vi(s)?Nn(s):vo(s.parent):null,qs=vt(Object.create(null),{$:s=>s,$el:s=>s.vnode.el,$data:s=>s.data,$props:s=>s.props,$attrs:s=>s.attrs,$slots:s=>s.slots,$refs:s=>s.refs,$parent:s=>vo(s.parent),$root:s=>vo(s.root),$host:s=>s.ce,$emit:s=>s.emit,$options:s=>ki(s),$forceUpdate:s=>s.f||(s.f=()=>{Fo(s.update)}),$nextTick:s=>s.n||(s.n=mt.bind(s.proxy)),$watch:s=>Gr.bind(s)}),so=(s,e)=>s!==We&&!s.__isScriptSetup&&Ke(s,e),Tr={get({_:s},e){if(e==="__v_skip")return!0;const{ctx:o,setupState:t,data:i,props:r,accessCache:l,type:a,appContext:u}=s;let p;if(e[0]!=="$"){const k=l[e];if(k!==void 0)switch(k){case 1:return t[e];case 2:return i[e];case 4:return o[e];case 3:return r[e]}else{if(so(t,e))return l[e]=1,t[e];if(i!==We&&Ke(i,e))return l[e]=2,i[e];if((p=s.propsOptions[0])&&Ke(p,e))return l[e]=3,r[e];if(o!==We&&Ke(o,e))return l[e]=4,o[e];ho&&(l[e]=0)}}const f=qs[e];let v,w;if(f)return e==="$attrs"&&ft(s.attrs,"get",""),f(s);if((v=a.__cssModules)&&(v=v[e]))return v;if(o!==We&&Ke(o,e))return l[e]=4,o[e];if(w=u.config.globalProperties,Ke(w,e))return w[e]},set({_:s},e,o){const{data:t,setupState:i,ctx:r}=s;return so(i,e)?(i[e]=o,!0):t!==We&&Ke(t,e)?(t[e]=o,!0):Ke(s.props,e)||e[0]==="$"&&e.slice(1)in s?!1:(r[e]=o,!0)},has({_:{data:s,setupState:e,accessCache:o,ctx:t,appContext:i,propsOptions:r}},l){let a;return!!o[l]||s!==We&&Ke(s,l)||so(e,l)||(a=r[0])&&Ke(a,l)||Ke(t,l)||Ke(qs,l)||Ke(i.config.globalProperties,l)},defineProperty(s,e,o){return o.get!=null?s._.accessCache[e]=0:Ke(o,"value")&&this.set(s,e,o.value,null),Reflect.defineProperty(s,e,o)}};function Xo(s){return Te(s)?s.reduce((e,o)=>(e[o]=null,e),{}):s}let ho=!0;function Er(s){const e=ki(s),o=s.proxy,t=s.ctx;ho=!1,e.beforeCreate&&el(e.beforeCreate,s,"bc");const{data:i,computed:r,methods:l,watch:a,provide:u,inject:p,created:f,beforeMount:v,mounted:w,beforeUpdate:k,updated:h,activated:P,deactivated:x,beforeDestroy:_,beforeUnmount:S,destroyed:L,unmounted:A,render:ae,renderTracked:se,renderTriggered:be,errorCaptured:z,serverPrefetch:q,expose:X,inheritAttrs:Ee,components:Pe,directives:ee,filters:xe}=e;if(p&&Ir(p,t,null),l)for(const O in l){const M=l[O];Me(M)&&(t[O]=M.bind(o))}if(i){const O=i.call(o,o);$e(O)&&(s.data=rs(O))}if(ho=!0,r)for(const O in r){const M=r[O],J=Me(M)?M.bind(o,o):Me(M.get)?M.get.bind(o,o):Ft,W=!Me(M)&&Me(M.set)?M.set.bind(o):Ft,K=Se({get:J,set:W});Object.defineProperty(t,O,{enumerable:!0,configurable:!0,get:()=>K.value,set:F=>K.value=F})}if(a)for(const O in a)wi(a[O],t,o,O);if(u){const O=Me(u)?u.call(o):u;Reflect.ownKeys(O).forEach(M=>{hn(M,O[M])})}f&&el(f,s,"c");function Z(O,M){Te(M)?M.forEach(J=>O(J.bind(o))):M&&O(M.bind(o))}if(Z(gr,v),Z(it,w),Z(vr,k),Z(hr,h),Z(fr,P),Z(mr,x),Z(_r,z),Z(kr,se),Z(wr,be),Z(br,S),Z(ut,A),Z(yr,q),Te(X))if(X.length){const O=s.exposed||(s.exposed={});X.forEach(M=>{Object.defineProperty(O,M,{get:()=>o[M],set:J=>o[M]=J,enumerable:!0})})}else s.exposed||(s.exposed={});ae&&s.render===Ft&&(s.render=ae),Ee!=null&&(s.inheritAttrs=Ee),Pe&&(s.components=Pe),ee&&(s.directives=ee),q&&hi(s)}function Ir(s,e,o=Ft){Te(s)&&(s=bo(s));for(const t in s){const i=s[t];let r;$e(i)?"default"in i?r=Rt(i.from||t,i.default,!0):r=Rt(i.from||t):r=Rt(i),gt(r)?Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:()=>r.value,set:l=>r.value=l}):e[t]=r}}function el(s,e,o){Vt(Te(s)?s.map(t=>t.bind(e.proxy)):s.bind(e.proxy),e,o)}function wi(s,e,o,t){let i=t.includes(".")?Ui(o,t):()=>o[t];if(nt(s)){const r=e[s];Me(r)&&yt(i,r)}else if(Me(s))yt(i,s.bind(o));else if($e(s))if(Te(s))s.forEach(r=>wi(r,e,o,t));else{const r=Me(s.handler)?s.handler.bind(o):e[s.handler];Me(r)&&yt(i,r,s)}}function ki(s){const e=s.type,{mixins:o,extends:t}=e,{mixins:i,optionsCache:r,config:{optionMergeStrategies:l}}=s.appContext,a=r.get(e);let u;return a?u=a:!i.length&&!o&&!t?u=e:(u={},i.length&&i.forEach(p=>Tn(u,p,l,!0)),Tn(u,e,l)),$e(e)&&r.set(e,u),u}function Tn(s,e,o,t=!1){const{mixins:i,extends:r}=e;r&&Tn(s,r,o,!0),i&&i.forEach(l=>Tn(s,l,o,!0));for(const l in e)if(!(t&&l==="expose")){const a=Pr[l]||o&&o[l];s[l]=a?a(s[l],e[l]):e[l]}return s}const Pr={data:tl,props:sl,emits:sl,methods:Vs,computed:Vs,beforeCreate:ht,created:ht,beforeMount:ht,mounted:ht,beforeUpdate:ht,updated:ht,beforeDestroy:ht,beforeUnmount:ht,destroyed:ht,unmounted:ht,activated:ht,deactivated:ht,errorCaptured:ht,serverPrefetch:ht,components:Vs,directives:Vs,watch:Dr,provide:tl,inject:Rr};function tl(s,e){return e?s?function(){return vt(Me(s)?s.call(this,this):s,Me(e)?e.call(this,this):e)}:e:s}function Rr(s,e){return Vs(bo(s),bo(e))}function bo(s){if(Te(s)){const e={};for(let o=0;o<s.length;o++)e[s[o]]=s[o];return e}return s}function ht(s,e){return s?[...new Set([].concat(s,e))]:e}function Vs(s,e){return s?vt(Object.create(null),s,e):e}function sl(s,e){return s?Te(s)&&Te(e)?[...new Set([...s,...e])]:vt(Object.create(null),Xo(s),Xo(e??{})):e}function Dr(s,e){if(!s)return e;if(!e)return s;const o=vt(Object.create(null),s);for(const t in e)o[t]=ht(s[t],e[t]);return o}function _i(){return{app:null,config:{isNativeTag:wa,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Mr=0;function Ar(s,e){return function(t,i=null){Me(t)||(t=vt({},t)),i!=null&&!$e(i)&&(i=null);const r=_i(),l=new WeakSet,a=[];let u=!1;const p=r.app={_uid:Mr++,_component:t,_props:i,_container:null,_context:r,_instance:null,version:pc,get config(){return r.config},set config(f){},use(f,...v){return l.has(f)||(f&&Me(f.install)?(l.add(f),f.install(p,...v)):Me(f)&&(l.add(f),f(p,...v))),p},mixin(f){return r.mixins.includes(f)||r.mixins.push(f),p},component(f,v){return v?(r.components[f]=v,p):r.components[f]},directive(f,v){return v?(r.directives[f]=v,p):r.directives[f]},mount(f,v,w){if(!u){const k=p._ceVNode||Oe(t,i);return k.appContext=r,w===!0?w="svg":w===!1&&(w=void 0),s(k,f,w),u=!0,p._container=f,f.__vue_app__=p,Nn(k.component)}},onUnmount(f){a.push(f)},unmount(){u&&(Vt(a,p._instance,16),s(null,p._container),delete p._container.__vue_app__)},provide(f,v){return r.provides[f]=v,p},runWithContext(f){const v=Is;Is=p;try{return f()}finally{Is=v}}};return p}}let Is=null;function hn(s,e){if(pt){let o=pt.provides;const t=pt.parent&&pt.parent.provides;t===o&&(o=pt.provides=Object.create(t)),o[s]=e}}function Rt(s,e,o=!1){const t=ac();if(t||Is){let i=Is?Is._context.provides:t?t.parent==null||t.ce?t.vnode.appContext&&t.vnode.appContext.provides:t.parent.provides:void 0;if(i&&s in i)return i[s];if(arguments.length>1)return o&&Me(e)?e.call(t&&t.proxy):e}}const xi={},Ci=()=>Object.create(xi),Si=s=>Object.getPrototypeOf(s)===xi;function Ur(s,e,o,t=!1){const i={},r=Ci();s.propsDefaults=Object.create(null),Ti(s,e,i,r);for(const l in s.propsOptions[0])l in i||(i[l]=void 0);o?s.props=t?i:ri(i):s.type.props?s.props=i:s.props=r,s.attrs=r}function Lr(s,e,o,t){const{props:i,attrs:r,vnode:{patchFlag:l}}=s,a=Be(i),[u]=s.propsOptions;let p=!1;if((t||l>0)&&!(l&16)){if(l&8){const f=s.vnode.dynamicProps;for(let v=0;v<f.length;v++){let w=f[v];if(On(s.emitsOptions,w))continue;const k=e[w];if(u)if(Ke(r,w))k!==r[w]&&(r[w]=k,p=!0);else{const h=Et(w);i[h]=yo(u,a,h,k,s,!1)}else k!==r[w]&&(r[w]=k,p=!0)}}}else{Ti(s,e,i,r)&&(p=!0);let f;for(const v in a)(!e||!Ke(e,v)&&((f=as(v))===v||!Ke(e,f)))&&(u?o&&(o[v]!==void 0||o[f]!==void 0)&&(i[v]=yo(u,a,v,void 0,s,!0)):delete i[v]);if(r!==a)for(const v in r)(!e||!Ke(e,v))&&(delete r[v],p=!0)}p&&qt(s.attrs,"set","")}function Ti(s,e,o,t){const[i,r]=s.propsOptions;let l=!1,a;if(e)for(let u in e){if(js(u))continue;const p=e[u];let f;i&&Ke(i,f=Et(u))?!r||!r.includes(f)?o[f]=p:(a||(a={}))[f]=p:On(s.emitsOptions,u)||(!(u in t)||p!==t[u])&&(t[u]=p,l=!0)}if(r){const u=Be(o),p=a||We;for(let f=0;f<r.length;f++){const v=r[f];o[v]=yo(i,u,v,p[v],s,!Ke(p,v))}}return l}function yo(s,e,o,t,i,r){const l=s[o];if(l!=null){const a=Ke(l,"default");if(a&&t===void 0){const u=l.default;if(l.type!==Function&&!l.skipFactory&&Me(u)){const{propsDefaults:p}=i;if(o in p)t=p[o];else{const f=ln(i);t=p[o]=u.call(null,e),f()}}else t=u;i.ce&&i.ce._setProp(o,t)}l[0]&&(r&&!a?t=!1:l[1]&&(t===""||t===as(o))&&(t=!0))}return t}const Or=new WeakMap;function Ei(s,e,o=!1){const t=o?Or:e.propsCache,i=t.get(s);if(i)return i;const r=s.props,l={},a=[];let u=!1;if(!Me(s)){const f=v=>{u=!0;const[w,k]=Ei(v,e,!0);vt(l,w),k&&a.push(...k)};!o&&e.mixins.length&&e.mixins.forEach(f),s.extends&&f(s.extends),s.mixins&&s.mixins.forEach(f)}if(!r&&!u)return $e(s)&&t.set(s,xs),xs;if(Te(r))for(let f=0;f<r.length;f++){const v=Et(r[f]);nl(v)&&(l[v]=We)}else if(r)for(const f in r){const v=Et(f);if(nl(v)){const w=r[f],k=l[v]=Te(w)||Me(w)?{type:w}:vt({},w),h=k.type;let P=!1,x=!0;if(Te(h))for(let _=0;_<h.length;++_){const S=h[_],L=Me(S)&&S.name;if(L==="Boolean"){P=!0;break}else L==="String"&&(x=!1)}else P=Me(h)&&h.name==="Boolean";k[0]=P,k[1]=x,(P||Ke(k,"default"))&&a.push(v)}}const p=[l,a];return $e(s)&&t.set(s,p),p}function nl(s){return s[0]!=="$"&&!js(s)}const jo=s=>s==="_"||s==="__"||s==="_ctx"||s==="$stable",Bo=s=>Te(s)?s.map(Ot):[Ot(s)],Fr=(s,e,o)=>{if(e._n)return e;const t=cr((...i)=>Bo(e(...i)),o);return t._c=!1,t},Ii=(s,e,o)=>{const t=s._ctx;for(const i in s){if(jo(i))continue;const r=s[i];if(Me(r))e[i]=Fr(i,r,t);else if(r!=null){const l=Bo(r);e[i]=()=>l}}},Pi=(s,e)=>{const o=Bo(e);s.slots.default=()=>o},Ri=(s,e,o)=>{for(const t in e)(o||!jo(t))&&(s[t]=e[t])},Nr=(s,e,o)=>{const t=s.slots=Ci();if(s.vnode.shapeFlag&32){const i=e.__;i&&uo(t,"__",i,!0);const r=e._;r?(Ri(t,e,o),o&&uo(t,"_",r,!0)):Ii(e,t)}else e&&Pi(s,e)},Vr=(s,e,o)=>{const{vnode:t,slots:i}=s;let r=!0,l=We;if(t.shapeFlag&32){const a=e._;a?o&&a===1?r=!1:Ri(i,e,o):(r=!e.$stable,Ii(e,i)),l=e}else e&&(Pi(s,e),l={default:1});if(r)for(const a in i)!jo(a)&&l[a]==null&&delete i[a]},_t=Xr;function jr(s){return Br(s)}function Br(s,e){const o=Mn();o.__VUE__=!0;const{insert:t,remove:i,patchProp:r,createElement:l,createText:a,createComment:u,setText:p,setElementText:f,parentNode:v,nextSibling:w,setScopeId:k=Ft,insertStaticContent:h}=s,P=(g,y,I,V=null,j=null,H=null,ie=void 0,oe=null,te=!!y.dynamicChildren)=>{if(g===y)return;g&&!Os(g,y)&&(V=D(g),F(g,j,H,!0),g=null),y.patchFlag===-2&&(te=!1,y.dynamicChildren=null);const{type:Y,ref:we,shapeFlag:E}=y;switch(Y){case Fn:x(g,y,I,V);break;case ls:_(g,y,I,V);break;case bn:g==null&&S(y,I,V,ie);break;case pe:Pe(g,y,I,V,j,H,ie,oe,te);break;default:E&1?ae(g,y,I,V,j,H,ie,oe,te):E&6?ee(g,y,I,V,j,H,ie,oe,te):(E&64||E&128)&&Y.process(g,y,I,V,j,H,ie,oe,te,ce)}we!=null&&j?Ws(we,g&&g.ref,H,y||g,!y):we==null&&g&&g.ref!=null&&Ws(g.ref,null,H,g,!0)},x=(g,y,I,V)=>{if(g==null)t(y.el=a(y.children),I,V);else{const j=y.el=g.el;y.children!==g.children&&p(j,y.children)}},_=(g,y,I,V)=>{g==null?t(y.el=u(y.children||""),I,V):y.el=g.el},S=(g,y,I,V)=>{[g.el,g.anchor]=h(g.children,y,I,V,g.el,g.anchor)},L=({el:g,anchor:y},I,V)=>{let j;for(;g&&g!==y;)j=w(g),t(g,I,V),g=j;t(y,I,V)},A=({el:g,anchor:y})=>{let I;for(;g&&g!==y;)I=w(g),i(g),g=I;i(y)},ae=(g,y,I,V,j,H,ie,oe,te)=>{y.type==="svg"?ie="svg":y.type==="math"&&(ie="mathml"),g==null?se(y,I,V,j,H,ie,oe,te):q(g,y,j,H,ie,oe,te)},se=(g,y,I,V,j,H,ie,oe)=>{let te,Y;const{props:we,shapeFlag:E,transition:R,dirs:$}=g;if(te=g.el=l(g.type,H,we&&we.is,we),E&8?f(te,g.children):E&16&&z(g.children,te,null,V,j,no(g,H),ie,oe),$&&ds(g,null,V,"created"),be(te,g,g.scopeId,ie,V),we){for(const _e in we)_e!=="value"&&!js(_e)&&r(te,_e,null,we[_e],H,V);"value"in we&&r(te,"value",null,we.value,H),(Y=we.onVnodeBeforeMount)&&Ut(Y,V,g)}$&&ds(g,null,V,"beforeMount");const ge=Kr(j,R);ge&&R.beforeEnter(te),t(te,y,I),((Y=we&&we.onVnodeMounted)||ge||$)&&_t(()=>{Y&&Ut(Y,V,g),ge&&R.enter(te),$&&ds(g,null,V,"mounted")},j)},be=(g,y,I,V,j)=>{if(I&&k(g,I),V)for(let H=0;H<V.length;H++)k(g,V[H]);if(j){let H=j.subTree;if(y===H||Oi(H.type)&&(H.ssContent===y||H.ssFallback===y)){const ie=j.vnode;be(g,ie,ie.scopeId,ie.slotScopeIds,j.parent)}}},z=(g,y,I,V,j,H,ie,oe,te=0)=>{for(let Y=te;Y<g.length;Y++){const we=g[Y]=oe?ts(g[Y]):Ot(g[Y]);P(null,we,y,I,V,j,H,ie,oe)}},q=(g,y,I,V,j,H,ie)=>{const oe=y.el=g.el;let{patchFlag:te,dynamicChildren:Y,dirs:we}=y;te|=g.patchFlag&16;const E=g.props||We,R=y.props||We;let $;if(I&&us(I,!1),($=R.onVnodeBeforeUpdate)&&Ut($,I,y,g),we&&ds(y,g,I,"beforeUpdate"),I&&us(I,!0),(E.innerHTML&&R.innerHTML==null||E.textContent&&R.textContent==null)&&f(oe,""),Y?X(g.dynamicChildren,Y,oe,I,V,no(y,j),H):ie||M(g,y,oe,null,I,V,no(y,j),H,!1),te>0){if(te&16)Ee(oe,E,R,I,j);else if(te&2&&E.class!==R.class&&r(oe,"class",null,R.class,j),te&4&&r(oe,"style",E.style,R.style,j),te&8){const ge=y.dynamicProps;for(let _e=0;_e<ge.length;_e++){const Ue=ge[_e],ue=E[Ue],Ce=R[Ue];(Ce!==ue||Ue==="value")&&r(oe,Ue,ue,Ce,j,I)}}te&1&&g.children!==y.children&&f(oe,y.children)}else!ie&&Y==null&&Ee(oe,E,R,I,j);(($=R.onVnodeUpdated)||we)&&_t(()=>{$&&Ut($,I,y,g),we&&ds(y,g,I,"updated")},V)},X=(g,y,I,V,j,H,ie)=>{for(let oe=0;oe<y.length;oe++){const te=g[oe],Y=y[oe],we=te.el&&(te.type===pe||!Os(te,Y)||te.shapeFlag&198)?v(te.el):I;P(te,Y,we,null,V,j,H,ie,!0)}},Ee=(g,y,I,V,j)=>{if(y!==I){if(y!==We)for(const H in y)!js(H)&&!(H in I)&&r(g,H,y[H],null,j,V);for(const H in I){if(js(H))continue;const ie=I[H],oe=y[H];ie!==oe&&H!=="value"&&r(g,H,oe,ie,j,V)}"value"in I&&r(g,"value",y.value,I.value,j)}},Pe=(g,y,I,V,j,H,ie,oe,te)=>{const Y=y.el=g?g.el:a(""),we=y.anchor=g?g.anchor:a("");let{patchFlag:E,dynamicChildren:R,slotScopeIds:$}=y;$&&(oe=oe?oe.concat($):$),g==null?(t(Y,I,V),t(we,I,V),z(y.children||[],I,we,j,H,ie,oe,te)):E>0&&E&64&&R&&g.dynamicChildren?(X(g.dynamicChildren,R,I,j,H,ie,oe),(y.key!=null||j&&y===j.subTree)&&Di(g,y,!0)):M(g,y,I,we,j,H,ie,oe,te)},ee=(g,y,I,V,j,H,ie,oe,te)=>{y.slotScopeIds=oe,g==null?y.shapeFlag&512?j.ctx.activate(y,I,V,ie,te):xe(y,I,V,j,H,ie,te):fe(g,y,te)},xe=(g,y,I,V,j,H,ie)=>{const oe=g.component=ic(g,V,j);if(bi(g)&&(oe.ctx.renderer=ce),rc(oe,!1,ie),oe.asyncDep){if(j&&j.registerDep(oe,Z,ie),!g.el){const te=oe.subTree=Oe(ls);_(null,te,y,I),g.placeholder=te.el}}else Z(oe,g,y,I,j,H,ie)},fe=(g,y,I)=>{const V=y.component=g.component;if(Qr(g,y,I))if(V.asyncDep&&!V.asyncResolved){O(V,y,I);return}else V.next=y,V.update();else y.el=g.el,V.vnode=y},Z=(g,y,I,V,j,H,ie)=>{const oe=()=>{if(g.isMounted){let{next:E,bu:R,u:$,parent:ge,vnode:_e}=g;{const Ve=Mi(g);if(Ve){E&&(E.el=_e.el,O(g,E,ie)),Ve.asyncDep.then(()=>{g.isUnmounted||oe()});return}}let Ue=E,ue;us(g,!1),E?(E.el=_e.el,O(g,E,ie)):E=_e,R&&vn(R),(ue=E.props&&E.props.onVnodeBeforeUpdate)&&Ut(ue,ge,E,_e),us(g,!0);const Ce=ll(g),Fe=g.subTree;g.subTree=Ce,P(Fe,Ce,v(Fe.el),D(Fe),g,j,H),E.el=Ce.el,Ue===null&&Zr(g,Ce.el),$&&_t($,j),(ue=E.props&&E.props.onVnodeUpdated)&&_t(()=>Ut(ue,ge,E,_e),j)}else{let E;const{el:R,props:$}=y,{bm:ge,m:_e,parent:Ue,root:ue,type:Ce}=g,Fe=Hs(y);us(g,!1),ge&&vn(ge),!Fe&&(E=$&&$.onVnodeBeforeMount)&&Ut(E,Ue,y),us(g,!0);{ue.ce&&ue.ce._def.shadowRoot!==!1&&ue.ce._injectChildStyle(Ce);const Ve=g.subTree=ll(g);P(null,Ve,I,V,g,j,H),y.el=Ve.el}if(_e&&_t(_e,j),!Fe&&(E=$&&$.onVnodeMounted)){const Ve=y;_t(()=>Ut(E,Ue,Ve),j)}(y.shapeFlag&256||Ue&&Hs(Ue.vnode)&&Ue.vnode.shapeFlag&256)&&g.a&&_t(g.a,j),g.isMounted=!0,y=I=V=null}};g.scope.on();const te=g.effect=new zl(oe);g.scope.off();const Y=g.update=te.run.bind(te),we=g.job=te.runIfDirty.bind(te);we.i=g,we.id=g.uid,te.scheduler=()=>Fo(we),us(g,!0),Y()},O=(g,y,I)=>{y.component=g;const V=g.vnode.props;g.vnode=y,g.next=null,Lr(g,y.props,V,I),Vr(g,y.children,I),zt(),Qo(g),Jt()},M=(g,y,I,V,j,H,ie,oe,te=!1)=>{const Y=g&&g.children,we=g?g.shapeFlag:0,E=y.children,{patchFlag:R,shapeFlag:$}=y;if(R>0){if(R&128){W(Y,E,I,V,j,H,ie,oe,te);return}else if(R&256){J(Y,E,I,V,j,H,ie,oe,te);return}}$&8?(we&16&&re(Y,j,H),E!==Y&&f(I,E)):we&16?$&16?W(Y,E,I,V,j,H,ie,oe,te):re(Y,j,H,!0):(we&8&&f(I,""),$&16&&z(E,I,V,j,H,ie,oe,te))},J=(g,y,I,V,j,H,ie,oe,te)=>{g=g||xs,y=y||xs;const Y=g.length,we=y.length,E=Math.min(Y,we);let R;for(R=0;R<E;R++){const $=y[R]=te?ts(y[R]):Ot(y[R]);P(g[R],$,I,null,j,H,ie,oe,te)}Y>we?re(g,j,H,!0,!1,E):z(y,I,V,j,H,ie,oe,te,E)},W=(g,y,I,V,j,H,ie,oe,te)=>{let Y=0;const we=y.length;let E=g.length-1,R=we-1;for(;Y<=E&&Y<=R;){const $=g[Y],ge=y[Y]=te?ts(y[Y]):Ot(y[Y]);if(Os($,ge))P($,ge,I,null,j,H,ie,oe,te);else break;Y++}for(;Y<=E&&Y<=R;){const $=g[E],ge=y[R]=te?ts(y[R]):Ot(y[R]);if(Os($,ge))P($,ge,I,null,j,H,ie,oe,te);else break;E--,R--}if(Y>E){if(Y<=R){const $=R+1,ge=$<we?y[$].el:V;for(;Y<=R;)P(null,y[Y]=te?ts(y[Y]):Ot(y[Y]),I,ge,j,H,ie,oe,te),Y++}}else if(Y>R)for(;Y<=E;)F(g[Y],j,H,!0),Y++;else{const $=Y,ge=Y,_e=new Map;for(Y=ge;Y<=R;Y++){const st=y[Y]=te?ts(y[Y]):Ot(y[Y]);st.key!=null&&_e.set(st.key,Y)}let Ue,ue=0;const Ce=R-ge+1;let Fe=!1,Ve=0;const Ye=new Array(Ce);for(Y=0;Y<Ce;Y++)Ye[Y]=0;for(Y=$;Y<=E;Y++){const st=g[Y];if(ue>=Ce){F(st,j,H,!0);continue}let rt;if(st.key!=null)rt=_e.get(st.key);else for(Ue=ge;Ue<=R;Ue++)if(Ye[Ue-ge]===0&&Os(st,y[Ue])){rt=Ue;break}rt===void 0?F(st,j,H,!0):(Ye[rt-ge]=Y+1,rt>=Ve?Ve=rt:Fe=!0,P(st,y[rt],I,null,j,H,ie,oe,te),ue++)}const Mt=Fe?Wr(Ye):xs;for(Ue=Mt.length-1,Y=Ce-1;Y>=0;Y--){const st=ge+Y,rt=y[st],wt=y[st+1],Qe=st+1<we?wt.el||wt.placeholder:V;Ye[Y]===0?P(null,rt,I,Qe,j,H,ie,oe,te):Fe&&(Ue<0||Y!==Mt[Ue]?K(rt,I,Qe,2):Ue--)}}},K=(g,y,I,V,j=null)=>{const{el:H,type:ie,transition:oe,children:te,shapeFlag:Y}=g;if(Y&6){K(g.component.subTree,y,I,V);return}if(Y&128){g.suspense.move(y,I,V);return}if(Y&64){ie.move(g,y,I,ce);return}if(ie===pe){t(H,y,I);for(let E=0;E<te.length;E++)K(te[E],y,I,V);t(g.anchor,y,I);return}if(ie===bn){L(g,y,I);return}if(V!==2&&Y&1&&oe)if(V===0)oe.beforeEnter(H),t(H,y,I),_t(()=>oe.enter(H),j);else{const{leave:E,delayLeave:R,afterLeave:$}=oe,ge=()=>{g.ctx.isUnmounted?i(H):t(H,y,I)},_e=()=>{E(H,()=>{ge(),$&&$()})};R?R(H,ge,_e):_e()}else t(H,y,I)},F=(g,y,I,V=!1,j=!1)=>{const{type:H,props:ie,ref:oe,children:te,dynamicChildren:Y,shapeFlag:we,patchFlag:E,dirs:R,cacheIndex:$}=g;if(E===-2&&(j=!1),oe!=null&&(zt(),Ws(oe,null,I,g,!0),Jt()),$!=null&&(y.renderCache[$]=void 0),we&256){y.ctx.deactivate(g);return}const ge=we&1&&R,_e=!Hs(g);let Ue;if(_e&&(Ue=ie&&ie.onVnodeBeforeUnmount)&&Ut(Ue,y,g),we&6)Re(g.component,I,V);else{if(we&128){g.suspense.unmount(I,V);return}ge&&ds(g,null,y,"beforeUnmount"),we&64?g.type.remove(g,y,I,ce,V):Y&&!Y.hasOnce&&(H!==pe||E>0&&E&64)?re(Y,y,I,!1,!0):(H===pe&&E&384||!j&&we&16)&&re(te,y,I),V&&de(g)}(_e&&(Ue=ie&&ie.onVnodeUnmounted)||ge)&&_t(()=>{Ue&&Ut(Ue,y,g),ge&&ds(g,null,y,"unmounted")},I)},de=g=>{const{type:y,el:I,anchor:V,transition:j}=g;if(y===pe){me(I,V);return}if(y===bn){A(g);return}const H=()=>{i(I),j&&!j.persisted&&j.afterLeave&&j.afterLeave()};if(g.shapeFlag&1&&j&&!j.persisted){const{leave:ie,delayLeave:oe}=j,te=()=>ie(I,H);oe?oe(g.el,H,te):te()}else H()},me=(g,y)=>{let I;for(;g!==y;)I=w(g),i(g),g=I;i(y)},Re=(g,y,I)=>{const{bum:V,scope:j,job:H,subTree:ie,um:oe,m:te,a:Y,parent:we,slots:{__:E}}=g;ol(te),ol(Y),V&&vn(V),we&&Te(E)&&E.forEach(R=>{we.renderCache[R]=void 0}),j.stop(),H&&(H.flags|=8,F(ie,g,y,I)),oe&&_t(oe,y),_t(()=>{g.isUnmounted=!0},y),y&&y.pendingBranch&&!y.isUnmounted&&g.asyncDep&&!g.asyncResolved&&g.suspenseId===y.pendingId&&(y.deps--,y.deps===0&&y.resolve())},re=(g,y,I,V=!1,j=!1,H=0)=>{for(let ie=H;ie<g.length;ie++)F(g[ie],y,I,V,j)},D=g=>{if(g.shapeFlag&6)return D(g.component.subTree);if(g.shapeFlag&128)return g.suspense.next();const y=w(g.anchor||g.el),I=y&&y[dr];return I?w(I):y};let ne=!1;const le=(g,y,I)=>{g==null?y._vnode&&F(y._vnode,null,null,!0):P(y._vnode||null,g,y,null,null,null,I),y._vnode=g,ne||(ne=!0,Qo(),pi(),ne=!1)},ce={p:P,um:F,m:K,r:de,mt:xe,mc:z,pc:M,pbc:X,n:D,o:s};return{render:le,hydrate:void 0,createApp:Ar(le)}}function no({type:s,props:e},o){return o==="svg"&&s==="foreignObject"||o==="mathml"&&s==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:o}function us({effect:s,job:e},o){o?(s.flags|=32,e.flags|=4):(s.flags&=-33,e.flags&=-5)}function Kr(s,e){return(!s||s&&!s.pendingBranch)&&e&&!e.persisted}function Di(s,e,o=!1){const t=s.children,i=e.children;if(Te(t)&&Te(i))for(let r=0;r<t.length;r++){const l=t[r];let a=i[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[r]=ts(i[r]),a.el=l.el),!o&&a.patchFlag!==-2&&Di(l,a)),a.type===Fn&&(a.el=l.el),a.type===ls&&!a.el&&(a.el=l.el)}}function Wr(s){const e=s.slice(),o=[0];let t,i,r,l,a;const u=s.length;for(t=0;t<u;t++){const p=s[t];if(p!==0){if(i=o[o.length-1],s[i]<p){e[t]=i,o.push(t);continue}for(r=0,l=o.length-1;r<l;)a=r+l>>1,s[o[a]]<p?r=a+1:l=a;p<s[o[r]]&&(r>0&&(e[t]=o[r-1]),o[r]=t)}}for(r=o.length,l=o[r-1];r-- >0;)o[r]=l,l=e[l];return o}function Mi(s){const e=s.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Mi(e)}function ol(s){if(s)for(let e=0;e<s.length;e++)s[e].flags|=8}const Hr=Symbol.for("v-scx"),qr=()=>Rt(Hr);function yt(s,e,o){return Ai(s,e,o)}function Ai(s,e,o=We){const{immediate:t,deep:i,flush:r,once:l}=o,a=vt({},o),u=e&&t||!e&&r!=="post";let p;if(en){if(r==="sync"){const k=qr();p=k.__watcherHandles||(k.__watcherHandles=[])}else if(!u){const k=()=>{};return k.stop=Ft,k.resume=Ft,k.pause=Ft,k}}const f=pt;a.call=(k,h,P)=>Vt(k,f,h,P);let v=!1;r==="post"?a.scheduler=k=>{_t(k,f&&f.suspense)}:r!=="sync"&&(v=!0,a.scheduler=(k,h)=>{h?k():Fo(k)}),a.augmentJob=k=>{e&&(k.flags|=4),v&&(k.flags|=2,f&&(k.id=f.uid,k.i=f))};const w=lr(s,e,a);return en&&(p?p.push(w):u&&w()),w}function Gr(s,e,o){const t=this.proxy,i=nt(s)?s.includes(".")?Ui(t,s):()=>t[s]:s.bind(t,t);let r;Me(e)?r=e:(r=e.handler,o=e);const l=ln(this),a=Ai(i,r.bind(t),o);return l(),a}function Ui(s,e){const o=e.split(".");return()=>{let t=s;for(let i=0;i<o.length&&t;i++)t=t[o[i]];return t}}const $r=(s,e)=>e==="modelValue"||e==="model-value"?s.modelModifiers:s[`${e}Modifiers`]||s[`${Et(e)}Modifiers`]||s[`${as(e)}Modifiers`];function zr(s,e,...o){if(s.isUnmounted)return;const t=s.vnode.props||We;let i=o;const r=e.startsWith("update:"),l=r&&$r(t,e.slice(7));l&&(l.trim&&(i=o.map(f=>nt(f)?f.trim():f)),l.number&&(i=o.map(kn)));let a,u=t[a=Qn(e)]||t[a=Qn(Et(e))];!u&&r&&(u=t[a=Qn(as(e))]),u&&Vt(u,s,6,i);const p=t[a+"Once"];if(p){if(!s.emitted)s.emitted={};else if(s.emitted[a])return;s.emitted[a]=!0,Vt(p,s,6,i)}}function Li(s,e,o=!1){const t=e.emitsCache,i=t.get(s);if(i!==void 0)return i;const r=s.emits;let l={},a=!1;if(!Me(s)){const u=p=>{const f=Li(p,e,!0);f&&(a=!0,vt(l,f))};!o&&e.mixins.length&&e.mixins.forEach(u),s.extends&&u(s.extends),s.mixins&&s.mixins.forEach(u)}return!r&&!a?($e(s)&&t.set(s,null),null):(Te(r)?r.forEach(u=>l[u]=null):vt(l,r),$e(s)&&t.set(s,l),l)}function On(s,e){return!s||!Pn(e)?!1:(e=e.slice(2).replace(/Once$/,""),Ke(s,e[0].toLowerCase()+e.slice(1))||Ke(s,as(e))||Ke(s,e))}function ll(s){const{type:e,vnode:o,proxy:t,withProxy:i,propsOptions:[r],slots:l,attrs:a,emit:u,render:p,renderCache:f,props:v,data:w,setupState:k,ctx:h,inheritAttrs:P}=s,x=Sn(s);let _,S;try{if(o.shapeFlag&4){const A=i||t,ae=A;_=Ot(p.call(ae,A,f,v,k,w,h)),S=a}else{const A=e;_=Ot(A.length>1?A(v,{attrs:a,slots:l,emit:u}):A(v,null)),S=e.props?a:Jr(a)}}catch(A){Gs.length=0,Un(A,s,1),_=Oe(ls)}let L=_;if(S&&P!==!1){const A=Object.keys(S),{shapeFlag:ae}=L;A.length&&ae&7&&(r&&A.some(To)&&(S=Yr(S,r)),L=Ps(L,S,!1,!0))}return o.dirs&&(L=Ps(L,null,!1,!0),L.dirs=L.dirs?L.dirs.concat(o.dirs):o.dirs),o.transition&&No(L,o.transition),_=L,Sn(x),_}const Jr=s=>{let e;for(const o in s)(o==="class"||o==="style"||Pn(o))&&((e||(e={}))[o]=s[o]);return e},Yr=(s,e)=>{const o={};for(const t in s)(!To(t)||!(t.slice(9)in e))&&(o[t]=s[t]);return o};function Qr(s,e,o){const{props:t,children:i,component:r}=s,{props:l,children:a,patchFlag:u}=e,p=r.emitsOptions;if(e.dirs||e.transition)return!0;if(o&&u>=0){if(u&1024)return!0;if(u&16)return t?il(t,l,p):!!l;if(u&8){const f=e.dynamicProps;for(let v=0;v<f.length;v++){const w=f[v];if(l[w]!==t[w]&&!On(p,w))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:t===l?!1:t?l?il(t,l,p):!0:!!l;return!1}function il(s,e,o){const t=Object.keys(e);if(t.length!==Object.keys(s).length)return!0;for(let i=0;i<t.length;i++){const r=t[i];if(e[r]!==s[r]&&!On(o,r))return!0}return!1}function Zr({vnode:s,parent:e},o){for(;e;){const t=e.subTree;if(t.suspense&&t.suspense.activeBranch===s&&(t.el=s.el),t===s)(s=e.vnode).el=o,e=e.parent;else break}}const Oi=s=>s.__isSuspense;function Xr(s,e){e&&e.pendingBranch?Te(s)?e.effects.push(...s):e.effects.push(s):rr(s)}const pe=Symbol.for("v-fgt"),Fn=Symbol.for("v-txt"),ls=Symbol.for("v-cmt"),bn=Symbol.for("v-stc"),Gs=[];let Ct=null;function c(s=!1){Gs.push(Ct=s?null:[])}function ec(){Gs.pop(),Ct=Gs[Gs.length-1]||null}let Xs=1;function al(s,e=!1){Xs+=s,s<0&&Ct&&e&&(Ct.hasOnce=!0)}function Fi(s){return s.dynamicChildren=Xs>0?Ct||xs:null,ec(),Xs>0&&Ct&&Ct.push(s),s}function d(s,e,o,t,i,r){return Fi(n(s,e,o,t,i,r,!0))}function $s(s,e,o,t,i){return Fi(Oe(s,e,o,t,i,!0))}function En(s){return s?s.__v_isVNode===!0:!1}function Os(s,e){return s.type===e.type&&s.key===e.key}const Ni=({key:s})=>s??null,yn=({ref:s,ref_key:e,ref_for:o})=>(typeof s=="number"&&(s=""+s),s!=null?nt(s)||gt(s)||Me(s)?{i:xt,r:s,k:e,f:!!o}:s:null);function n(s,e=null,o=null,t=0,i=null,r=s===pe?0:1,l=!1,a=!1){const u={__v_isVNode:!0,__v_skip:!0,type:s,props:e,key:e&&Ni(e),ref:e&&yn(e),scopeId:vi,slotScopeIds:null,children:o,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:t,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:xt};return a?(Ko(u,o),r&128&&s.normalize(u)):o&&(u.shapeFlag|=nt(o)?8:16),Xs>0&&!l&&Ct&&(u.patchFlag>0||r&6)&&u.patchFlag!==32&&Ct.push(u),u}const Oe=tc;function tc(s,e=null,o=null,t=0,i=null,r=!1){if((!s||s===Cr)&&(s=ls),En(s)){const a=Ps(s,e,!0);return o&&Ko(a,o),Xs>0&&!r&&Ct&&(a.shapeFlag&6?Ct[Ct.indexOf(s)]=a:Ct.push(a)),a.patchFlag=-2,a}if(mc(s)&&(s=s.__vccOpts),e){e=sc(e);let{class:a,style:u}=e;a&&!nt(a)&&(e.class=G(a)),$e(u)&&(Oo(u)&&!Te(u)&&(u=vt({},u)),e.style=ct(u))}const l=nt(s)?1:Oi(s)?128:ur(s)?64:$e(s)?4:Me(s)?2:0;return n(s,e,o,t,i,l,r,!0)}function sc(s){return s?Oo(s)||Si(s)?vt({},s):s:null}function Ps(s,e,o=!1,t=!1){const{props:i,ref:r,patchFlag:l,children:a,transition:u}=s,p=e?nc(i||{},e):i,f={__v_isVNode:!0,__v_skip:!0,type:s.type,props:p,key:p&&Ni(p),ref:e&&e.ref?o&&r?Te(r)?r.concat(yn(e)):[r,yn(e)]:yn(e):r,scopeId:s.scopeId,slotScopeIds:s.slotScopeIds,children:a,target:s.target,targetStart:s.targetStart,targetAnchor:s.targetAnchor,staticCount:s.staticCount,shapeFlag:s.shapeFlag,patchFlag:e&&s.type!==pe?l===-1?16:l|16:l,dynamicProps:s.dynamicProps,dynamicChildren:s.dynamicChildren,appContext:s.appContext,dirs:s.dirs,transition:u,component:s.component,suspense:s.suspense,ssContent:s.ssContent&&Ps(s.ssContent),ssFallback:s.ssFallback&&Ps(s.ssFallback),placeholder:s.placeholder,el:s.el,anchor:s.anchor,ctx:s.ctx,ce:s.ce};return u&&t&&No(f,u.clone(f)),f}function U(s=" ",e=0){return Oe(Fn,null,s,e)}function hs(s,e){const o=Oe(bn,null,s);return o.staticCount=e,o}function C(s="",e=!1){return e?(c(),$s(ls,null,s)):Oe(ls,null,s)}function Ot(s){return s==null||typeof s=="boolean"?Oe(ls):Te(s)?Oe(pe,null,s.slice()):En(s)?ts(s):Oe(Fn,null,String(s))}function ts(s){return s.el===null&&s.patchFlag!==-1||s.memo?s:Ps(s)}function Ko(s,e){let o=0;const{shapeFlag:t}=s;if(e==null)e=null;else if(Te(e))o=16;else if(typeof e=="object")if(t&65){const i=e.default;i&&(i._c&&(i._d=!1),Ko(s,i()),i._c&&(i._d=!0));return}else{o=32;const i=e._;!i&&!Si(e)?e._ctx=xt:i===3&&xt&&(xt.slots._===1?e._=1:(e._=2,s.patchFlag|=1024))}else Me(e)?(e={default:e,_ctx:xt},o=32):(e=String(e),t&64?(o=16,e=[U(e)]):o=8);s.children=e,s.shapeFlag|=o}function nc(...s){const e={};for(let o=0;o<s.length;o++){const t=s[o];for(const i in t)if(i==="class")e.class!==t.class&&(e.class=G([e.class,t.class]));else if(i==="style")e.style=ct([e.style,t.style]);else if(Pn(i)){const r=e[i],l=t[i];l&&r!==l&&!(Te(r)&&r.includes(l))&&(e[i]=r?[].concat(r,l):l)}else i!==""&&(e[i]=t[i])}return e}function Ut(s,e,o,t=null){Vt(s,e,7,[o,t])}const oc=_i();let lc=0;function ic(s,e,o){const t=s.type,i=(e?e.appContext:s.appContext)||oc,r={uid:lc++,vnode:s,type:t,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Ma(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ei(t,i),emitsOptions:Li(t,i),emit:null,emitted:null,propsDefaults:We,inheritAttrs:t.inheritAttrs,ctx:We,data:We,props:We,attrs:We,slots:We,refs:We,setupState:We,setupContext:null,suspense:o,suspenseId:o?o.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=zr.bind(null,r),s.ce&&s.ce(r),r}let pt=null;const ac=()=>pt||xt;let In,wo;{const s=Mn(),e=(o,t)=>{let i;return(i=s[o])||(i=s[o]=[]),i.push(t),r=>{i.length>1?i.forEach(l=>l(r)):i[0](r)}};In=e("__VUE_INSTANCE_SETTERS__",o=>pt=o),wo=e("__VUE_SSR_SETTERS__",o=>en=o)}const ln=s=>{const e=pt;return In(s),s.scope.on(),()=>{s.scope.off(),In(e)}},rl=()=>{pt&&pt.scope.off(),In(null)};function Vi(s){return s.vnode.shapeFlag&4}let en=!1;function rc(s,e=!1,o=!1){e&&wo(e);const{props:t,children:i}=s.vnode,r=Vi(s);Ur(s,t,r,e),Nr(s,i,o||e);const l=r?cc(s,e):void 0;return e&&wo(!1),l}function cc(s,e){const o=s.type;s.accessCache=Object.create(null),s.proxy=new Proxy(s.ctx,Tr);const{setup:t}=o;if(t){zt();const i=s.setupContext=t.length>1?uc(s):null,r=ln(s),l=on(t,s,0,[s.props,i]),a=Kl(l);if(Jt(),r(),(a||s.sp)&&!Hs(s)&&hi(s),a){if(l.then(rl,rl),e)return l.then(u=>{cl(s,u)}).catch(u=>{Un(u,s,0)});s.asyncDep=l}else cl(s,l)}else ji(s)}function cl(s,e,o){Me(e)?s.type.__ssrInlineRender?s.ssrRender=e:s.render=e:$e(e)&&(s.setupState=ui(e)),ji(s)}function ji(s,e,o){const t=s.type;s.render||(s.render=t.render||Ft);{const i=ln(s);zt();try{Er(s)}finally{Jt(),i()}}}const dc={get(s,e){return ft(s,"get",""),s[e]}};function uc(s){const e=o=>{s.exposed=o||{}};return{attrs:new Proxy(s.attrs,dc),slots:s.slots,emit:s.emit,expose:e}}function Nn(s){return s.exposed?s.exposeProxy||(s.exposeProxy=new Proxy(ui(Za(s.exposed)),{get(e,o){if(o in e)return e[o];if(o in qs)return qs[o](s)},has(e,o){return o in e||o in qs}})):s.proxy}function fc(s,e=!0){return Me(s)?s.displayName||s.name:s.name||e&&s.__name}function mc(s){return Me(s)&&"__vccOpts"in s}const Se=(s,e)=>nr(s,e,en);function Bi(s,e,o){const t=arguments.length;return t===2?$e(e)&&!Te(e)?En(e)?Oe(s,null,[e]):Oe(s,e):Oe(s,null,e):(t>3?o=Array.prototype.slice.call(arguments,2):t===3&&En(o)&&(o=[o]),Oe(s,e,o))}const pc="3.5.18";/**
* @vue/runtime-dom v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ko;const dl=typeof window<"u"&&window.trustedTypes;if(dl)try{ko=dl.createPolicy("vue",{createHTML:s=>s})}catch{}const Ki=ko?s=>ko.createHTML(s):s=>s,gc="http://www.w3.org/2000/svg",vc="http://www.w3.org/1998/Math/MathML",Ht=typeof document<"u"?document:null,ul=Ht&&Ht.createElement("template"),hc={insert:(s,e,o)=>{e.insertBefore(s,o||null)},remove:s=>{const e=s.parentNode;e&&e.removeChild(s)},createElement:(s,e,o,t)=>{const i=e==="svg"?Ht.createElementNS(gc,s):e==="mathml"?Ht.createElementNS(vc,s):o?Ht.createElement(s,{is:o}):Ht.createElement(s);return s==="select"&&t&&t.multiple!=null&&i.setAttribute("multiple",t.multiple),i},createText:s=>Ht.createTextNode(s),createComment:s=>Ht.createComment(s),setText:(s,e)=>{s.nodeValue=e},setElementText:(s,e)=>{s.textContent=e},parentNode:s=>s.parentNode,nextSibling:s=>s.nextSibling,querySelector:s=>Ht.querySelector(s),setScopeId(s,e){s.setAttribute(e,"")},insertStaticContent(s,e,o,t,i,r){const l=o?o.previousSibling:e.lastChild;if(i&&(i===r||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),o),!(i===r||!(i=i.nextSibling)););else{ul.innerHTML=Ki(t==="svg"?`<svg>${s}</svg>`:t==="mathml"?`<math>${s}</math>`:s);const a=ul.content;if(t==="svg"||t==="mathml"){const u=a.firstChild;for(;u.firstChild;)a.appendChild(u.firstChild);a.removeChild(u)}e.insertBefore(a,o)}return[l?l.nextSibling:e.firstChild,o?o.previousSibling:e.lastChild]}},bc=Symbol("_vtc");function yc(s,e,o){const t=s[bc];t&&(e=(e?[e,...t]:[...t]).join(" ")),e==null?s.removeAttribute("class"):o?s.setAttribute("class",e):s.className=e}const fl=Symbol("_vod"),wc=Symbol("_vsh"),kc=Symbol(""),_c=/(^|;)\s*display\s*:/;function xc(s,e,o){const t=s.style,i=nt(o);let r=!1;if(o&&!i){if(e)if(nt(e))for(const l of e.split(";")){const a=l.slice(0,l.indexOf(":")).trim();o[a]==null&&wn(t,a,"")}else for(const l in e)o[l]==null&&wn(t,l,"");for(const l in o)l==="display"&&(r=!0),wn(t,l,o[l])}else if(i){if(e!==o){const l=t[kc];l&&(o+=";"+l),t.cssText=o,r=_c.test(o)}}else e&&s.removeAttribute("style");fl in s&&(s[fl]=r?t.display:"",s[wc]&&(t.display="none"))}const ml=/\s*!important$/;function wn(s,e,o){if(Te(o))o.forEach(t=>wn(s,e,t));else if(o==null&&(o=""),e.startsWith("--"))s.setProperty(e,o);else{const t=Cc(s,e);ml.test(o)?s.setProperty(as(t),o.replace(ml,""),"important"):s[t]=o}}const pl=["Webkit","Moz","ms"],oo={};function Cc(s,e){const o=oo[e];if(o)return o;let t=Et(e);if(t!=="filter"&&t in s)return oo[e]=t;t=Dn(t);for(let i=0;i<pl.length;i++){const r=pl[i]+t;if(r in s)return oo[e]=r}return e}const gl="http://www.w3.org/1999/xlink";function vl(s,e,o,t,i,r=Ra(e)){t&&e.startsWith("xlink:")?o==null?s.removeAttributeNS(gl,e.slice(6,e.length)):s.setAttributeNS(gl,e,o):o==null||r&&!ql(o)?s.removeAttribute(e):s.setAttribute(e,r?"":Nt(o)?String(o):o)}function hl(s,e,o,t,i){if(e==="innerHTML"||e==="textContent"){o!=null&&(s[e]=e==="innerHTML"?Ki(o):o);return}const r=s.tagName;if(e==="value"&&r!=="PROGRESS"&&!r.includes("-")){const a=r==="OPTION"?s.getAttribute("value")||"":s.value,u=o==null?s.type==="checkbox"?"on":"":String(o);(a!==u||!("_value"in s))&&(s.value=u),o==null&&s.removeAttribute(e),s._value=o;return}let l=!1;if(o===""||o==null){const a=typeof s[e];a==="boolean"?o=ql(o):o==null&&a==="string"?(o="",l=!0):a==="number"&&(o=0,l=!0)}try{s[e]=o}catch{}l&&s.removeAttribute(i||e)}function $t(s,e,o,t){s.addEventListener(e,o,t)}function Sc(s,e,o,t){s.removeEventListener(e,o,t)}const bl=Symbol("_vei");function Tc(s,e,o,t,i=null){const r=s[bl]||(s[bl]={}),l=r[e];if(t&&l)l.value=t;else{const[a,u]=Ec(e);if(t){const p=r[e]=Rc(t,i);$t(s,a,p,u)}else l&&(Sc(s,a,l,u),r[e]=void 0)}}const yl=/(?:Once|Passive|Capture)$/;function Ec(s){let e;if(yl.test(s)){e={};let t;for(;t=s.match(yl);)s=s.slice(0,s.length-t[0].length),e[t[0].toLowerCase()]=!0}return[s[2]===":"?s.slice(3):as(s.slice(2)),e]}let lo=0;const Ic=Promise.resolve(),Pc=()=>lo||(Ic.then(()=>lo=0),lo=Date.now());function Rc(s,e){const o=t=>{if(!t._vts)t._vts=Date.now();else if(t._vts<=o.attached)return;Vt(Dc(t,o.value),e,5,[t])};return o.value=s,o.attached=Pc(),o}function Dc(s,e){if(Te(e)){const o=s.stopImmediatePropagation;return s.stopImmediatePropagation=()=>{o.call(s),s._stopped=!0},e.map(t=>i=>!i._stopped&&t&&t(i))}else return e}const wl=s=>s.charCodeAt(0)===111&&s.charCodeAt(1)===110&&s.charCodeAt(2)>96&&s.charCodeAt(2)<123,Mc=(s,e,o,t,i,r)=>{const l=i==="svg";e==="class"?yc(s,t,l):e==="style"?xc(s,o,t):Pn(e)?To(e)||Tc(s,e,o,t,r):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Ac(s,e,t,l))?(hl(s,e,t),!s.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&vl(s,e,t,l,r,e!=="value")):s._isVueCE&&(/[A-Z]/.test(e)||!nt(t))?hl(s,Et(e),t,r,e):(e==="true-value"?s._trueValue=t:e==="false-value"&&(s._falseValue=t),vl(s,e,t,l))};function Ac(s,e,o,t){if(t)return!!(e==="innerHTML"||e==="textContent"||e in s&&wl(e)&&Me(o));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&s.tagName==="INPUT"||e==="type"&&s.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=s.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return wl(e)&&nt(o)?!1:e in s}const is=s=>{const e=s.props["onUpdate:modelValue"]||!1;return Te(e)?o=>vn(e,o):e};function Uc(s){s.target.composing=!0}function kl(s){const e=s.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Tt=Symbol("_assign"),he={created(s,{modifiers:{lazy:e,trim:o,number:t}},i){s[Tt]=is(i);const r=t||i.props&&i.props.type==="number";$t(s,e?"change":"input",l=>{if(l.target.composing)return;let a=s.value;o&&(a=a.trim()),r&&(a=kn(a)),s[Tt](a)}),o&&$t(s,"change",()=>{s.value=s.value.trim()}),e||($t(s,"compositionstart",Uc),$t(s,"compositionend",kl),$t(s,"change",kl))},mounted(s,{value:e}){s.value=e??""},beforeUpdate(s,{value:e,oldValue:o,modifiers:{lazy:t,trim:i,number:r}},l){if(s[Tt]=is(l),s.composing)return;const a=(r||s.type==="number")&&!/^0\d/.test(s.value)?kn(s.value):s.value,u=e??"";a!==u&&(document.activeElement===s&&s.type!=="range"&&(t&&e===o||i&&s.value.trim()===u)||(s.value=u))}},Ne={deep:!0,created(s,e,o){s[Tt]=is(o),$t(s,"change",()=>{const t=s._modelValue,i=Rs(s),r=s.checked,l=s[Tt];if(Te(t)){const a=Po(t,i),u=a!==-1;if(r&&!u)l(t.concat(i));else if(!r&&u){const p=[...t];p.splice(a,1),l(p)}}else if(As(t)){const a=new Set(t);r?a.add(i):a.delete(i),l(a)}else l(Wi(s,r))})},mounted:_l,beforeUpdate(s,e,o){s[Tt]=is(o),_l(s,e,o)}};function _l(s,{value:e,oldValue:o},t){s._modelValue=e;let i;if(Te(e))i=Po(e,t.props.value)>-1;else if(As(e))i=e.has(t.props.value);else{if(e===o)return;i=vs(e,Wi(s,!0))}s.checked!==i&&(s.checked=i)}const gs={created(s,{value:e},o){s.checked=vs(e,o.props.value),s[Tt]=is(o),$t(s,"change",()=>{s[Tt](Rs(s))})},beforeUpdate(s,{value:e,oldValue:o},t){s[Tt]=is(t),e!==o&&(s.checked=vs(e,t.props.value))}},Ze={deep:!0,created(s,{value:e,modifiers:{number:o}},t){const i=As(e);$t(s,"change",()=>{const r=Array.prototype.filter.call(s.options,l=>l.selected).map(l=>o?kn(Rs(l)):Rs(l));s[Tt](s.multiple?i?new Set(r):r:r[0]),s._assigning=!0,mt(()=>{s._assigning=!1})}),s[Tt]=is(t)},mounted(s,{value:e}){xl(s,e)},beforeUpdate(s,e,o){s[Tt]=is(o)},updated(s,{value:e}){s._assigning||xl(s,e)}};function xl(s,e){const o=s.multiple,t=Te(e);if(!(o&&!t&&!As(e))){for(let i=0,r=s.options.length;i<r;i++){const l=s.options[i],a=Rs(l);if(o)if(t){const u=typeof a;u==="string"||u==="number"?l.selected=e.some(p=>String(p)===String(a)):l.selected=Po(e,a)>-1}else l.selected=e.has(a);else if(vs(Rs(l),e)){s.selectedIndex!==i&&(s.selectedIndex=i);return}}!o&&s.selectedIndex!==-1&&(s.selectedIndex=-1)}}function Rs(s){return"_value"in s?s._value:s.value}function Wi(s,e){const o=e?"_trueValue":"_falseValue";return o in s?s[o]:e}const Lc={created(s,e,o){pn(s,e,o,null,"created")},mounted(s,e,o){pn(s,e,o,null,"mounted")},beforeUpdate(s,e,o,t){pn(s,e,o,t,"beforeUpdate")},updated(s,e,o,t){pn(s,e,o,t,"updated")}};function Oc(s,e){switch(s){case"SELECT":return Ze;case"TEXTAREA":return he;default:switch(e){case"checkbox":return Ne;case"radio":return gs;default:return he}}}function pn(s,e,o,t,i){const l=Oc(s.tagName,o.props&&o.props.type)[i];l&&l(s,e,o,t)}const Fc=["ctrl","shift","alt","meta"],Nc={stop:s=>s.stopPropagation(),prevent:s=>s.preventDefault(),self:s=>s.target!==s.currentTarget,ctrl:s=>!s.ctrlKey,shift:s=>!s.shiftKey,alt:s=>!s.altKey,meta:s=>!s.metaKey,left:s=>"button"in s&&s.button!==0,middle:s=>"button"in s&&s.button!==1,right:s=>"button"in s&&s.button!==2,exact:(s,e)=>Fc.some(o=>s[`${o}Key`]&&!e.includes(o))},ze=(s,e)=>{const o=s._withMods||(s._withMods={}),t=e.join(".");return o[t]||(o[t]=(i,...r)=>{for(let l=0;l<e.length;l++){const a=Nc[e[l]];if(a&&a(i,e))return}return s(i,...r)})},Vc={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},ve=(s,e)=>{const o=s._withKeys||(s._withKeys={}),t=e.join(".");return o[t]||(o[t]=i=>{if(!("key"in i))return;const r=as(i.key);if(e.some(l=>l===r||Vc[l]===r))return s(i)})},jc=vt({patchProp:Mc},hc);let Cl;function Bc(){return Cl||(Cl=jr(jc))}const Kc=(...s)=>{const e=Bc().createApp(...s),{mount:o}=e;return e.mount=t=>{const i=Hc(t);if(!i)return;const r=e._component;!Me(r)&&!r.render&&!r.template&&(r.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const l=o(i,!1,Wc(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),l},e};function Wc(s){if(s instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&s instanceof MathMLElement)return"mathml"}function Hc(s){return nt(s)?document.querySelector(s):s}const tt={DISCONNECTED:"disconnected",CONNECTING:"connecting",CONNECTED:"connected",READY:"ready",ERROR:"error",RECONNECTING:"reconnecting"};class qc{constructor(){this.connections=new Map,this.callbacks=new Map,this.connectionStates=new Map,this.reconnectAttempts=new Map,this.healthCheckIntervals=new Map,this.baseUrl=this.getWebSocketUrl(),this.maxReconnectAttempts=5,this.reconnectDelay=1e3}getWebSocketUrl(){const e=window.location.protocol==="https:"?"wss:":"ws:",o=window.location.hostname,t=window.location.port;return`${e}//${o}:${t}/api/terminal/ws/simple`}setConnectionState(e,o){const t=this.connectionStates.get(e);switch(this.connectionStates.set(e,o),console.log(`Terminal ${e}: ${t} -> ${o}`),this.triggerCallback(e,"onStatusChange",o),o){case tt.CONNECTED:this.startHealthCheck(e);break;case tt.READY:this.reconnectAttempts.set(e,0);break;case tt.DISCONNECTED:case tt.ERROR:this.stopHealthCheck(e);break}}getConnectionState(e){return this.connectionStates.get(e)||tt.DISCONNECTED}startHealthCheck(e){this.stopHealthCheck(e);const o=setInterval(()=>{this.isConnected(e)&&this.sendPing(e)},3e4);this.healthCheckIntervals.set(e,o)}stopHealthCheck(e){const o=this.healthCheckIntervals.get(e);o&&(clearInterval(o),this.healthCheckIntervals.delete(e))}sendPing(e){const o=this.connections.get(e);if(o&&o.readyState===WebSocket.OPEN)try{o.send(JSON.stringify({type:"ping"}))}catch(t){console.error("Failed to send ping:",t),this.setConnectionState(e,tt.ERROR)}}async createSession(){try{const o=await fetch("/api/terminal/simple/sessions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({shell:"/bin/bash",environment:{},working_directory:"/home/user"})});if(!o.ok)throw new Error(`Failed to create session: ${o.statusText}`);return(await o.json()).session_id}catch(e){throw console.error("Error creating terminal session:",e),e}}async connect(e,o={}){if(this.connections.has(e)){console.warn(`Already connected to session ${e}`);return}this.setConnectionState(e,tt.CONNECTING),this.callbacks.set(e,o);try{const t=`${this.baseUrl}/${e}`,i=new WebSocket(t);this.connections.set(e,i),i.onopen=()=>{console.log(`WebSocket opened for session ${e}`),this.setConnectionState(e,tt.CONNECTED),setTimeout(()=>{this.getConnectionState(e)===tt.CONNECTED&&(console.log(`Terminal ${e}: Auto-setting to READY after connection`),this.setConnectionState(e,tt.READY))},300)},i.onmessage=r=>{this.handleMessage(e,r.data)},i.onclose=r=>{console.log(`WebSocket closed for session ${e}:`,r.code,r.reason),this.cleanupSession(e),r.code!==1e3&&this.reconnectAttempts.get(e,0)<this.maxReconnectAttempts?this.attemptReconnect(e,o):this.setConnectionState(e,tt.DISCONNECTED)},i.onerror=r=>{console.error(`Terminal session ${e} error:`,r),this.setConnectionState(e,tt.ERROR),this.triggerCallback(e,"onError","WebSocket connection error")}}catch(t){throw console.error(`Failed to connect to terminal session ${e}:`,t),this.setConnectionState(e,tt.ERROR),this.triggerCallback(e,"onError",t.message),t}}async attemptReconnect(e,o){const t=this.reconnectAttempts.get(e)||0;this.reconnectAttempts.set(e,t+1);const i=this.reconnectDelay*Math.pow(2,t);console.log(`Attempting reconnection ${t+1}/${this.maxReconnectAttempts} for session ${e} in ${i}ms`),this.setConnectionState(e,tt.RECONNECTING),setTimeout(async()=>{try{await this.connect(e,o)}catch(r){console.error(`Reconnection attempt ${t+1} failed:`,r),t+1>=this.maxReconnectAttempts&&this.setConnectionState(e,tt.ERROR)}},i)}cleanupSession(e){this.connections.delete(e),this.stopHealthCheck(e)}handleMessage(e,o){try{const t=JSON.parse(o);switch(t.type){case"output":this.triggerCallback(e,"onOutput",{content:t.content||t.data,stream:t.stream||t.metadata?.stream||"stdout"});break;case"prompt_change":this.triggerCallback(e,"onPromptChange",t.prompt);break;case"status":const i=t.status;i&&this.setConnectionState(e,i);break;case"error":this.setConnectionState(e,tt.ERROR),this.triggerCallback(e,"onError",t.error||t.content);break;case"exit":this.triggerCallback(e,"onOutput",{content:`Process exited with code ${t.code}`,stream:"system"});break;case"connection":const r=t.status||"connected";r==="connected"?(this.setConnectionState(e,tt.CONNECTED),setTimeout(()=>{this.getConnectionState(e)===tt.CONNECTED&&(console.log(`Terminal ${e}: Setting to READY state`),this.setConnectionState(e,tt.READY))},200)):this.setConnectionState(e,r);break;case"pong":console.log(`Health check pong received from ${e}`),this.getConnectionState(e)!==tt.READY&&this.setConnectionState(e,tt.READY);break;default:console.warn(`Unknown message type: ${t.type}`,t)}}catch(t){console.error("Failed to parse terminal message:",t,o),this.triggerCallback(e,"onOutput",{content:o,stream:"stdout"})}}sendInput(e,o){const t=this.connections.get(e);if(!t||t.readyState!==WebSocket.OPEN)return console.error(`No active connection for session ${e}`),!1;try{const i=JSON.stringify({type:"input",text:o+`
`});return t.send(i),!0}catch(i){return console.error("Failed to send input:",i),this.triggerCallback(e,"onError","Failed to send input"),!1}}sendSignal(e,o){const t=this.connections.get(e);if(!t||t.readyState!==WebSocket.OPEN)return console.error(`No active connection for session ${e}`),!1;try{const i=JSON.stringify({type:"signal",signal:o});return t.send(i),!0}catch(i){return console.error("Failed to send signal:",i),!1}}resize(e,o,t){const i=this.connections.get(e);if(!i||i.readyState!==WebSocket.OPEN)return!1;try{const r=JSON.stringify({type:"resize",rows:o,cols:t});return i.send(r),!0}catch(r){return console.error("Failed to resize terminal:",r),!1}}disconnect(e){const o=this.connections.get(e);if(o){try{o.close(1e3,"Client disconnect")}catch(t){console.error("Error closing WebSocket:",t)}this.connections.delete(e),this.callbacks.delete(e)}}async closeSession(e){this.disconnect(e);try{const t=await fetch(`/api/terminal/sessions/${e}`,{method:"DELETE"});t.ok||console.warn(`Failed to close session on server: ${t.statusText}`)}catch(o){console.error("Error closing terminal session:",o)}}async getSessions(){try{const o=await fetch("/api/terminal/simple/sessions");if(!o.ok)throw new Error(`Failed to get sessions: ${o.statusText}`);return await o.json()}catch(e){return console.error("Error getting sessions:",e),[]}}async executeCommand(e,o={}){try{const i=await fetch("/api/terminal/command",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({command:e,timeout:o.timeout||3e4,working_directory:o.cwd,environment:o.env||{}})});if(!i.ok)throw new Error(`Command execution failed: ${i.statusText}`);return await i.json()}catch(t){throw console.error("Error executing command:",t),t}}async getSessionInfo(e){try{const t=await fetch(`/api/terminal/sessions/${e}`);if(!t.ok)throw new Error(`Failed to get session info: ${t.statusText}`);return await t.json()}catch(o){throw console.error("Error getting session info:",o),o}}triggerCallback(e,o,t){const i=this.callbacks.get(e);if(i&&typeof i[o]=="function")try{i[o](t)}catch(r){console.error(`Error in ${o} callback:`,r)}}isConnected(e){const o=this.connections.get(e);return o&&o.readyState===WebSocket.OPEN}cleanup(){for(const[e,o]of this.connections.entries())try{o.close(1e3,"Service cleanup")}catch(t){console.error(`Error closing connection ${e}:`,t)}this.connections.clear(),this.callbacks.clear()}}const at=new qc;function Hi(){const s=b(!1),e=rs(new Map),o=b("disconnected");return{sendInput:at.sendInput.bind(at),sendSignal:at.sendSignal.bind(at),resize:at.resize.bind(at),connect:at.connect.bind(at),disconnect:at.disconnect.bind(at),closeSession:at.closeSession.bind(at),isConnected:at.isConnected.bind(at),sessions:e,connectionStatus:o,async createSession(){const t=await at.createSession();return e.set(t,{id:t,status:"created",connected:!1}),t},async connect(t,i={}){const r={...i,onStatusChange:l=>{o.value=l;const a=e.get(t);a&&(a.status=l,a.connected=l==="connected"),i.onStatusChange&&i.onStatusChange(l)}};await at.connect(t,r),s.value=!0},disconnect(t){at.disconnect(t);const i=e.get(t);i&&(i.connected=!1,i.status="disconnected"),Array.from(e.values()).some(l=>l.connected)||(s.value=!1,o.value="disconnected")},async closeSession(t){await at.closeSession(t),e.delete(t),e.size===0&&(s.value=!1,o.value="disconnected")}}}const Xe=(s,e)=>{const o=s.__vccOpts||s;for(const[t,i]of e)o[t]=i;return o},Gc={name:"TerminalSidebar",props:{collapsed:{type:Boolean,default:!1}},emits:["update:collapsed","open-new-tab"],setup(s,{emit:e}){const o=Hi(),t=b([]),i=b(null),r=b(""),l=b("$ "),a=b(!1),u=b(!0),p=b("disconnected"),f=b(null),v=b(null),w=b(null),k=Se(()=>t.value.length>0&&i.value),h=Se(()=>t.value.find(M=>M.id===i.value)),P=Se(()=>k.value&&h.value?.status==="connected"),x=Se(()=>{switch(p.value){case"connected":return"Connected";case"connecting":return"Connecting...";case"disconnected":return"Disconnected";case"error":return"Connection Error";default:return"Unknown"}}),_=()=>{e("update:collapsed",!s.collapsed)},S=async()=>{try{const M=await o.createSession(),J={id:M,title:`Terminal ${t.value.length+1}`,status:"connecting",output:[],history:[],historyIndex:-1};t.value.push(J),i.value=M,p.value="connecting",await o.connect(M,{onOutput:Pe,onPromptChange:ee,onStatusChange:xe,onError:fe})}catch(M){console.error("Failed to create terminal session:",M),fe(M.message)}},L=M=>{i.value!==M&&(i.value&&o.disconnect(i.value),i.value=M,o.connect(M,{onOutput:Pe,onPromptChange:ee,onStatusChange:xe,onError:fe}))},A=async M=>{try{await o.closeSession(M),t.value=t.value.filter(J=>J.id!==M),i.value===M&&(t.value.length>0?(i.value=t.value[0].id,L(t.value[0].id)):(i.value=null,p.value="disconnected"))}catch(J){console.error("Failed to close session:",J)}},ae=()=>{k.value&&A(i.value)},se=()=>{k.value&&e("open-new-tab",{sessionId:i.value,session:h.value})},be=()=>{if(!r.value.trim()||!P.value)return;const M=r.value.trim();h.value&&(h.value.history.push(M),h.value.historyIndex=h.value.history.length),o.sendInput(i.value,M),r.value=""},z=M=>{if(!h.value)return;const J=h.value;switch(M.key){case"ArrowUp":M.preventDefault(),J.historyIndex>0&&(J.historyIndex--,r.value=J.history[J.historyIndex]);break;case"ArrowDown":M.preventDefault(),J.historyIndex<J.history.length-1?(J.historyIndex++,r.value=J.history[J.historyIndex]):J.historyIndex===J.history.length-1&&(J.historyIndex=J.history.length,r.value="");break;case"Tab":M.preventDefault();break;case"c":M.ctrlKey&&(M.preventDefault(),o.sendSignal(i.value,"SIGINT"));break}},q=()=>{h.value&&(h.value.output=[])},X=()=>{a.value=!a.value},Ee=()=>{w.value&&P.value&&w.value.focus()},Pe=M=>{h.value&&(h.value.output.push({type:"output",content:M.content,timestamp:new Date}),mt(()=>{v.value&&(v.value.scrollTop=v.value.scrollHeight)}))},ee=M=>{l.value=M},xe=M=>{h.value&&(h.value.status=M),p.value=M},fe=M=>{console.error("Terminal error:",M),p.value="error",h.value&&h.value.output.push({type:"error",content:`Error: ${M}`,timestamp:new Date})},Z=M=>{if(!M)return"";let J=M.content||M;return J=J.replace(/\x1b\[([0-9]{1,2}(;[0-9]{1,2})?)?[mGK]/g,"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),M.type==="error"?`<span class="error-text">${J}</span>`:M.type==="warning"?`<span class="warning-text">${J}</span>`:M.type==="success"?`<span class="success-text">${J}</span>`:J},O=()=>{setInterval(()=>{u.value=!u.value},500)};return it(()=>{O()}),ut(()=>{t.value.forEach(M=>{o.disconnect(M.id)})}),{sessions:t,activeSessionId:i,currentInput:r,currentPrompt:l,isFullscreen:a,showCursor:u,connectionStatus:p,terminalWindow:f,terminalOutput:v,terminalInput:w,hasActiveSession:k,activeSession:h,canInput:P,connectionStatusText:x,toggleSidebar:_,newTerminalSession:S,switchSession:L,closeSession:A,closeActiveSession:ae,openInNewTab:se,sendCommand:be,handleKeydown:z,clearTerminal:q,toggleFullscreen:X,focusInput:Ee,formatTerminalLine:Z}}},$c={key:0,class:"sidebar-content"},zc={class:"terminal-header"},Jc={class:"terminal-actions"},Yc=["disabled"],Qc=["disabled"],Zc={key:0,class:"session-tabs"},Xc=["onClick"],ed={class:"tab-title"},td=["onClick"],sd={class:"terminal-container"},nd={key:0,class:"no-session-message"},od={class:"terminal-toolbar"},ld={class:"session-info"},id={class:"session-title"},ad={class:"terminal-controls"},rd=["innerHTML"],cd={class:"terminal-prompt"},dd={class:"prompt-text"},ud=["disabled"],fd={class:"terminal-status"},md={class:"session-count"};function pd(s,e,o,t,i,r){return c(),d("div",{class:G(["terminal-sidebar",{collapsed:o.collapsed}])},[n("button",{class:"toggle-sidebar",onClick:e[0]||(e[0]=(...l)=>t.toggleSidebar&&t.toggleSidebar(...l)),"aria-label":"{{ collapsed ? '' : '' }}"},m(o.collapsed?"":""),1),o.collapsed?C("",!0):(c(),d("div",$c,[n("div",zc,[e[15]||(e[15]=n("h3",null,"Terminal",-1)),n("div",Jc,[n("button",{class:"action-button",onClick:e[1]||(e[1]=(...l)=>t.openInNewTab&&t.openInNewTab(...l)),title:"Open in New Tab",disabled:!t.hasActiveSession},"  ",8,Yc),n("button",{class:"action-button",onClick:e[2]||(e[2]=(...l)=>t.newTerminalSession&&t.newTerminalSession(...l)),title:"New Terminal Session"},"  "),n("button",{class:"action-button danger",onClick:e[3]||(e[3]=(...l)=>t.closeActiveSession&&t.closeActiveSession(...l)),title:"Close Active Session",disabled:!t.hasActiveSession},"  ",8,Qc)])]),t.sessions.length>0?(c(),d("div",Zc,[(c(!0),d(pe,null,ye(t.sessions,l=>(c(),d("div",{key:l.id,class:G(["session-tab",{active:t.activeSessionId===l.id}]),onClick:a=>t.switchSession(l.id),tabindex:"0",onKeyup:[e[4]||(e[4]=ve(a=>a.target.click(),["enter"])),e[5]||(e[5]=ve(a=>a.target.click(),["space"]))]},[n("span",ed,m(l.title),1),n("button",{class:"close-tab",onClick:ze(a=>t.closeSession(l.id),["stop"]),"aria-label":"Action button"},"  ",8,td)],42,Xc))),128))])):C("",!0),n("div",sd,[t.hasActiveSession?(c(),d("div",{key:1,class:G(["terminal-window",{fullscreen:t.isFullscreen}]),ref:"terminalWindow"},[n("div",od,[n("div",ld,[n("span",id,m(t.activeSession?.title),1),n("span",{class:G(["session-status",t.activeSession?.status])},m(t.activeSession?.status),3)]),n("div",ad,[n("button",{class:"control-btn",onClick:e[7]||(e[7]=(...l)=>t.toggleFullscreen&&t.toggleFullscreen(...l)),title:"Toggle Fullscreen"},m(t.isFullscreen?"":""),1),n("button",{class:"control-btn",onClick:e[8]||(e[8]=(...l)=>t.clearTerminal&&t.clearTerminal(...l)),title:"Clear Terminal"},"  ")])]),n("div",{class:"terminal-output",ref:"terminalOutput",onClick:e[12]||(e[12]=(...l)=>t.focusInput&&t.focusInput(...l)),tabindex:"0",onKeyup:[e[13]||(e[13]=ve(l=>l.target.click(),["enter"])),e[14]||(e[14]=ve(l=>l.target.click(),["space"]))]},[(c(!0),d(pe,null,ye(t.activeSession?.output||[],(l,a)=>(c(),d("div",{key:a,class:"terminal-line",innerHTML:t.formatTerminalLine(l)},null,8,rd))),128)),n("div",cd,[n("span",dd,m(t.currentPrompt),1),B(n("input",{ref:"terminalInput","onUpdate:modelValue":e[9]||(e[9]=l=>t.currentInput=l),onKeydown:e[10]||(e[10]=(...l)=>t.handleKeydown&&t.handleKeydown(...l)),onKeyup:e[11]||(e[11]=ve((...l)=>t.sendCommand&&t.sendCommand(...l),["enter"])),class:"terminal-input",disabled:!t.canInput,autocomplete:"off",spellcheck:"false"},null,40,ud),[[he,t.currentInput]]),n("span",{class:G(["cursor",{blink:t.showCursor}])},"",2)])],544)],2)):(c(),d("div",nd,[e[16]||(e[16]=n("p",null,"No active terminal session",-1)),n("button",{class:"start-button",onClick:e[6]||(e[6]=(...l)=>t.newTerminalSession&&t.newTerminalSession(...l)),"aria-label":"Start terminal"}," Start Terminal ")]))]),n("div",fd,[n("div",{class:G(["connection-status",t.connectionStatus])},[e[17]||(e[17]=n("div",{class:"status-indicator"},null,-1)),n("span",null,m(t.connectionStatusText),1)],2),n("div",md,m(t.sessions.length)+" session"+m(t.sessions.length!==1?"s":""),1)])]))],2)}const gd=Xe(Gc,[["render",pd],["__scopeId","data-v-4c5c2e60"]]);/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const _s=typeof document<"u";function qi(s){return typeof s=="object"||"displayName"in s||"props"in s||"__vccOpts"in s}function vd(s){return s.__esModule||s[Symbol.toStringTag]==="Module"||s.default&&qi(s.default)}const je=Object.assign;function io(s,e){const o={};for(const t in e){const i=e[t];o[t]=Dt(i)?i.map(s):s(i)}return o}const zs=()=>{},Dt=Array.isArray,Gi=/#/g,hd=/&/g,bd=/\//g,yd=/=/g,wd=/\?/g,$i=/\+/g,kd=/%5B/g,_d=/%5D/g,zi=/%5E/g,xd=/%60/g,Ji=/%7B/g,Cd=/%7C/g,Yi=/%7D/g,Sd=/%20/g;function Wo(s){return encodeURI(""+s).replace(Cd,"|").replace(kd,"[").replace(_d,"]")}function Td(s){return Wo(s).replace(Ji,"{").replace(Yi,"}").replace(zi,"^")}function _o(s){return Wo(s).replace($i,"%2B").replace(Sd,"+").replace(Gi,"%23").replace(hd,"%26").replace(xd,"`").replace(Ji,"{").replace(Yi,"}").replace(zi,"^")}function Ed(s){return _o(s).replace(yd,"%3D")}function Id(s){return Wo(s).replace(Gi,"%23").replace(wd,"%3F")}function Pd(s){return s==null?"":Id(s).replace(bd,"%2F")}function tn(s){try{return decodeURIComponent(""+s)}catch{}return""+s}const Rd=/\/$/,Dd=s=>s.replace(Rd,"");function ao(s,e,o="/"){let t,i={},r="",l="";const a=e.indexOf("#");let u=e.indexOf("?");return a<u&&a>=0&&(u=-1),u>-1&&(t=e.slice(0,u),r=e.slice(u+1,a>-1?a:e.length),i=s(r)),a>-1&&(t=t||e.slice(0,a),l=e.slice(a,e.length)),t=Ld(t??e,o),{fullPath:t+(r&&"?")+r+l,path:t,query:i,hash:tn(l)}}function Md(s,e){const o=e.query?s(e.query):"";return e.path+(o&&"?")+o+(e.hash||"")}function Sl(s,e){return!e||!s.toLowerCase().startsWith(e.toLowerCase())?s:s.slice(e.length)||"/"}function Ad(s,e,o){const t=e.matched.length-1,i=o.matched.length-1;return t>-1&&t===i&&Ds(e.matched[t],o.matched[i])&&Qi(e.params,o.params)&&s(e.query)===s(o.query)&&e.hash===o.hash}function Ds(s,e){return(s.aliasOf||s)===(e.aliasOf||e)}function Qi(s,e){if(Object.keys(s).length!==Object.keys(e).length)return!1;for(const o in s)if(!Ud(s[o],e[o]))return!1;return!0}function Ud(s,e){return Dt(s)?Tl(s,e):Dt(e)?Tl(e,s):s===e}function Tl(s,e){return Dt(e)?s.length===e.length&&s.every((o,t)=>o===e[t]):s.length===1&&s[0]===e}function Ld(s,e){if(s.startsWith("/"))return s;if(!s)return e;const o=e.split("/"),t=s.split("/"),i=t[t.length-1];(i===".."||i===".")&&t.push("");let r=o.length-1,l,a;for(l=0;l<t.length;l++)if(a=t[l],a!==".")if(a==="..")r>1&&r--;else break;return o.slice(0,r).join("/")+"/"+t.slice(l).join("/")}const Zt={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var sn;(function(s){s.pop="pop",s.push="push"})(sn||(sn={}));var Js;(function(s){s.back="back",s.forward="forward",s.unknown=""})(Js||(Js={}));function Od(s){if(!s)if(_s){const e=document.querySelector("base");s=e&&e.getAttribute("href")||"/",s=s.replace(/^\w+:\/\/[^\/]+/,"")}else s="/";return s[0]!=="/"&&s[0]!=="#"&&(s="/"+s),Dd(s)}const Fd=/^[^#]+#/;function Nd(s,e){return s.replace(Fd,"#")+e}function Vd(s,e){const o=document.documentElement.getBoundingClientRect(),t=s.getBoundingClientRect();return{behavior:e.behavior,left:t.left-o.left-(e.left||0),top:t.top-o.top-(e.top||0)}}const Vn=()=>({left:window.scrollX,top:window.scrollY});function jd(s){let e;if("el"in s){const o=s.el,t=typeof o=="string"&&o.startsWith("#"),i=typeof o=="string"?t?document.getElementById(o.slice(1)):document.querySelector(o):o;if(!i)return;e=Vd(i,s)}else e=s;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function El(s,e){return(history.state?history.state.position-e:-1)+s}const xo=new Map;function Bd(s,e){xo.set(s,e)}function Kd(s){const e=xo.get(s);return xo.delete(s),e}let Wd=()=>location.protocol+"//"+location.host;function Zi(s,e){const{pathname:o,search:t,hash:i}=e,r=s.indexOf("#");if(r>-1){let a=i.includes(s.slice(r))?s.slice(r).length:1,u=i.slice(a);return u[0]!=="/"&&(u="/"+u),Sl(u,"")}return Sl(o,s)+t+i}function Hd(s,e,o,t){let i=[],r=[],l=null;const a=({state:w})=>{const k=Zi(s,location),h=o.value,P=e.value;let x=0;if(w){if(o.value=k,e.value=w,l&&l===h){l=null;return}x=P?w.position-P.position:0}else t(k);i.forEach(_=>{_(o.value,h,{delta:x,type:sn.pop,direction:x?x>0?Js.forward:Js.back:Js.unknown})})};function u(){l=o.value}function p(w){i.push(w);const k=()=>{const h=i.indexOf(w);h>-1&&i.splice(h,1)};return r.push(k),k}function f(){const{history:w}=window;w.state&&w.replaceState(je({},w.state,{scroll:Vn()}),"")}function v(){for(const w of r)w();r=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",f)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",f,{passive:!0}),{pauseListeners:u,listen:p,destroy:v}}function Il(s,e,o,t=!1,i=!1){return{back:s,current:e,forward:o,replaced:t,position:window.history.length,scroll:i?Vn():null}}function qd(s){const{history:e,location:o}=window,t={value:Zi(s,o)},i={value:e.state};i.value||r(t.value,{back:null,current:t.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function r(u,p,f){const v=s.indexOf("#"),w=v>-1?(o.host&&document.querySelector("base")?s:s.slice(v))+u:Wd()+s+u;try{e[f?"replaceState":"pushState"](p,"",w),i.value=p}catch(k){console.error(k),o[f?"replace":"assign"](w)}}function l(u,p){const f=je({},e.state,Il(i.value.back,u,i.value.forward,!0),p,{position:i.value.position});r(u,f,!0),t.value=u}function a(u,p){const f=je({},i.value,e.state,{forward:u,scroll:Vn()});r(f.current,f,!0);const v=je({},Il(t.value,u,null),{position:f.position+1},p);r(u,v,!1),t.value=u}return{location:t,state:i,push:a,replace:l}}function Gd(s){s=Od(s);const e=qd(s),o=Hd(s,e.state,e.location,e.replace);function t(r,l=!0){l||o.pauseListeners(),history.go(r)}const i=je({location:"",base:s,go:t,createHref:Nd.bind(null,s)},e,o);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function $d(s){return typeof s=="string"||s&&typeof s=="object"}function Xi(s){return typeof s=="string"||typeof s=="symbol"}const ea=Symbol("");var Pl;(function(s){s[s.aborted=4]="aborted",s[s.cancelled=8]="cancelled",s[s.duplicated=16]="duplicated"})(Pl||(Pl={}));function Ms(s,e){return je(new Error,{type:s,[ea]:!0},e)}function Wt(s,e){return s instanceof Error&&ea in s&&(e==null||!!(s.type&e))}const Rl="[^/]+?",zd={sensitive:!1,strict:!1,start:!0,end:!0},Jd=/[.+*?^${}()[\]/\\]/g;function Yd(s,e){const o=je({},zd,e),t=[];let i=o.start?"^":"";const r=[];for(const p of s){const f=p.length?[]:[90];o.strict&&!p.length&&(i+="/");for(let v=0;v<p.length;v++){const w=p[v];let k=40+(o.sensitive?.25:0);if(w.type===0)v||(i+="/"),i+=w.value.replace(Jd,"\\$&"),k+=40;else if(w.type===1){const{value:h,repeatable:P,optional:x,regexp:_}=w;r.push({name:h,repeatable:P,optional:x});const S=_||Rl;if(S!==Rl){k+=10;try{new RegExp(`(${S})`)}catch(A){throw new Error(`Invalid custom RegExp for param "${h}" (${S}): `+A.message)}}let L=P?`((?:${S})(?:/(?:${S}))*)`:`(${S})`;v||(L=x&&p.length<2?`(?:/${L})`:"/"+L),x&&(L+="?"),i+=L,k+=20,x&&(k+=-8),P&&(k+=-20),S===".*"&&(k+=-50)}f.push(k)}t.push(f)}if(o.strict&&o.end){const p=t.length-1;t[p][t[p].length-1]+=.7000000000000001}o.strict||(i+="/?"),o.end?i+="$":o.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const l=new RegExp(i,o.sensitive?"":"i");function a(p){const f=p.match(l),v={};if(!f)return null;for(let w=1;w<f.length;w++){const k=f[w]||"",h=r[w-1];v[h.name]=k&&h.repeatable?k.split("/"):k}return v}function u(p){let f="",v=!1;for(const w of s){(!v||!f.endsWith("/"))&&(f+="/"),v=!1;for(const k of w)if(k.type===0)f+=k.value;else if(k.type===1){const{value:h,repeatable:P,optional:x}=k,_=h in p?p[h]:"";if(Dt(_)&&!P)throw new Error(`Provided param "${h}" is an array but it is not repeatable (* or + modifiers)`);const S=Dt(_)?_.join("/"):_;if(!S)if(x)w.length<2&&(f.endsWith("/")?f=f.slice(0,-1):v=!0);else throw new Error(`Missing required param "${h}"`);f+=S}}return f||"/"}return{re:l,score:t,keys:r,parse:a,stringify:u}}function Qd(s,e){let o=0;for(;o<s.length&&o<e.length;){const t=e[o]-s[o];if(t)return t;o++}return s.length<e.length?s.length===1&&s[0]===80?-1:1:s.length>e.length?e.length===1&&e[0]===80?1:-1:0}function ta(s,e){let o=0;const t=s.score,i=e.score;for(;o<t.length&&o<i.length;){const r=Qd(t[o],i[o]);if(r)return r;o++}if(Math.abs(i.length-t.length)===1){if(Dl(t))return 1;if(Dl(i))return-1}return i.length-t.length}function Dl(s){const e=s[s.length-1];return s.length>0&&e[e.length-1]<0}const Zd={type:0,value:""},Xd=/[a-zA-Z0-9_]/;function eu(s){if(!s)return[[]];if(s==="/")return[[Zd]];if(!s.startsWith("/"))throw new Error(`Invalid path "${s}"`);function e(k){throw new Error(`ERR (${o})/"${p}": ${k}`)}let o=0,t=o;const i=[];let r;function l(){r&&i.push(r),r=[]}let a=0,u,p="",f="";function v(){p&&(o===0?r.push({type:0,value:p}):o===1||o===2||o===3?(r.length>1&&(u==="*"||u==="+")&&e(`A repeatable param (${p}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:p,regexp:f,repeatable:u==="*"||u==="+",optional:u==="*"||u==="?"})):e("Invalid state to consume buffer"),p="")}function w(){p+=u}for(;a<s.length;){if(u=s[a++],u==="\\"&&o!==2){t=o,o=4;continue}switch(o){case 0:u==="/"?(p&&v(),l()):u===":"?(v(),o=1):w();break;case 4:w(),o=t;break;case 1:u==="("?o=2:Xd.test(u)?w():(v(),o=0,u!=="*"&&u!=="?"&&u!=="+"&&a--);break;case 2:u===")"?f[f.length-1]=="\\"?f=f.slice(0,-1)+u:o=3:f+=u;break;case 3:v(),o=0,u!=="*"&&u!=="?"&&u!=="+"&&a--,f="";break;default:e("Unknown state");break}}return o===2&&e(`Unfinished custom RegExp for param "${p}"`),v(),l(),i}function tu(s,e,o){const t=Yd(eu(s.path),o),i=je(t,{record:s,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function su(s,e){const o=[],t=new Map;e=Ll({strict:!1,end:!0,sensitive:!1},e);function i(v){return t.get(v)}function r(v,w,k){const h=!k,P=Al(v);P.aliasOf=k&&k.record;const x=Ll(e,v),_=[P];if("alias"in v){const A=typeof v.alias=="string"?[v.alias]:v.alias;for(const ae of A)_.push(Al(je({},P,{components:k?k.record.components:P.components,path:ae,aliasOf:k?k.record:P})))}let S,L;for(const A of _){const{path:ae}=A;if(w&&ae[0]!=="/"){const se=w.record.path,be=se[se.length-1]==="/"?"":"/";A.path=w.record.path+(ae&&be+ae)}if(S=tu(A,w,x),k?k.alias.push(S):(L=L||S,L!==S&&L.alias.push(S),h&&v.name&&!Ul(S)&&l(v.name)),sa(S)&&u(S),P.children){const se=P.children;for(let be=0;be<se.length;be++)r(se[be],S,k&&k.children[be])}k=k||S}return L?()=>{l(L)}:zs}function l(v){if(Xi(v)){const w=t.get(v);w&&(t.delete(v),o.splice(o.indexOf(w),1),w.children.forEach(l),w.alias.forEach(l))}else{const w=o.indexOf(v);w>-1&&(o.splice(w,1),v.record.name&&t.delete(v.record.name),v.children.forEach(l),v.alias.forEach(l))}}function a(){return o}function u(v){const w=lu(v,o);o.splice(w,0,v),v.record.name&&!Ul(v)&&t.set(v.record.name,v)}function p(v,w){let k,h={},P,x;if("name"in v&&v.name){if(k=t.get(v.name),!k)throw Ms(1,{location:v});x=k.record.name,h=je(Ml(w.params,k.keys.filter(L=>!L.optional).concat(k.parent?k.parent.keys.filter(L=>L.optional):[]).map(L=>L.name)),v.params&&Ml(v.params,k.keys.map(L=>L.name))),P=k.stringify(h)}else if(v.path!=null)P=v.path,k=o.find(L=>L.re.test(P)),k&&(h=k.parse(P),x=k.record.name);else{if(k=w.name?t.get(w.name):o.find(L=>L.re.test(w.path)),!k)throw Ms(1,{location:v,currentLocation:w});x=k.record.name,h=je({},w.params,v.params),P=k.stringify(h)}const _=[];let S=k;for(;S;)_.unshift(S.record),S=S.parent;return{name:x,path:P,params:h,matched:_,meta:ou(_)}}s.forEach(v=>r(v));function f(){o.length=0,t.clear()}return{addRoute:r,resolve:p,removeRoute:l,clearRoutes:f,getRoutes:a,getRecordMatcher:i}}function Ml(s,e){const o={};for(const t of e)t in s&&(o[t]=s[t]);return o}function Al(s){const e={path:s.path,redirect:s.redirect,name:s.name,meta:s.meta||{},aliasOf:s.aliasOf,beforeEnter:s.beforeEnter,props:nu(s),children:s.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in s?s.components||null:s.component&&{default:s.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function nu(s){const e={},o=s.props||!1;if("component"in s)e.default=o;else for(const t in s.components)e[t]=typeof o=="object"?o[t]:o;return e}function Ul(s){for(;s;){if(s.record.aliasOf)return!0;s=s.parent}return!1}function ou(s){return s.reduce((e,o)=>je(e,o.meta),{})}function Ll(s,e){const o={};for(const t in s)o[t]=t in e?e[t]:s[t];return o}function lu(s,e){let o=0,t=e.length;for(;o!==t;){const r=o+t>>1;ta(s,e[r])<0?t=r:o=r+1}const i=iu(s);return i&&(t=e.lastIndexOf(i,t-1)),t}function iu(s){let e=s;for(;e=e.parent;)if(sa(e)&&ta(s,e)===0)return e}function sa({record:s}){return!!(s.name||s.components&&Object.keys(s.components).length||s.redirect)}function au(s){const e={};if(s===""||s==="?")return e;const t=(s[0]==="?"?s.slice(1):s).split("&");for(let i=0;i<t.length;++i){const r=t[i].replace($i," "),l=r.indexOf("="),a=tn(l<0?r:r.slice(0,l)),u=l<0?null:tn(r.slice(l+1));if(a in e){let p=e[a];Dt(p)||(p=e[a]=[p]),p.push(u)}else e[a]=u}return e}function Ol(s){let e="";for(let o in s){const t=s[o];if(o=Ed(o),t==null){t!==void 0&&(e+=(e.length?"&":"")+o);continue}(Dt(t)?t.map(r=>r&&_o(r)):[t&&_o(t)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+o,r!=null&&(e+="="+r))})}return e}function ru(s){const e={};for(const o in s){const t=s[o];t!==void 0&&(e[o]=Dt(t)?t.map(i=>i==null?null:""+i):t==null?t:""+t)}return e}const cu=Symbol(""),Fl=Symbol(""),jn=Symbol(""),Ho=Symbol(""),Co=Symbol("");function Fs(){let s=[];function e(t){return s.push(t),()=>{const i=s.indexOf(t);i>-1&&s.splice(i,1)}}function o(){s=[]}return{add:e,list:()=>s.slice(),reset:o}}function ss(s,e,o,t,i,r=l=>l()){const l=t&&(t.enterCallbacks[i]=t.enterCallbacks[i]||[]);return()=>new Promise((a,u)=>{const p=w=>{w===!1?u(Ms(4,{from:o,to:e})):w instanceof Error?u(w):$d(w)?u(Ms(2,{from:e,to:w})):(l&&t.enterCallbacks[i]===l&&typeof w=="function"&&l.push(w),a())},f=r(()=>s.call(t&&t.instances[i],e,o,p));let v=Promise.resolve(f);s.length<3&&(v=v.then(p)),v.catch(w=>u(w))})}function ro(s,e,o,t,i=r=>r()){const r=[];for(const l of s)for(const a in l.components){let u=l.components[a];if(!(e!=="beforeRouteEnter"&&!l.instances[a]))if(qi(u)){const f=(u.__vccOpts||u)[e];f&&r.push(ss(f,o,t,l,a,i))}else{let p=u();r.push(()=>p.then(f=>{if(!f)throw new Error(`Couldn't resolve component "${a}" at "${l.path}"`);const v=vd(f)?f.default:f;l.mods[a]=f,l.components[a]=v;const k=(v.__vccOpts||v)[e];return k&&ss(k,o,t,l,a,i)()}))}}return r}function Nl(s){const e=Rt(jn),o=Rt(Ho),t=Se(()=>{const u=Ts(s.to);return e.resolve(u)}),i=Se(()=>{const{matched:u}=t.value,{length:p}=u,f=u[p-1],v=o.matched;if(!f||!v.length)return-1;const w=v.findIndex(Ds.bind(null,f));if(w>-1)return w;const k=Vl(u[p-2]);return p>1&&Vl(f)===k&&v[v.length-1].path!==k?v.findIndex(Ds.bind(null,u[p-2])):w}),r=Se(()=>i.value>-1&&pu(o.params,t.value.params)),l=Se(()=>i.value>-1&&i.value===o.matched.length-1&&Qi(o.params,t.value.params));function a(u={}){if(mu(u)){const p=e[Ts(s.replace)?"replace":"push"](Ts(s.to)).catch(zs);return s.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>p),p}return Promise.resolve()}return{route:t,href:Se(()=>t.value.href),isActive:r,isExactActive:l,navigate:a}}function du(s){return s.length===1?s[0]:s}const uu=Vo({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Nl,setup(s,{slots:e}){const o=rs(Nl(s)),{options:t}=Rt(jn),i=Se(()=>({[jl(s.activeClass,t.linkActiveClass,"router-link-active")]:o.isActive,[jl(s.exactActiveClass,t.linkExactActiveClass,"router-link-exact-active")]:o.isExactActive}));return()=>{const r=e.default&&du(e.default(o));return s.custom?r:Bi("a",{"aria-current":o.isExactActive?s.ariaCurrentValue:null,href:o.href,onClick:o.navigate,class:i.value},r)}}}),fu=uu;function mu(s){if(!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)&&!s.defaultPrevented&&!(s.button!==void 0&&s.button!==0)){if(s.currentTarget&&s.currentTarget.getAttribute){const e=s.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return s.preventDefault&&s.preventDefault(),!0}}function pu(s,e){for(const o in e){const t=e[o],i=s[o];if(typeof t=="string"){if(t!==i)return!1}else if(!Dt(i)||i.length!==t.length||t.some((r,l)=>r!==i[l]))return!1}return!0}function Vl(s){return s?s.aliasOf?s.aliasOf.path:s.path:""}const jl=(s,e,o)=>s??e??o,gu=Vo({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(s,{attrs:e,slots:o}){const t=Rt(Co),i=Se(()=>s.route||t.value),r=Rt(Fl,0),l=Se(()=>{let p=Ts(r);const{matched:f}=i.value;let v;for(;(v=f[p])&&!v.components;)p++;return p}),a=Se(()=>i.value.matched[l.value]);hn(Fl,Se(()=>l.value+1)),hn(cu,a),hn(Co,i);const u=b();return yt(()=>[u.value,a.value,s.name],([p,f,v],[w,k,h])=>{f&&(f.instances[v]=p,k&&k!==f&&p&&p===w&&(f.leaveGuards.size||(f.leaveGuards=k.leaveGuards),f.updateGuards.size||(f.updateGuards=k.updateGuards))),p&&f&&(!k||!Ds(f,k)||!w)&&(f.enterCallbacks[v]||[]).forEach(P=>P(p))},{flush:"post"}),()=>{const p=i.value,f=s.name,v=a.value,w=v&&v.components[f];if(!w)return Bl(o.default,{Component:w,route:p});const k=v.props[f],h=k?k===!0?p.params:typeof k=="function"?k(p):k:null,x=Bi(w,je({},h,e,{onVnodeUnmounted:_=>{_.component.isUnmounted&&(v.instances[f]=null)},ref:u}));return Bl(o.default,{Component:x,route:p})||x}}});function Bl(s,e){if(!s)return null;const o=s(e);return o.length===1?o[0]:o}const vu=gu;function hu(s){const e=su(s.routes,s),o=s.parseQuery||au,t=s.stringifyQuery||Ol,i=s.history,r=Fs(),l=Fs(),a=Fs(),u=Xa(Zt);let p=Zt;_s&&s.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const f=io.bind(null,D=>""+D),v=io.bind(null,Pd),w=io.bind(null,tn);function k(D,ne){let le,ce;return Xi(D)?(le=e.getRecordMatcher(D),ce=ne):ce=D,e.addRoute(ce,le)}function h(D){const ne=e.getRecordMatcher(D);ne&&e.removeRoute(ne)}function P(){return e.getRoutes().map(D=>D.record)}function x(D){return!!e.getRecordMatcher(D)}function _(D,ne){if(ne=je({},ne||u.value),typeof D=="string"){const I=ao(o,D,ne.path),V=e.resolve({path:I.path},ne),j=i.createHref(I.fullPath);return je(I,V,{params:w(V.params),hash:tn(I.hash),redirectedFrom:void 0,href:j})}let le;if(D.path!=null)le=je({},D,{path:ao(o,D.path,ne.path).path});else{const I=je({},D.params);for(const V in I)I[V]==null&&delete I[V];le=je({},D,{params:v(I)}),ne.params=v(ne.params)}const ce=e.resolve(le,ne),Ae=D.hash||"";ce.params=f(w(ce.params));const g=Md(t,je({},D,{hash:Td(Ae),path:ce.path})),y=i.createHref(g);return je({fullPath:g,hash:Ae,query:t===Ol?ru(D.query):D.query||{}},ce,{redirectedFrom:void 0,href:y})}function S(D){return typeof D=="string"?ao(o,D,u.value.path):je({},D)}function L(D,ne){if(p!==D)return Ms(8,{from:ne,to:D})}function A(D){return be(D)}function ae(D){return A(je(S(D),{replace:!0}))}function se(D){const ne=D.matched[D.matched.length-1];if(ne&&ne.redirect){const{redirect:le}=ne;let ce=typeof le=="function"?le(D):le;return typeof ce=="string"&&(ce=ce.includes("?")||ce.includes("#")?ce=S(ce):{path:ce},ce.params={}),je({query:D.query,hash:D.hash,params:ce.path!=null?{}:D.params},ce)}}function be(D,ne){const le=p=_(D),ce=u.value,Ae=D.state,g=D.force,y=D.replace===!0,I=se(le);if(I)return be(je(S(I),{state:typeof I=="object"?je({},Ae,I.state):Ae,force:g,replace:y}),ne||le);const V=le;V.redirectedFrom=ne;let j;return!g&&Ad(t,ce,le)&&(j=Ms(16,{to:V,from:ce}),K(ce,ce,!0,!1)),(j?Promise.resolve(j):X(V,ce)).catch(H=>Wt(H)?Wt(H,2)?H:W(H):M(H,V,ce)).then(H=>{if(H){if(Wt(H,2))return be(je({replace:y},S(H.to),{state:typeof H.to=="object"?je({},Ae,H.to.state):Ae,force:g}),ne||V)}else H=Pe(V,ce,!0,y,Ae);return Ee(V,ce,H),H})}function z(D,ne){const le=L(D,ne);return le?Promise.reject(le):Promise.resolve()}function q(D){const ne=me.values().next().value;return ne&&typeof ne.runWithContext=="function"?ne.runWithContext(D):D()}function X(D,ne){let le;const[ce,Ae,g]=bu(D,ne);le=ro(ce.reverse(),"beforeRouteLeave",D,ne);for(const I of ce)I.leaveGuards.forEach(V=>{le.push(ss(V,D,ne))});const y=z.bind(null,D,ne);return le.push(y),re(le).then(()=>{le=[];for(const I of r.list())le.push(ss(I,D,ne));return le.push(y),re(le)}).then(()=>{le=ro(Ae,"beforeRouteUpdate",D,ne);for(const I of Ae)I.updateGuards.forEach(V=>{le.push(ss(V,D,ne))});return le.push(y),re(le)}).then(()=>{le=[];for(const I of g)if(I.beforeEnter)if(Dt(I.beforeEnter))for(const V of I.beforeEnter)le.push(ss(V,D,ne));else le.push(ss(I.beforeEnter,D,ne));return le.push(y),re(le)}).then(()=>(D.matched.forEach(I=>I.enterCallbacks={}),le=ro(g,"beforeRouteEnter",D,ne,q),le.push(y),re(le))).then(()=>{le=[];for(const I of l.list())le.push(ss(I,D,ne));return le.push(y),re(le)}).catch(I=>Wt(I,8)?I:Promise.reject(I))}function Ee(D,ne,le){a.list().forEach(ce=>q(()=>ce(D,ne,le)))}function Pe(D,ne,le,ce,Ae){const g=L(D,ne);if(g)return g;const y=ne===Zt,I=_s?history.state:{};le&&(ce||y?i.replace(D.fullPath,je({scroll:y&&I&&I.scroll},Ae)):i.push(D.fullPath,Ae)),u.value=D,K(D,ne,le,y),W()}let ee;function xe(){ee||(ee=i.listen((D,ne,le)=>{if(!Re.listening)return;const ce=_(D),Ae=se(ce);if(Ae){be(je(Ae,{replace:!0,force:!0}),ce).catch(zs);return}p=ce;const g=u.value;_s&&Bd(El(g.fullPath,le.delta),Vn()),X(ce,g).catch(y=>Wt(y,12)?y:Wt(y,2)?(be(je(S(y.to),{force:!0}),ce).then(I=>{Wt(I,20)&&!le.delta&&le.type===sn.pop&&i.go(-1,!1)}).catch(zs),Promise.reject()):(le.delta&&i.go(-le.delta,!1),M(y,ce,g))).then(y=>{y=y||Pe(ce,g,!1),y&&(le.delta&&!Wt(y,8)?i.go(-le.delta,!1):le.type===sn.pop&&Wt(y,20)&&i.go(-1,!1)),Ee(ce,g,y)}).catch(zs)}))}let fe=Fs(),Z=Fs(),O;function M(D,ne,le){W(D);const ce=Z.list();return ce.length?ce.forEach(Ae=>Ae(D,ne,le)):console.error(D),Promise.reject(D)}function J(){return O&&u.value!==Zt?Promise.resolve():new Promise((D,ne)=>{fe.add([D,ne])})}function W(D){return O||(O=!D,xe(),fe.list().forEach(([ne,le])=>D?le(D):ne()),fe.reset()),D}function K(D,ne,le,ce){const{scrollBehavior:Ae}=s;if(!_s||!Ae)return Promise.resolve();const g=!le&&Kd(El(D.fullPath,0))||(ce||!le)&&history.state&&history.state.scroll||null;return mt().then(()=>Ae(D,ne,g)).then(y=>y&&jd(y)).catch(y=>M(y,D,ne))}const F=D=>i.go(D);let de;const me=new Set,Re={currentRoute:u,listening:!0,addRoute:k,removeRoute:h,clearRoutes:e.clearRoutes,hasRoute:x,getRoutes:P,resolve:_,options:s,push:A,replace:ae,go:F,back:()=>F(-1),forward:()=>F(1),beforeEach:r.add,beforeResolve:l.add,afterEach:a.add,onError:Z.add,isReady:J,install(D){const ne=this;D.component("RouterLink",fu),D.component("RouterView",vu),D.config.globalProperties.$router=ne,Object.defineProperty(D.config.globalProperties,"$route",{enumerable:!0,get:()=>Ts(u)}),_s&&!de&&u.value===Zt&&(de=!0,A(i.location).catch(Ae=>{}));const le={};for(const Ae in Zt)Object.defineProperty(le,Ae,{get:()=>u.value[Ae],enumerable:!0});D.provide(jn,ne),D.provide(Ho,ri(le)),D.provide(Co,u);const ce=D.unmount;me.add(D),D.unmount=function(){me.delete(D),me.size<1&&(p=Zt,ee&&ee(),ee=null,u.value=Zt,de=!1,O=!1),ce()}}};function re(D){return D.reduce((ne,le)=>ne.then(()=>q(le)),Promise.resolve())}return Re}function bu(s,e){const o=[],t=[],i=[],r=Math.max(e.matched.length,s.matched.length);for(let l=0;l<r;l++){const a=e.matched[l];a&&(s.matched.find(p=>Ds(p,a))?t.push(a):o.push(a));const u=s.matched[l];u&&(e.matched.find(p=>Ds(p,u))||i.push(u))}return[o,t,i]}function yu(){return Rt(jn)}function wu(s){return Rt(Ho)}const ku={class:"current-step-info"},_u={class:"step-counter"},xu={class:"step-description"},Cu={class:"step-explanation"},Su={class:"command-section"},Tu={class:"command-preview"},Eu={key:0,class:"command-editor"},Iu={class:"risk-section"},Pu={class:"risk-label"},Ru={class:"risk-reasons"},Du={class:"workflow-management"},Mu={class:"section-header"},Au=["aria-label"],Uu={key:0,class:"steps-manager"},Lu={class:"steps-list"},Ou={class:"step-controls"},Fu=["onClick","disabled"],Nu=["onClick","disabled"],Vu=["onClick","disabled"],ju={class:"step-info"},Bu={class:"step-number"},Ku={class:"step-details"},Wu={class:"step-title"},Hu={class:"step-command"},qu={class:"step-actions"},Gu=["onClick"],$u=["onClick"],zu={class:"add-step-section"},Ju={key:0,class:"new-step-form"},Yu={class:"form-row"},Qu={class:"form-row"},Zu={class:"form-row"},Xu={key:0,class:"password-section"},ef={class:"password-options"},tf={key:0,class:"password-input"},sf={class:"modal-actions"},nf={class:"primary-actions"},of=["disabled"],lf={class:"secondary-actions"},af={__name:"AdvancedStepConfirmationModal",props:{visible:{type:Boolean,default:!1},currentStep:{type:Object,default:()=>({})},currentStepIndex:{type:Number,default:0},workflowSteps:{type:Array,default:()=>[]},sessionId:{type:String,default:""}},emits:["execute-step","skip-step","take-manual-control","execute-all","save-workflow","update-workflow","close"],setup(s,{emit:e}){const o=s,t=e,i=b(!1),r=b(""),l=b(!1),a=b(!1),u=b(!1),p=b("prompt"),f=b(""),v=b({description:"",command:"",explanation:""}),w=Se(()=>o.workflowSteps.length),k=Se(()=>{const Z=(r.value||o.currentStep?.command||"").toLowerCase();return/rm\s+-rf\s+\/($|\s)|dd\s+if=.*of=\/dev\/[sh]d|mkfs\./.test(Z)?"critical":/rm\s+-rf|sudo\s+rm|killall\s+-9|chmod\s+777.*\/$/.test(Z)?"high":/sudo\s+(apt|yum|dnf).*install|sudo\s+systemctl/.test(Z)?"moderate":"low"}),h=Se(()=>{const Z=(r.value||o.currentStep?.command||"").toLowerCase(),O=[];return Z.includes("sudo")&&O.push("Command uses elevated privileges (sudo)"),Z.includes("rm ")&&O.push("Command deletes files or directories"),Z.includes("install")&&O.push("Command installs software packages"),Z.includes("systemctl")&&O.push("Command modifies system services"),Z.includes("chmod")&&O.push("Command changes file permissions"),O}),P=Se(()=>o.currentStep?.command&&(!u.value||p.value!=="")),x=()=>{t("close")},_=()=>{const Z={...o.currentStep,command:r.value||o.currentStep.command,passwordHandling:p.value,providedPassword:f.value};t("execute-step",Z),x()},S=()=>{t("skip-step",o.currentStepIndex),x()},L=()=>{t("take-manual-control"),x()},A=()=>{t("execute-all"),x()},ae=()=>{const Z={name:`Custom Workflow ${new Date().toISOString().split("T")[0]}`,steps:o.workflowSteps,sessionId:o.sessionId};t("save-workflow",Z)},se=()=>{i.value=!1},be=()=>{r.value=o.currentStep?.command||"",i.value=!1},z=Z=>{if(Z>0){const O=[...o.workflowSteps];[O[Z-1],O[Z]]=[O[Z],O[Z-1]],t("update-workflow",O)}},q=Z=>{if(Z<o.workflowSteps.length-1){const O=[...o.workflowSteps];[O[Z],O[Z+1]]=[O[Z+1],O[Z]],t("update-workflow",O)}},X=Z=>{if(o.workflowSteps.length>1){const O=[...o.workflowSteps];O.splice(Z,1),t("update-workflow",O)}},Ee=Z=>{},Pe=Z=>{const O=[...o.workflowSteps],M={id:Date.now(),description:"New Step",command:'echo "New step"',explanation:"Custom inserted step"};O.splice(Z+1,0,M),t("update-workflow",O)},ee=()=>{if(v.value.description&&v.value.command){const Z=[...o.workflowSteps];Z.push({id:Date.now(),...v.value}),t("update-workflow",Z),xe()}},xe=()=>{v.value={description:"",command:"",explanation:""},a.value=!1},fe=Z=>{const O=/sudo\s+(?!echo|ls|pwd|whoami|date|uptime)/,M=["sudo","su","passwd","ssh"];u.value=O.test(Z)||M.some(J=>Z.toLowerCase().includes(J))};return yt(()=>o.currentStep?.command,Z=>{Z&&(r.value=Z,fe(Z))},{immediate:!0}),yt(()=>r.value,Z=>{Z&&fe(Z)}),(Z,O)=>s.visible?(c(),d("div",{key:0,class:"confirmation-modal-overlay",onClick:x,tabindex:"0",onKeyup:[O[14]||(O[14]=ve(M=>M.target.click(),["enter"])),O[15]||(O[15]=ve(M=>M.target.click(),["space"]))]},[n("div",{class:"advanced-step-modal",onClick:O[11]||(O[11]=ze(()=>{},["stop"])),tabindex:"0",onKeyup:[O[12]||(O[12]=ve(M=>M.target.click(),["enter"])),O[13]||(O[13]=ve(M=>M.target.click(),["space"]))]},[n("div",{class:"modal-header"},[O[16]||(O[16]=n("h3",{class:"modal-title"}," Advanced Workflow Step Management",-1)),n("button",{class:"close-button",onClick:x,"aria-label":"Action button"},"")]),n("div",ku,[n("div",_u," Step "+m(s.currentStepIndex+1)+" of "+m(w.value),1),n("div",xu,[n("strong",null,m(s.currentStep?.description||"Execute Command"),1)]),n("div",Cu,m(s.currentStep?.explanation||"AI-generated workflow step"),1)]),n("div",Su,[O[17]||(O[17]=n("label",{class:"section-label"},"Command to Execute:",-1)),n("div",Tu,[n("code",null,m(s.currentStep?.command),1),n("button",{class:"edit-command-btn",onClick:O[0]||(O[0]=M=>i.value=!i.value),"aria-label":" edit"},"  Edit ")]),i.value?(c(),d("div",Eu,[B(n("textarea",{"onUpdate:modelValue":O[1]||(O[1]=M=>r.value=M),class:"command-input",rows:"3",placeholder:"Edit the command..."},null,512),[[he,r.value]]),n("div",{class:"editor-actions"},[n("button",{onClick:se,class:"save-btn","aria-label":" save"}," Save"),n("button",{onClick:be,class:"cancel-btn","aria-label":" cancel"}," Cancel")])])):C("",!0)]),n("div",Iu,[n("div",{class:G(["risk-indicator",k.value])},[n("span",Pu,"Risk Level: "+m(k.value.toUpperCase()),1),n("div",Ru,[(c(!0),d(pe,null,ye(h.value,M=>(c(),d("div",{key:M,class:"risk-reason"},"  "+m(M),1))),128))])],2)]),n("div",Du,[n("div",Mu,[O[18]||(O[18]=n("h4",null," Workflow Steps Management",-1)),n("button",{onClick:O[2]||(O[2]=M=>l.value=!l.value),class:"toggle-btn","aria-label":l.value?" Hide Steps":" Show Steps"},m(l.value?" Hide":" Show"),9,Au)]),l.value?(c(),d("div",Uu,[n("div",Lu,[(c(!0),d(pe,null,ye(s.workflowSteps,(M,J)=>(c(),d("div",{key:M.id||J,class:G(["step-item",{current:J===s.currentStepIndex,completed:J<s.currentStepIndex}])},[n("div",Ou,[n("button",{onClick:W=>z(J),disabled:J===0,class:"step-control","aria-label":"Action button"},"",8,Fu),n("button",{onClick:W=>q(J),disabled:J===s.workflowSteps.length-1,class:"step-control","aria-label":"Action button"},"",8,Nu),n("button",{onClick:W=>X(J),disabled:s.workflowSteps.length<=1,class:"step-control delete","aria-label":"Action button"},"",8,Vu)]),n("div",ju,[n("div",Bu,m(J+1),1),n("div",Ku,[n("div",Wu,m(M.description),1),n("div",Hu,[n("code",null,m(M.command),1)])])]),n("div",qu,[n("button",{onClick:W=>Ee(),class:"edit-step-btn","aria-label":" edit"}," Edit",8,Gu),n("button",{onClick:W=>Pe(J),class:"insert-step-btn","aria-label":" insert after"}," Insert After",8,$u)])],2))),128))]),n("div",zu,[n("button",{onClick:O[3]||(O[3]=M=>a.value=!a.value),class:"add-step-btn","aria-label":" add new step"},"  Add New Step "),a.value?(c(),d("div",Ju,[n("div",Yu,[O[19]||(O[19]=n("label",null,"Description:",-1)),B(n("input",{"onUpdate:modelValue":O[4]||(O[4]=M=>v.value.description=M),placeholder:"Step description",class:"form-input"},null,512),[[he,v.value.description]])]),n("div",Qu,[O[20]||(O[20]=n("label",null,"Command:",-1)),B(n("textarea",{"onUpdate:modelValue":O[5]||(O[5]=M=>v.value.command=M),placeholder:"Command to execute",class:"form-textarea",rows:"2"},null,512),[[he,v.value.command]])]),n("div",Zu,[O[21]||(O[21]=n("label",null,"Explanation:",-1)),B(n("textarea",{"onUpdate:modelValue":O[6]||(O[6]=M=>v.value.explanation=M),placeholder:"What this step does",class:"form-textarea",rows:"2"},null,512),[[he,v.value.explanation]])]),n("div",{class:"form-actions"},[n("button",{onClick:ee,class:"save-btn","aria-label":" add step"}," Add Step"),n("button",{onClick:xe,class:"cancel-btn","aria-label":" cancel"}," Cancel")])])):C("",!0)])])):C("",!0)]),u.value?(c(),d("div",Xu,[O[26]||(O[26]=n("div",{class:"password-warning"},"  This command may require password input ",-1)),n("div",ef,[n("label",null,[B(n("input",{type:"radio","onUpdate:modelValue":O[7]||(O[7]=M=>p.value=M),value:"prompt"},null,512),[[gs,p.value]]),O[22]||(O[22]=U(" Prompt for password during execution ",-1))]),n("label",null,[B(n("input",{type:"radio","onUpdate:modelValue":O[8]||(O[8]=M=>p.value=M),value:"skip"},null,512),[[gs,p.value]]),O[23]||(O[23]=U(" Skip this step if password is required ",-1))]),n("label",null,[B(n("input",{type:"radio","onUpdate:modelValue":O[9]||(O[9]=M=>p.value=M),value:"provide"},null,512),[[gs,p.value]]),O[24]||(O[24]=U(" Provide password now (not recommended) ",-1))])]),p.value==="provide"?(c(),d("div",tf,[B(n("input",{type:"password","onUpdate:modelValue":O[10]||(O[10]=M=>f.value=M),placeholder:"Enter password",class:"password-field"},null,512),[[he,f.value]]),O[25]||(O[25]=n("div",{class:"password-note"}," Password will be sent in plain text",-1))])):C("",!0)])):C("",!0),n("div",sf,[n("div",nf,[n("button",{onClick:_,class:"execute-btn",disabled:!P.value,"aria-label":" execute & continue"},"  Execute & Continue ",8,of),n("button",{onClick:S,class:"skip-btn","aria-label":" skip this step"},"  Skip This Step "),n("button",{onClick:L,class:"manual-btn","aria-label":" take manual control"},"  Take Manual Control ")]),n("div",lf,[s.workflowSteps.length>1?(c(),d("button",{key:0,onClick:A,class:"execute-all-btn","aria-label":"Execute all remaining steps"},"  Execute All Remaining ("+m(s.workflowSteps.length-s.currentStepIndex)+" steps) ",1)):C("",!0),n("button",{onClick:ae,class:"save-workflow-btn","aria-label":" save workflow as template"},"  Save Workflow as Template ")])])],32)],32)):C("",!0)}},rf=Xe(af,[["__scopeId","data-v-a7f90db1"]]),cf={name:"TerminalWindow",components:{AdvancedStepConfirmationModal:rf},setup(){const s=wu();yu();const{sendInput:e,sendSignal:o,isConnected:t,resize:i,connect:r,disconnect:l,createSession:a,closeSession:u}=Hi(),f=b((()=>{if(s?.params?.sessionId)return s.params.sessionId;if(s?.query?.sessionId)return s.query.sessionId;const N=localStorage.getItem("currentChatId");if(N&&N!=="null")return N;const et=`chat_${Date.now()}`;return localStorage.setItem("currentChatId",et),et})()),v=b(s?.query?.title||"Terminal"),w=b([]),k=b(""),h=b("$ "),P=b("disconnected"),x=b(!1),_=b(!0),S=b(!1),L=b([]),A=b(-1),ae=b(!1),se=b(!1),be=b(""),z=b("low"),q=b([]),X=b([]),Ee=b(!1),Pe=b(!1),ee=b(!1),xe=b(0),fe=b([]),Z=b(!1),O=b(!1),M=b(null),J=b([]),W=b(!1),K=b(!0),F=b([]),de=b(!1),me=b(null),Re=b(null),re=b(null),D=b(null),ne=Se(()=>P.value==="connected"&&!x.value&&!W.value),le=Se(()=>X.value.length>0),ce=Se(()=>{switch(P.value){case"connected":return"Connected";case"connecting":return"Connecting...";case"disconnected":return"Disconnected";case"error":return"Error";default:return"Unknown"}}),Ae=async()=>{if(!f.value){console.error("No session ID provided");return}x.value=!0,P.value="connecting";try{await r(f.value,{onOutput:Wn,onPromptChange:Hn,onStatusChange:rn,onError:bs})}catch(N){console.error("Failed to connect:",N),bs(N.message)}finally{x.value=!1}},g=async()=>{an(),t(f.value)&&l(f.value),w.value=[],h.value="$ ",await Ae()},y=()=>{if(!k.value.trim()||!ne.value)return;const N=k.value.trim(),ke=V(N);if(ke.risk==="high"||ke.risk==="critical"){be.value=N,z.value=ke.risk,q.value=ke.reasons,ae.value=!0;return}I(N)},I=N=>{N&&(!L.value.length||L.value[L.value.length-1]!==N)&&(L.value.push(N),L.value.length>100&&(L.value=L.value.slice(-100))),A.value=L.value.length,Y(N)&&(Ee.value=!0,we(N)),e(f.value,N),k.value="",He({content:`${h.value}${N}`,type:"command",timestamp:new Date,risk:z.value||"low"})},V=N=>{const ke=N.toLowerCase().trim(),et=[/rm\s+-rf\s+\/($|\s)/,/dd\s+if=.*of=\/dev\/[sh]d/,/mkfs\./,/fdisk.*\/dev\/[sh]d/,/>(\/etc\/passwd|\/etc\/shadow)/],It=[/rm\s+-rf/,/chmod\s+777.*\/$/,/chown.*\/$/,/rm\s+.*\/etc\//,/sudo\s+rm/,/>\s*\/dev\/null.*&&.*rm/,/killall\s+-9/,/reboot|shutdown\s+-h/,/iptables\s+-F/,/userdel|groupdel/],At=[/sudo\s+(apt|yum|dnf|pacman).*install/,/sudo\s+(apt|yum|dnf|pacman).*remove/,/sudo\s+systemctl/,/sudo\s+(service|systemd)/,/sudo\s+mount/,/chmod.*[4-7][0-7][0-7]/,/sudo.*>/];let jt="low",Qt=[];for(const cs of et)if(cs.test(ke)){jt="critical",Qt.push("Command could cause irreversible system damage");break}if(jt==="low"){for(const cs of It)if(cs.test(ke)){jt="high",Qt.push("Command could delete data or modify system configuration");break}}if(jt==="low"){for(const cs of At)if(cs.test(ke)){jt="moderate",Qt.push("Command requires elevated privileges or modifies system");break}}return ke.includes("sudo")&&Qt.push("Command uses sudo (elevated privileges)"),(ke.includes(">>")||ke.includes(">"))&&Qt.push("Command redirects output (potential file modification)"),{risk:jt,reasons:Qt}},j=()=>{I(be.value),ae.value=!1,be.value="",z.value="low",q.value=[]},H=()=>{ae.value=!1,be.value="",z.value="low",q.value=[],k.value=""},ie=()=>{X.value.length!==0&&(se.value=!0)},oe=async()=>{try{await e(f.value,"");for(const N of X.value)try{await o(f.value,"SIGKILL",N.pid)}catch(ke){console.warn(`Failed to kill process ${N.pid}:`,ke)}X.value=[],Ee.value=!1,He({content:" EMERGENCY KILL: All processes terminated by user",type:"system_message",timestamp:new Date}),se.value=!1}catch(N){console.error("Emergency kill failed:",N),He({content:" Emergency kill failed: "+N.message,type:"error",timestamp:new Date})}},te=()=>{Ee.value&&(e(f.value,""),He({content:"^C (Process interrupted by user)",type:"system_message",timestamp:new Date}))},Y=N=>[/^(vim|nano|emacs|less|more|top|htop|tail\s+-f)/,/&\s*$/,/^(python|node|java|go)/,/^(ssh|scp|rsync)/,/^(find|grep|sort).*\|/].some(et=>et.test(N.toLowerCase())),we=N=>{const ke={pid:Date.now(),command:N,startTime:new Date};X.value.push(ke)},E=()=>{Pe.value=!Pe.value,Pe.value?(He({content:" AUTOMATION PAUSED - Manual control activated. Type commands freely.",type:"system_message",timestamp:new Date}),R("pause")):(He({content:" AUTOMATION RESUMED - Continuing workflow execution.",type:"system_message",timestamp:new Date}),R("resume"),J.value.length>0&&Ce())},R=async N=>{try{const ke={type:"automation_control",action:N,sessionId:f.value,timestamp:new Date().toISOString()};await e(f.value,JSON.stringify(ke))}catch(ke){console.error("Failed to send automation control:",ke)}},$=N=>{M.value=N,Z.value=!0,W.value=!0,He({content:` AI WORKFLOW: About to execute "${N.command}"`,type:"system_message",timestamp:new Date}),He({content:` Step ${N.stepNumber}/${N.totalSteps}: ${N.description}`,type:"workflow_info",timestamp:new Date})},ge=()=>{M.value&&(ue(M.value.command),Z.value=!1,W.value=!1,M.value=null,Fe())},_e=()=>{M.value&&(He({content:` SKIPPED: ${M.value.command}`,type:"system_message",timestamp:new Date}),Z.value=!1,W.value=!1,M.value=null,Fe())},Ue=()=>{Pe.value=!0,Z.value=!1,W.value=!1,He({content:" MANUAL CONTROL TAKEN - Complete your manual steps, then click RESUME to continue workflow.",type:"system_message",timestamp:new Date}),M.value&&(J.value.unshift(M.value),M.value=null)},ue=N=>{He({content:` AUTOMATED: ${N}`,type:"automated_command",timestamp:new Date}),e(f.value,N),Ee.value=!0,we(`[AUTO] ${N}`)},Ce=()=>{if(J.value.length>0&&!Pe.value){const N=J.value.shift();setTimeout(()=>{$(N)},1e3)}},Fe=()=>{xe.value++,setTimeout(()=>{Ce()},2e3)},Ve=N=>{(Pe.value||W.value)&&He({content:` MANUAL: ${N}`,type:"manual_command",timestamp:new Date}),I(N)},Ye=N=>{ee.value=!0,Pe.value=!1,xe.value=0,fe.value=N.steps||[],J.value=[],N.steps.forEach((ke,et)=>{J.value.push({stepNumber:et+1,totalSteps:N.steps.length,command:ke.command,description:ke.description||`Execute: ${ke.command}`,explanation:ke.explanation||null,requiresConfirmation:ke.requiresConfirmation!==!1})}),He({content:` AUTOMATED WORKFLOW STARTED: ${N.name||"Unnamed Workflow"}`,type:"system_message",timestamp:new Date}),He({content:` ${fe.value.length} steps planned. Use PAUSE button to take manual control at any time.`,type:"workflow_info",timestamp:new Date}),setTimeout(()=>{Ce()},1500)},Mt=()=>{Ye({name:"System Update and Package Installation",steps:[{command:"sudo apt update",description:"Update package repositories",explanation:"This updates the list of available packages from configured repositories.",requiresConfirmation:!0},{command:"sudo apt upgrade -y",description:"Upgrade installed packages",explanation:"This upgrades all installed packages to their latest versions.",requiresConfirmation:!0},{command:"sudo apt install -y git curl wget",description:"Install essential tools",explanation:"Install commonly needed development tools.",requiresConfirmation:!0},{command:"git --version && curl --version",description:"Verify installations",explanation:"Check that the tools were installed correctly.",requiresConfirmation:!1}]})},st=N=>{try{const ke=JSON.parse(N);ke.type==="start_workflow"?Ye(ke.workflow):ke.type==="pause_workflow"?(Pe.value=!0,He({content:" WORKFLOW PAUSED BY SYSTEM",type:"system_message",timestamp:new Date})):ke.type==="resume_workflow"&&(Pe.value=!1,He({content:" WORKFLOW RESUMED BY SYSTEM",type:"system_message",timestamp:new Date}),Ce())}catch(ke){console.warn("Failed to parse workflow message:",ke)}},rt=N=>{switch(N.key){case"ArrowUp":N.preventDefault(),A.value>0&&(A.value--,k.value=L.value[A.value]);break;case"ArrowDown":N.preventDefault(),A.value<L.value.length-1?(A.value++,k.value=L.value[A.value]):A.value===L.value.length-1&&(A.value=L.value.length,k.value="");break;case"Tab":N.preventDefault();break;case"c":N.ctrlKey&&(N.preventDefault(),o(f.value,"SIGINT"));break;case"d":N.ctrlKey&&!k.value&&(N.preventDefault(),e(f.value,"exit"));break;case"l":N.ctrlKey&&(N.preventDefault(),wt());break}},wt=()=>{w.value=[]},Qe=()=>{D.value&&ne.value&&(D.value.focus(),mt(()=>{D.value&&document.activeElement!==D.value&&D.value.focus()}))},ot=()=>{confirm("Are you sure you want to close this terminal window?")&&(t(f.value)&&l(f.value),window.close())},Bn=()=>{const N=w.value.map(At=>`${At.timestamp?`[${At.timestamp.toLocaleString()}] `:""}${At.content||At}`).join(`
`),ke=new Blob([N],{type:"text/plain"}),et=URL.createObjectURL(ke),It=document.createElement("a");It.href=et,It.download=`terminal-${f.value}-${new Date().toISOString().split("T")[0]}.log`,document.body.appendChild(It),It.click(),document.body.removeChild(It),URL.revokeObjectURL(et)},Kn=async()=>{const N=`${window.location.origin}/terminal/${f.value}?title=${encodeURIComponent(v.value)}`;if(navigator.share)try{await navigator.share({title:`Terminal Session - ${v.value}`,url:N})}catch{}else try{await navigator.clipboard.writeText(N),alert("Terminal URL copied to clipboard!")}catch{prompt("Copy this URL:",N)}},an=()=>{S.value=!1},Wn=N=>{He({content:N.content,type:N.stream||"output",timestamp:new Date})},Hn=N=>{h.value=N},rn=N=>{const ke=P.value;P.value=N,console.log(`Terminal status change: ${ke} -> ${N}`),N==="connected"?(x.value=!1,mt(()=>{setTimeout(()=>{ne.value&&(Qe(),setTimeout(()=>{ne.value&&D.value&&document.activeElement!==D.value&&Qe()},200))},50)})):N==="disconnected"&&!x.value?S.value=!0:N==="connecting"&&(x.value=!0)},bs=N=>{He({content:`Error: ${N}`,type:"error",timestamp:new Date}),P.value="error"},He=N=>{w.value.push(N),w.value.length>1e4&&(w.value=w.value.slice(-8e3)),mt(()=>{re.value&&(re.value.scrollTop=re.value.scrollHeight)})},Us=N=>{let ke=N.content||N;return ke=ke.replace(/\x1b\[([0-9]{1,2}(;[0-9]{1,2})?)?[mGK]/g,"").replace(/\r\n/g,`
`).replace(/\r/g,`
`).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),ke},qn=N=>{const ke=["terminal-line"];return N.type&&ke.push(`line-${N.type}`),ke},Gn=()=>{setInterval(()=>{_.value=!_.value},500)},cn=()=>{if(Re.value&&t(f.value)){const N=Re.value.getBoundingClientRect(),ke=8,et=16,It=Math.floor((N.width-20)/ke),At=Math.floor((N.height-100)/et);i(f.value,At,It)}},ys=N=>{if(t(f.value))return N.preventDefault(),N.returnValue="You have an active terminal session. Are you sure you want to close?",N.returnValue};return it(async()=>{Gn(),document.title=`Terminal - ${v.value}`,await Ae(),window.addEventListener("resize",cn),window.addEventListener("beforeunload",ys),mt(()=>{Qe(),document.addEventListener("click",ke=>{const et=document.querySelector(".terminal-window-standalone");et&&et.contains(ke.target)&&ke.target!==D.value&&ne.value&&mt(()=>Qe())});const N=setInterval(()=>{ne.value&&D.value&&document.activeElement!==D.value&&document.querySelector(".terminal-window-standalone")&&Qe()},1e3);window.terminalFocusInterval=N})}),ut(()=>{t&&typeof t=="function"&&t(f.value)&&l(f.value),window.removeEventListener("resize",cn),window.removeEventListener("beforeunload",ys),window.terminalFocusInterval&&(clearInterval(window.terminalFocusInterval),window.terminalFocusInterval=null)}),yt(()=>s.params.sessionId,N=>{N&&N!==f.value&&(f.value&&t(f.value)&&l(f.value),f.value=N,w.value=[],Ae())}),{sessionId:f,sessionTitle:v,outputLines:w,currentInput:k,currentPrompt:h,connectionStatus:P,connecting:x,showCursor:_,showReconnectModal:S,showCommandConfirmation:ae,showKillConfirmation:se,pendingCommand:be,pendingCommandRisk:z,pendingCommandReasons:q,runningProcesses:X,hasActiveProcess:Ee,automationPaused:Pe,hasAutomatedWorkflow:ee,currentWorkflowStep:xe,workflowSteps:fe,showManualStepModal:Z,showLegacyModal:O,pendingWorkflowStep:M,automationQueue:J,waitingForUserConfirmation:W,isAdvancedMode:K,workflowTemplates:F,passwordPromptActive:de,currentPasswordPrompt:me,terminalMain:Re,terminalOutput:re,terminalInput:D,canInput:ne,hasRunningProcesses:le,connectionStatusText:ce,connect:Ae,reconnect:g,sendCommand:y,executeCommand:I,executeConfirmedCommand:j,cancelCommand:H,emergencyKillAll:ie,confirmEmergencyKill:oe,interruptProcess:te,toggleAutomationPause:E,requestManualStepConfirmation:$,confirmWorkflowStep:ge,skipWorkflowStep:_e,takeManualControl:Ue,executeCommandWithAutomation:Ve,startAutomatedWorkflow:Ye,startExampleWorkflow:Mt,handleWorkflowMessage:st,executeConfirmedStep:N=>{He({content:` EXECUTING: ${N.command}`,type:"system_message",timestamp:new Date}),ue(N.command),Fe()},skipCurrentStep:N=>{He({content:` STEP ${N+1} SKIPPED BY USER`,type:"system_message",timestamp:new Date}),Fe()},executeAllRemainingSteps:()=>{Pe.value=!1,W.value=!1,Ce()},saveCustomWorkflow:N=>{He({content:` WORKFLOW SAVED: ${N.name}`,type:"system_message",timestamp:new Date})},updateWorkflowSteps:N=>{fe.value=N,He({content:` WORKFLOW UPDATED: ${N.length} steps configured`,type:"system_message",timestamp:new Date})},closeAdvancedModal:()=>{Z.value=!1,W.value=!1},handlePasswordPrompt:N=>{de.value=!0,me.value=N},handleKeydown:rt,clearTerminal:wt,focusInput:Qe,closeWindow:ot,downloadLog:Bn,shareSession:Kn,hideReconnectModal:an,formatTerminalLine:Us,getLineClass:qn,isTerminalReady:()=>{const N=ne.value&&D.value&&!D.value.disabled;return console.log(`Terminal ready check: canInput=${ne.value}, hasInput=${!!D.value}, enabled=${D.value?!D.value.disabled:!1}, result=${N}`),N},ensureInputFocus:()=>{if(ne.value&&D.value){console.log("Ensuring terminal input focus..."),D.value.focus();const N=document.activeElement===D.value;return console.log(`Focus result: ${N}`),N}return console.log("Cannot ensure focus: canInput=",ne.value,"hasInput=",!!D.value),!1},getDebugInfo:()=>({canInput:ne.value,connectionStatus:P.value,connecting:x.value,waitingForUserConfirmation:W.value,hasTerminalInput:!!D.value,inputDisabled:D.value?D.value.disabled:null,activeElement:document.activeElement?.className||"none",isInputFocused:document.activeElement===D.value})}}},df={class:"terminal-window-standalone"},uf={class:"window-header"},ff={class:"window-title"},mf={class:"window-controls"},pf=["disabled"],gf=["disabled","title"],vf=["disabled"],hf=["disabled"],bf={class:"terminal-status-bar"},yf={class:"status-left"},wf={class:"session-info"},kf={class:"status-right"},_f={class:"terminal-stats"},xf={class:"terminal-main",ref:"terminalMain"},Cf=["innerHTML"],Sf={class:"terminal-input-line"},Tf=["innerHTML"],Ef=["disabled"],If={class:"terminal-footer"},Pf={class:"footer-actions"},Rf={class:"modal-actions"},Df={class:"modal-content"},Mf={class:"command-preview"},Af={class:"command-text"},Uf={class:"risk-assessment"},Lf={class:"risk-reasons"},Of={class:"modal-actions"},Ff={class:"modal-content"},Nf={class:"emergency-warning"},Vf={class:"modal-actions"},jf={class:"modal-content"},Bf={key:0,class:"workflow-step-info"},Kf={class:"step-counter"},Wf={class:"step-description"},Hf={class:"command-preview"},qf={class:"command-text"},Gf={class:"modal-actions workflow-actions"};function $f(s,e,o,t,i,r){const l=Je("AdvancedStepConfirmationModal");return c(),d("div",df,[n("div",uf,[n("div",ff,[e[48]||(e[48]=n("span",{class:"terminal-icon"},"",-1)),n("span",null,"Terminal - "+m(t.sessionTitle),1)]),n("div",mf,[n("button",{class:"control-button emergency-kill",onClick:e[0]||(e[0]=(...a)=>t.emergencyKillAll&&t.emergencyKillAll(...a)),disabled:!t.hasRunningProcesses,title:"EMERGENCY KILL - Stop all running processes immediately"},"  KILL ",8,pf),n("button",{class:G(["control-button takeover",{active:t.automationPaused}]),onClick:e[1]||(e[1]=(...a)=>t.toggleAutomationPause&&t.toggleAutomationPause(...a)),disabled:!t.hasAutomatedWorkflow,title:t.automationPaused?"Resume automated workflow":"Pause automation and take manual control"},m(t.automationPaused?" RESUME":" PAUSE"),11,gf),n("button",{class:"control-button interrupt",onClick:e[2]||(e[2]=(...a)=>t.interruptProcess&&t.interruptProcess(...a)),disabled:!t.hasActiveProcess,title:"Send Ctrl+C to interrupt current process"},"  INT ",8,vf),n("button",{class:"control-button",onClick:e[3]||(e[3]=(...a)=>t.reconnect&&t.reconnect(...a)),disabled:t.connecting,title:"Reconnect"},m(t.connecting?"":""),9,hf),n("button",{class:"control-button",onClick:e[4]||(e[4]=(...a)=>t.clearTerminal&&t.clearTerminal(...a)),title:"Clear"},"  "),n("button",{class:"control-button danger",onClick:e[5]||(e[5]=(...a)=>t.closeWindow&&t.closeWindow(...a)),title:"Close Window"},"  ")])]),n("div",bf,[n("div",yf,[n("div",{class:G(["connection-status",t.connectionStatus])},[e[49]||(e[49]=n("div",{class:"status-dot"},null,-1)),n("span",null,m(t.connectionStatusText),1)],2),n("div",wf,[n("span",null,"Session: "+m(t.sessionId?.slice(0,8))+"...",1)])]),n("div",kf,[n("div",_f," Lines: "+m(t.outputLines.length),1)])]),n("div",xf,[n("div",{class:"terminal-output",ref:"terminalOutput",onClick:e[9]||(e[9]=(...a)=>t.focusInput&&t.focusInput(...a)),tabindex:"0",onKeyup:[e[10]||(e[10]=ve(a=>a.target.click(),["enter"])),e[11]||(e[11]=ve(a=>a.target.click(),["space"]))]},[(c(!0),d(pe,null,ye(t.outputLines,(a,u)=>(c(),d("div",{key:u,class:G(["terminal-line",t.getLineClass(a)]),innerHTML:t.formatTerminalLine(a)},null,10,Cf))),128)),n("div",Sf,[n("span",{class:"prompt",innerHTML:t.currentPrompt},null,8,Tf),B(n("input",{ref:"terminalInput","onUpdate:modelValue":e[6]||(e[6]=a=>t.currentInput=a),onKeydown:e[7]||(e[7]=(...a)=>t.handleKeydown&&t.handleKeydown(...a)),onKeyup:e[8]||(e[8]=ve((...a)=>t.sendCommand&&t.sendCommand(...a),["enter"])),class:"terminal-input",disabled:!t.canInput,autocomplete:"off",spellcheck:"false",autofocus:""},null,40,Ef),[[he,t.currentInput]]),n("span",{class:G(["cursor",{blink:t.showCursor}])},"",2)])],544)],512),n("div",If,[e[50]||(e[50]=n("div",{class:"footer-info"},[n("span",null,"Press Ctrl+C to interrupt, Ctrl+D to exit, Tab for completion")],-1)),n("div",Pf,[t.hasAutomatedWorkflow?C("",!0):(c(),d("button",{key:0,class:"footer-button workflow-test",onClick:e[12]||(e[12]=(...a)=>t.startExampleWorkflow&&t.startExampleWorkflow(...a)),title:"Start Example Automated Workflow (for testing)"},"  Test Workflow ")),n("button",{class:"footer-button",onClick:e[13]||(e[13]=(...a)=>t.downloadLog&&t.downloadLog(...a)),title:"Download Session Log"},"  Save Log "),n("button",{class:"footer-button",onClick:e[14]||(e[14]=(...a)=>t.shareSession&&t.shareSession(...a)),title:"Share Session"},"  Share ")])]),t.showReconnectModal?(c(),d("div",{key:0,class:"modal-overlay",onClick:e[20]||(e[20]=(...a)=>t.hideReconnectModal&&t.hideReconnectModal(...a)),tabindex:"0",onKeyup:[e[21]||(e[21]=ve(a=>a.target.click(),["enter"])),e[22]||(e[22]=ve(a=>a.target.click(),["space"]))]},[n("div",{class:"modal-content",onClick:e[17]||(e[17]=ze(()=>{},["stop"])),tabindex:"0",onKeyup:[e[18]||(e[18]=ve(a=>a.target.click(),["enter"])),e[19]||(e[19]=ve(a=>a.target.click(),["space"]))]},[e[51]||(e[51]=n("h3",null,"Connection Lost",-1)),e[52]||(e[52]=n("p",null,"The terminal connection was lost. Would you like to reconnect?",-1)),n("div",Rf,[n("button",{class:"btn btn-secondary",onClick:e[15]||(e[15]=(...a)=>t.hideReconnectModal&&t.hideReconnectModal(...a)),"aria-label":"Cancel"}," Cancel "),n("button",{class:"btn btn-primary",onClick:e[16]||(e[16]=(...a)=>t.reconnect&&t.reconnect(...a)),"aria-label":"Reconnect"}," Reconnect ")])],32)],32)):C("",!0),t.showCommandConfirmation?(c(),d("div",{key:1,class:"confirmation-modal-overlay",onClick:e[28]||(e[28]=(...a)=>t.cancelCommand&&t.cancelCommand(...a)),tabindex:"0",onKeyup:[e[29]||(e[29]=ve(a=>a.target.click(),["enter"])),e[30]||(e[30]=ve(a=>a.target.click(),["space"]))]},[n("div",{class:"confirmation-modal",onClick:e[25]||(e[25]=ze(()=>{},["stop"])),tabindex:"0",onKeyup:[e[26]||(e[26]=ve(a=>a.target.click(),["enter"])),e[27]||(e[27]=ve(a=>a.target.click(),["space"]))]},[e[56]||(e[56]=n("div",{class:"modal-header"},[n("h3",{class:"modal-title"}," Potentially Destructive Command")],-1)),n("div",Df,[n("div",Mf,[e[53]||(e[53]=n("div",{class:"command-label"},"Command to execute:",-1)),n("div",Af,m(t.pendingCommand),1)]),n("div",Uf,[n("div",{class:G(["risk-level",t.pendingCommandRisk])},[e[54]||(e[54]=U(" Risk Level: ",-1)),n("strong",null,m(t.pendingCommandRisk.toUpperCase()),1)],2),n("div",Lf,[(c(!0),d(pe,null,ye(t.pendingCommandReasons,a=>(c(),d("div",{key:a,class:"risk-reason"},"  "+m(a),1))),128))])]),e[55]||(e[55]=n("div",{class:"confirmation-message"},[n("p",null,[n("strong",null,"This command may:")]),n("ul",null,[n("li",null,"Delete files or directories permanently"),n("li",null,"Modify system configurations"),n("li",null,"Change file permissions or ownership"),n("li",null,"Install or remove software packages")]),n("p",null,[n("strong",null,"Are you sure you want to proceed?")])],-1))]),n("div",Of,[n("button",{class:"btn btn-danger",onClick:e[23]||(e[23]=(...a)=>t.executeConfirmedCommand&&t.executeConfirmedCommand(...a)),"aria-label":" execute command"},"  Execute Command "),n("button",{class:"btn btn-secondary",onClick:e[24]||(e[24]=(...a)=>t.cancelCommand&&t.cancelCommand(...a)),"aria-label":" cancel"},"  Cancel ")])],32)],32)):C("",!0),t.showKillConfirmation?(c(),d("div",{key:2,class:"confirmation-modal-overlay",onClick:e[36]||(e[36]=a=>t.showKillConfirmation=!1),tabindex:"0",onKeyup:[e[37]||(e[37]=ve(a=>a.target.click(),["enter"])),e[38]||(e[38]=ve(a=>a.target.click(),["space"]))]},[n("div",{class:"confirmation-modal emergency",onClick:e[33]||(e[33]=ze(()=>{},["stop"])),tabindex:"0",onKeyup:[e[34]||(e[34]=ve(a=>a.target.click(),["enter"])),e[35]||(e[35]=ve(a=>a.target.click(),["space"]))]},[e[60]||(e[60]=n("div",{class:"modal-header"},[n("h3",{class:"modal-title"}," Emergency Kill All Processes")],-1)),n("div",Ff,[n("div",Nf,[e[57]||(e[57]=n("p",null,[n("strong",null," WARNING: This will immediately terminate ALL running processes in this terminal session!")],-1)),e[58]||(e[58]=n("p",null,"Running processes:",-1)),n("ul",null,[(c(!0),d(pe,null,ye(t.runningProcesses,a=>(c(),d("li",{key:a.pid,class:"process-item"}," PID "+m(a.pid)+": "+m(a.command),1))),128))]),e[59]||(e[59]=n("p",null,[n("strong",null,"This action cannot be undone. Continue?")],-1))])]),n("div",Vf,[n("button",{class:"btn btn-danger",onClick:e[31]||(e[31]=(...a)=>t.confirmEmergencyKill&&t.confirmEmergencyKill(...a)),"aria-label":" kill all processes"},"  KILL ALL PROCESSES "),n("button",{class:"btn btn-secondary",onClick:e[32]||(e[32]=a=>t.showKillConfirmation=!1),"aria-label":" cancel"},"  Cancel ")])],32)],32)):C("",!0),Oe(l,{visible:t.showManualStepModal,"current-step":t.pendingWorkflowStep,"current-step-index":t.currentWorkflowStep,"workflow-steps":t.workflowSteps,"session-id":t.sessionId,onExecuteStep:t.executeConfirmedStep,onSkipStep:t.skipCurrentStep,onTakeManualControl:t.takeManualControl,onExecuteAll:t.executeAllRemainingSteps,onSaveWorkflow:t.saveCustomWorkflow,onUpdateWorkflow:t.updateWorkflowSteps,onClose:t.closeAdvancedModal},null,8,["visible","current-step","current-step-index","workflow-steps","session-id","onExecuteStep","onSkipStep","onTakeManualControl","onExecuteAll","onSaveWorkflow","onUpdateWorkflow","onClose"]),t.showLegacyModal?(c(),d("div",{key:3,class:"confirmation-modal-overlay",onClick:e[45]||(e[45]=(...a)=>t.takeManualControl&&t.takeManualControl(...a)),tabindex:"0",onKeyup:[e[46]||(e[46]=ve(a=>a.target.click(),["enter"])),e[47]||(e[47]=ve(a=>a.target.click(),["space"]))]},[n("div",{class:"confirmation-modal workflow-step",onClick:e[42]||(e[42]=ze(()=>{},["stop"])),tabindex:"0",onKeyup:[e[43]||(e[43]=ve(a=>a.target.click(),["enter"])),e[44]||(e[44]=ve(a=>a.target.click(),["space"]))]},[e[63]||(e[63]=n("div",{class:"modal-header"},[n("h3",{class:"modal-title"}," AI Workflow Step Confirmation")],-1)),n("div",jf,[t.pendingWorkflowStep?(c(),d("div",Bf,[n("div",Kf," Step "+m(t.pendingWorkflowStep.stepNumber)+" of "+m(t.pendingWorkflowStep.totalSteps),1),n("div",Wf,[n("h4",null,m(t.pendingWorkflowStep.description),1),n("p",null,m(t.pendingWorkflowStep.explanation||"The AI wants to execute the following command:"),1)]),n("div",Hf,[e[61]||(e[61]=n("div",{class:"command-label"},"Command to Execute:",-1)),n("div",qf,m(t.pendingWorkflowStep.command),1)]),e[62]||(e[62]=n("div",{class:"workflow-options"},[n("div",{class:"option-info"},[n("p",null,[n("strong",null,"Choose your action:")]),n("ul",null,[n("li",null,[n("strong",null,"Execute:"),U(" Run this command and continue to next step")]),n("li",null,[n("strong",null,"Skip:"),U(" Skip this command and continue to next step")]),n("li",null,[n("strong",null,"Take Control:"),U(" Pause automation and perform manual steps")])])])],-1))])):C("",!0)]),n("div",Gf,[n("button",{class:"btn btn-success",onClick:e[39]||(e[39]=(...a)=>t.confirmWorkflowStep&&t.confirmWorkflowStep(...a)),"aria-label":" execute & continue"},"  Execute & Continue "),n("button",{class:"btn btn-warning",onClick:e[40]||(e[40]=(...a)=>t.skipWorkflowStep&&t.skipWorkflowStep(...a)),"aria-label":" skip this step"},"  Skip This Step "),n("button",{class:"btn btn-primary",onClick:e[41]||(e[41]=(...a)=>t.takeManualControl&&t.takeManualControl(...a)),"aria-label":" take manual control"},"  Take Manual Control ")])],32)],32)):C("",!0)])}const qo=Xe(cf,[["render",$f],["__scopeId","data-v-6ec8e533"]]);let na=class{constructor(){this.baseUrl="http://localhost:8001",this.timeout=3e4,this.settings=this.loadSettings(),this.settings?.backend?.api_endpoint&&(this.baseUrl=this.settings.backend.api_endpoint)}loadSettings(){try{const e=localStorage.getItem("chat_settings");return e?JSON.parse(e):{}}catch(e){return console.error("Error loading settings:",e),{}}}async request(e,o={}){const t=`${this.baseUrl}${e}`,i=o.method||"GET",r=performance.now();window.rum&&window.rum.trackUserInteraction("api_call_initiated",null,{method:i,endpoint:e,url:t});const l={timeout:this.timeout,headers:{"Content-Type":"application/json",...o.headers},...o};try{const a=new AbortController,u=setTimeout(()=>a.abort(),this.timeout),p=await fetch(t,{...l,signal:a.signal});clearTimeout(u);const f=performance.now();if(!p.ok)throw window.rum&&window.rum.trackApiCall(i,e,r,f,p.status),new Error(`HTTP ${p.status}: ${p.statusText}`);return window.rum&&window.rum.trackApiCall(i,e,r,f,p.status),p}catch(a){const u=performance.now();if(a.name==="AbortError"){const p=new Error(`Request timeout after ${this.timeout}ms`);throw window.rum&&(window.rum.trackApiCall(i,e,r,u,"timeout",p),window.rum.reportCriticalIssue("api_timeout",{method:i,endpoint:e,url:t,duration:u-r,timeout:this.timeout})),p}throw window.rum&&window.rum.trackApiCall(i,e,r,u,"error",a),a}}async get(e,o={}){return this.request(e,{method:"GET",...o})}async post(e,o=null,t={}){const i={method:"POST",...t};return o&&(o instanceof FormData?(delete i.headers["Content-Type"],i.body=o):i.body=JSON.stringify(o)),this.request(e,i)}async put(e,o=null,t={}){const i={method:"PUT",...t};return o&&(i.body=JSON.stringify(o)),this.request(e,i)}async delete(e,o={}){return this.request(e,{method:"DELETE",...o})}async sendChatMessage(e,o={}){const t=await this.post("/api/chat",{message:e,...o}),i=t.headers.get("content-type");return i&&i.includes("text/event-stream")?{type:"streaming",response:t}:{type:"json",data:await t.json()}}async createNewChat(){return(await this.post("/api/chats/new")).json()}async getChatList(){return(await this.get("/api/chats")).json()}async getChatMessages(e){return(await this.get(`/api/chats/${e}`)).json()}async saveChatMessages(e,o){return(await this.post(`/api/chats/${e}/save`,{messages:o})).json()}async deleteChat(e){return(await this.delete(`/api/chats/${e}`)).json()}async resetChat(){return(await this.post("/api/reset")).json()}async getSettings(){return(await this.get("/api/settings/")).json()}async saveSettings(e){const t=await(await this.post("/api/settings/",e)).json();return this.saveSettingsLocally(e),t}saveSettingsLocally(e){try{localStorage.setItem("chat_settings",JSON.stringify(e)),this.settings=e,e?.backend?.api_endpoint&&(this.baseUrl=e.backend.api_endpoint)}catch(o){console.error("Error saving settings locally:",o)}}async getBackendSettings(){return(await this.get("/api/settings/backend")).json()}async saveBackendSettings(e){return(await this.post("/api/settings/backend",{settings:e})).json()}async searchKnowledge(e,o=10){return(await this.post("/api/knowledge_base/search",{query:e,limit:o})).json()}async addTextToKnowledge(e,o="",t="Manual Entry"){return(await this.post("/api/knowledge_base/add_text",{text:e,title:o,source:t})).json()}async addUrlToKnowledge(e,o="fetch"){return(await this.post("/api/knowledge_base/add_url",{url:e,method:o})).json()}async addFileToKnowledge(e){const o=new FormData;return o.append("file",e),(await this.post("/api/knowledge_base/add_file",o)).json()}async exportKnowledge(){return(await this.get("/api/knowledge_base/export")).blob()}async cleanupKnowledge(){return(await this.post("/api/knowledge_base/cleanup")).json()}async getKnowledgeStats(){return(await this.get("/api/knowledge_base/stats")).json()}async getDetailedKnowledgeStats(){return(await this.get("/api/knowledge_base/detailed_stats")).json()}async getPrompts(){return(await this.get("/api/prompts/")).json()}async savePrompt(e,o){return(await this.post(`/api/prompts/${e}`,{content:o})).json()}async revertPrompt(e){return(await this.post(`/api/prompts/${e}/revert`)).json()}async checkHealth(){return(await this.get("/api/system/health")).json()}async restartBackend(){return(await this.post("/api/system/restart")).json()}async cleanupMessages(){return(await this.post("/api/chats/cleanup_messages")).json()}async cleanupAllChatData(){return(await this.post("/api/chats/cleanup_all")).json()}async listFiles(e=""){return(await this.get(`/api/files/list?path=${encodeURIComponent(e)}`)).json()}async uploadFile(e,o="",t=!1){const i=new FormData;return i.append("file",e),i.append("path",o),i.append("overwrite",t.toString()),(await this.post("/api/files/upload",i)).json()}async viewFile(e){return(await this.get(`/api/files/view/${encodeURIComponent(e)}`)).json()}async deleteFile(e){return(await this.delete("/api/files/delete",{headers:{"Content-Type":"application/json"},body:JSON.stringify({path:e})})).json()}async downloadFile(e){return(await this.get(`/api/files/download/${encodeURIComponent(e)}`)).blob()}async createDirectory(e="",o){const t=new FormData;return t.append("path",e),t.append("name",o),(await this.post("/api/files/create_directory",t)).json()}async getFileStats(){return(await this.get("/api/files/stats")).json()}async uploadFileToEndpoint(e,o,t={}){const i=new FormData;return i.append("file",o),Object.keys(t).forEach(l=>{i.append(l,t[l])}),(await this.post(e,i)).json()}async downloadFileFromEndpoint(e,o=null){const i=await(await this.get(e)).blob();if(o){const r=window.URL.createObjectURL(i),l=document.createElement("a");l.href=r,l.download=o,document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(r)}return i}async testConnection(){try{const e=Date.now();await this.checkHealth();const o=Date.now()-e;return{connected:!0,latency:o,message:`Connected (${o}ms)`}}catch(e){return{connected:!1,error:e.message,message:`Connection failed: ${e.message}`}}}async batchRequest(e){const o=[];for(const t of e)try{const i=await this.request(t.endpoint,t.options);o.push({success:!0,data:await i.json(),request:t})}catch(i){o.push({success:!1,error:i.message,request:t})}return o}setTimeout(e){this.timeout=e}getTimeout(){return this.timeout}setBaseUrl(e){this.baseUrl=e,this.settings.backend?this.settings.backend.api_endpoint=e:this.settings.backend={api_endpoint:e},this.saveSettingsLocally(this.settings)}getBaseUrl(){return this.baseUrl}handleApiError(e,o=""){console.error(`API Error${o?` in ${o}`:""}:`,e);let t="An unexpected error occurred.";return e.message.includes("timeout")?t="Request timed out. Please check your connection and try again.":e.message.includes("HTTP 404")?t="The requested resource was not found.":e.message.includes("HTTP 403")?t="Access denied. Please check your permissions.":e.message.includes("HTTP 500")?t="Server error. Please try again later.":e.message.includes("Failed to fetch")&&(t="Cannot connect to the server. Please check if the backend is running."),{error:e.message,userMessage:t,context:o}}async isEndpointAvailable(e){try{return await this.get(e),!0}catch{return!1}}async getApiStatus(){const e=["/api/health","/api/chats","/api/settings/","/api/prompts"],o={baseUrl:this.baseUrl,timestamp:new Date().toISOString(),endpoints:{}};for(const t of e)try{const i=Date.now();await this.get(t),o.endpoints[t]={available:!0,latency:Date.now()-i}}catch(i){o.endpoints[t]={available:!1,error:i.message}}return o}};const Ie=new na;class zf{constructor(){this.client=Ie}async get(e){return await(await this.client.get(e)).json()}async post(e,o){return await(await this.client.post(e,o)).json()}async put(e,o){return await(await this.client.put(e,o)).json()}async delete(e){return await(await this.client.delete(e)).json()}async sendMessage(e,o={}){return this.post("/api/chat",{message:e,...o})}async getChatHistory(){return this.get("/api/chat/history")}async getChatMessages(e){return this.get(`/api/chat/history/${e}`)}async deleteChatHistory(e){return this.delete(`/api/chat/history/${e}`)}async getWorkflows(){return this.get("/api/workflow/workflows")}async getWorkflowDetails(e){return this.get(`/api/workflow/workflow/${e}`)}async getWorkflowStatus(e){return this.get(`/api/workflow/workflow/${e}/status`)}async approveWorkflowStep(e,o){return this.post(`/api/workflow/workflow/${e}/approve`,o)}async executeWorkflow(e){return this.post("/api/workflow/execute",e)}async cancelWorkflow(e){return this.delete(`/api/workflow/workflow/${e}`)}async getPendingApprovals(e){return this.get(`/api/workflow/workflow/${e}/pending_approvals`)}async performResearch(e,o="general",t=5){return this.post("/api/research/research",{query:e,focus:o,max_results:t})}async researchTools(e){return this.post("/api/research/research/tools",{query:e,focus:"installation_usage"})}async getInstallationGuide(e){return this.get(`/api/research/installation/${e}`)}async getSettings(){return this.get("/api/settings/")}async updateSettings(e){return this.post("/api/settings/",e)}async saveSettings(e){return this.updateSettings(e)}async getSystemStatus(){return this.get("/api/system/status")}async getSystemHealth(){return this.get("/api/system/health")}async getSystemInfo(){return this.get("/api/system/info")}async executeCommand(e,o={}){return this.post("/api/terminal/execute",{command:e,...o})}async interruptProcess(){return this.post("/api/terminal/interrupt")}async killAllProcesses(){return this.post("/api/terminal/kill")}async searchKnowledge(e,o=5){return this.post("/api/knowledge_base/search",{query:e,n_results:o})}async searchKnowledgeBase(e,o=5){return this.searchKnowledge(e,o)}async addKnowledge(e,o={}){return this.post("/api/knowledge_base/add",{content:e,metadata:o})}}const lt=new zf,Jf={class:"workflow-approval"},Yf={class:"workflows-section"},Qf={key:0,class:"loading"},Zf={key:1,class:"no-workflows"},Xf={key:2,class:"workflows-list"},em=["onClick"],tm={class:"workflow-header"},sm={class:"workflow-title"},nm={class:"workflow-meta"},om={class:"meta-item"},lm={class:"meta-item"},im={class:"meta-item"},am={class:"workflow-progress"},rm={class:"progress-bar"},cm={key:0,class:"workflow-details"},dm={class:"workflow-info"},um={class:"info-row"},fm={class:"info-row"},mm={class:"value"},pm={class:"info-row"},gm={class:"workflow-steps"},vm={class:"steps-list"},hm={class:"step-header"},bm={class:"step-number"},ym={class:"step-content"},wm={class:"step-title"},km={class:"step-meta"},_m={class:"agent-type"},xm={class:"step-status"},Cm={key:0,class:"approval-required"},Sm={class:"step-status-icon"},Tm={key:0,class:"fas fa-check-circle text-success"},Em={key:1,class:"fas fa-clock text-warning"},Im={key:2,class:"fas fa-spinner fa-spin text-info"},Pm={key:3,class:"fas fa-times-circle text-danger"},Rm={key:4,class:"fas fa-circle text-muted"},Dm={key:0,class:"approval-interface"},Mm={class:"approval-details"},Am={key:0},Um={class:"approval-actions"},Lm=["onClick","disabled"],Om=["onClick","disabled"],Fm={key:1,class:"step-result"},Nm={class:"result-content"},Vm={class:"workflow-actions"},jm=Vo({__name:"WorkflowApproval",setup(s){const e=b(!1),o=b([]),t=b(null),i=b(null),r=b([]),l=b(new Set),a=b(null),u=P=>new Date(P).toLocaleString(),p=async()=>{try{e.value=!0;const P=await lt.get("/api/workflow/workflows");o.value=P.workflows||[]}catch(P){console.error("Failed to load workflows:",P)}finally{e.value=!1}},f=async P=>{if(t.value!==P){t.value=P;try{const x=await lt.get(`/api/workflow/workflow/${P}`);i.value=x.workflow,r.value=x.workflow.steps||[]}catch(x){console.error("Failed to load workflow details:",x)}}},v=async(P,x)=>{try{l.value.add(x),await lt.post(`/api/workflow/workflow/${P}/approve`,{workflow_id:P,step_id:x,approved:!0,user_input:null,timestamp:Date.now()}),await f(P)}catch(_){console.error("Failed to approve step:",_)}finally{l.value.delete(x)}},w=async(P,x)=>{try{l.value.add(x),await lt.post(`/api/workflow/workflow/${P}/approve`,{workflow_id:P,step_id:x,approved:!1,user_input:null,timestamp:Date.now()}),await f(P)}catch(_){console.error("Failed to deny step:",_)}finally{l.value.delete(x)}},k=async P=>{if(confirm("Are you sure you want to cancel this workflow?"))try{await lt.delete(`/api/workflow/workflow/${P}`),await p(),t.value===P&&(t.value=null,i.value=null,r.value=[])}catch(x){console.error("Failed to cancel workflow:",x)}},h=async()=>{await p(),t.value&&await f(t.value)};return it(()=>{p(),a.value=window.setInterval(()=>{h()},5e3)}),ut(()=>{a.value&&clearInterval(a.value)}),(P,x)=>(c(),d("div",Jf,[n("div",Yf,[x[9]||(x[9]=n("h3",{class:"section-title"},[n("i",{class:"fas fa-project-diagram"}),U(" Active Workflows ")],-1)),e.value?(c(),d("div",Qf,x[3]||(x[3]=[n("i",{class:"fas fa-spinner fa-spin"},null,-1),U(" Loading workflows... ",-1)]))):o.value.length===0?(c(),d("div",Zf,x[4]||(x[4]=[n("i",{class:"fas fa-info-circle"},null,-1),U(" No active workflows ",-1)]))):(c(),d("div",Xf,[(c(!0),d(pe,null,ye(o.value,_=>(c(),d("div",{key:_.workflow_id,class:G(["workflow-card",{selected:t.value===_.workflow_id}]),onClick:S=>f(_.workflow_id),tabindex:"0",onKeyup:[x[0]||(x[0]=ve(S=>S.target?.click(),["enter"])),x[1]||(x[1]=ve(S=>S.target?.click(),["space"]))]},[n("div",tm,[n("div",sm,[x[5]||(x[5]=n("i",{class:"fas fa-cogs"},null,-1)),U(" "+m(_.user_message),1)]),n("div",{class:G(["workflow-status",_.status])},m(_.status),3)]),n("div",nm,[n("div",om,[x[6]||(x[6]=n("i",{class:"fas fa-layer-group"},null,-1)),U(" "+m(_.current_step+1)+"/"+m(_.total_steps)+" steps ",1)]),n("div",lm,[x[7]||(x[7]=n("i",{class:"fas fa-clock"},null,-1)),U(" "+m(_.estimated_duration),1)]),n("div",im,[x[8]||(x[8]=n("i",{class:"fas fa-users"},null,-1)),U(" "+m(_.agents_involved.join(", ")),1)])]),n("div",am,[n("div",rm,[n("div",{class:"progress-fill",style:ct({width:_.current_step/_.total_steps*100+"%"})},null,4)])])],42,em))),128))]))]),i.value?(c(),d("div",cm,[x[24]||(x[24]=n("h3",{class:"section-title"},[n("i",{class:"fas fa-tasks"}),U(" Workflow Details ")],-1)),n("div",dm,[n("div",um,[x[10]||(x[10]=n("span",{class:"label"},"Classification:",-1)),n("span",{class:G(["value classification",i.value.classification])},m(i.value.classification),3)]),n("div",fm,[x[11]||(x[11]=n("span",{class:"label"},"Created:",-1)),n("span",mm,m(u(i.value.created_at)),1)]),n("div",pm,[x[12]||(x[12]=n("span",{class:"label"},"Status:",-1)),n("span",{class:G(["value status",i.value.status])},m(i.value.status),3)])]),n("div",gm,[x[21]||(x[21]=n("h4",null,"Workflow Steps",-1)),n("div",vm,[(c(!0),d(pe,null,ye(r.value,(_,S)=>(c(),d("div",{key:_.step_id,class:G(["step-card",{current:S===i.value.current_step,completed:_.status==="completed","waiting-approval":_.status==="waiting_approval",failed:_.status==="failed"}])},[n("div",hm,[n("div",bm,m(S+1),1),n("div",ym,[n("div",wm,m(_.description),1),n("div",km,[n("span",_m,m(_.agent_type),1),n("span",xm,m(_.status),1),_.requires_approval?(c(),d("span",Cm,x[13]||(x[13]=[n("i",{class:"fas fa-user-check"},null,-1),U(" Approval Required ",-1)]))):C("",!0)])]),n("div",Sm,[_.status==="completed"?(c(),d("i",Tm)):_.status==="waiting_approval"?(c(),d("i",Em)):_.status==="in_progress"?(c(),d("i",Im)):_.status==="failed"?(c(),d("i",Pm)):(c(),d("i",Rm))])]),_.status==="waiting_approval"?(c(),d("div",Dm,[x[19]||(x[19]=n("div",{class:"approval-message"},[n("i",{class:"fas fa-exclamation-triangle"}),U(" This step requires your approval to continue. ")],-1)),n("div",Mm,[n("p",null,[x[14]||(x[14]=n("strong",null,"Agent:",-1)),U(" "+m(_.agent_type),1)]),n("p",null,[x[15]||(x[15]=n("strong",null,"Action:",-1)),U(" "+m(_.action),1)]),_.result?(c(),d("p",Am,[x[16]||(x[16]=n("strong",null,"Result:",-1)),U(" "+m(_.result),1)])):C("",!0)]),n("div",Um,[n("button",{class:"btn btn-success",onClick:L=>v(i.value.workflow_id,_.step_id),disabled:l.value.has(_.step_id),"aria-label":"Confirm"},x[17]||(x[17]=[n("i",{class:"fas fa-check"},null,-1),U(" Approve ",-1)]),8,Lm),n("button",{class:"btn btn-danger",onClick:L=>w(i.value.workflow_id,_.step_id),disabled:l.value.has(_.step_id),"aria-label":"Close"},x[18]||(x[18]=[n("i",{class:"fas fa-times"},null,-1),U(" Deny ",-1)]),8,Om)])])):C("",!0),_.result&&_.status!=="waiting_approval"?(c(),d("div",Fm,[x[20]||(x[20]=n("div",{class:"result-label"},"Result:",-1)),n("div",Nm,m(_.result),1)])):C("",!0)],2))),128))])]),n("div",Vm,[i.value.status==="executing"||i.value.status==="waiting_approval"?(c(),d("button",{key:0,class:"btn btn-danger",onClick:x[2]||(x[2]=_=>k(i.value.workflow_id)),"aria-label":"Cancel"},x[22]||(x[22]=[n("i",{class:"fas fa-stop"},null,-1),U(" Cancel Workflow ",-1)]))):C("",!0),n("button",{class:"btn btn-secondary",onClick:h,"aria-label":"Refresh"},x[23]||(x[23]=[n("i",{class:"fas fa-sync"},null,-1),U(" Refresh ",-1)]))])])):C("",!0)]))}}),oa=Xe(jm,[["__scopeId","data-v-2ee95f1d"]]),Bm={key:0,class:"workflow-progress-widget"},Km={class:"workflow-info"},Wm={class:"workflow-title"},Hm={class:"workflow-progress"},qm={class:"progress-bar"},Gm={class:"progress-text"},$m={class:"widget-controls"},zm={key:0,class:"widget-content"},Jm={class:"workflow-details"},Ym={class:"detail-row"},Qm={class:"detail-row"},Zm={class:"value"},Xm={class:"detail-row"},ep={class:"value"},tp={key:0,class:"current-step"},sp={class:"step-info"},np={class:"step-title"},op={class:"step-meta"},lp={class:"agent"},ip={__name:"WorkflowProgressWidget",props:{workflowId:String},emits:["open-full-view","workflow-cancelled"],setup(s,{emit:e}){const o=s,t=e,i=b(null),r=b([]),l=b(!1),a=b(null),u=Se(()=>i.value?i.value.current_step/i.value.total_steps*100:0),p=Se(()=>i.value?i.value.current_step+1:0),f=Se(()=>i.value?i.value.total_steps:0),v=Se(()=>!r.value||!i.value?null:r.value[i.value.current_step]||null),w=Se(()=>v.value&&v.value.status==="waiting_approval"),k=async()=>{if(o.workflowId)try{const S=await lt.get(`/api/workflow/workflow/${o.workflowId}`);i.value=S.workflow,r.value=S.workflow.steps||[]}catch(S){console.error("Failed to load workflow data:",S)}},h=()=>{l.value=!l.value},P=()=>{t("open-full-view","approvals")},x=()=>{t("open-full-view","workflow")},_=async()=>{if(confirm("Are you sure you want to cancel this workflow?"))try{await lt.delete(`/api/workflow/workflow/${o.workflowId}`),i.value=null,t("workflow-cancelled",o.workflowId)}catch(S){console.error("Failed to cancel workflow:",S)}};return it(()=>{k(),a.value=setInterval(()=>{k()},3e3)}),ut(()=>{a.value&&clearInterval(a.value)}),(S,L)=>i.value?(c(),d("div",Bm,[n("div",{class:"widget-header",onClick:h,tabindex:"0",onKeyup:[L[0]||(L[0]=ve(A=>A.target.click(),["enter"])),L[1]||(L[1]=ve(A=>A.target.click(),["space"]))]},[n("div",Km,[n("div",Wm,[L[2]||(L[2]=n("i",{class:"fas fa-cogs"},null,-1)),U(" "+m(i.value.user_message),1)]),n("div",Hm,[n("div",qm,[n("div",{class:"progress-fill",style:ct({width:u.value+"%"})},null,4)]),n("span",Gm,m(p.value)+"/"+m(f.value)+" - "+m(i.value.status),1)])]),n("div",$m,[w.value?(c(),d("button",{key:0,onClick:ze(P,["stop"]),class:"btn-approval","aria-label":"Warning"},L[3]||(L[3]=[n("i",{class:"fas fa-exclamation-circle"},null,-1),U(" Approval Required ",-1)]))):C("",!0),n("button",{onClick:ze(h,["stop"]),class:"btn-toggle","aria-label":"Expand"},[n("i",{class:G(l.value?"fas fa-chevron-up":"fas fa-chevron-down")},null,2)])])],32),l.value?(c(),d("div",zm,[n("div",Jm,[n("div",Ym,[L[4]||(L[4]=n("span",{class:"label"},"Classification:",-1)),n("span",{class:G(["value",i.value.classification])},m(i.value.classification),3)]),n("div",Qm,[L[5]||(L[5]=n("span",{class:"label"},"Estimated Duration:",-1)),n("span",Zm,m(i.value.estimated_duration),1)]),n("div",Xm,[L[6]||(L[6]=n("span",{class:"label"},"Agents Involved:",-1)),n("span",ep,m(i.value.agents_involved.join(", ")),1)])]),v.value?(c(),d("div",tp,[L[7]||(L[7]=n("h5",null,"Current Step:",-1)),n("div",sp,[n("div",np,m(v.value.description),1),n("div",op,[n("span",lp,m(v.value.agent_type),1),n("span",{class:G(["status",v.value.status])},m(v.value.status),3)])])])):C("",!0),n("div",{class:"widget-actions"},[n("button",{onClick:x,class:"btn-view","aria-label":"Button"},L[8]||(L[8]=[n("i",{class:"fas fa-external-link-alt"},null,-1),U(" View Full Workflow ",-1)])),n("button",{onClick:_,class:"btn-cancel","aria-label":"Cancel"},L[9]||(L[9]=[n("i",{class:"fas fa-stop"},null,-1),U(" Cancel ",-1)]))])])):C("",!0)])):C("",!0)}},ap=Xe(ip,[["__scopeId","data-v-fe6afdac"]]),Ns=b([]);let rp=1;function cp(){const s=(t,i="info",r=3e3)=>{const l=rp++,a={id:l,message:t,type:i,duration:r};return Ns.value.push(a),r>0&&setTimeout(()=>{e(l)},r),l},e=t=>{const i=Ns.value.findIndex(r=>r.id===t);i>-1&&Ns.value.splice(i,1)};return{toasts:Ns,showToast:s,removeToast:e,clearAllToasts:()=>{Ns.value.splice(0)}}}const dp={key:0,class:"context-info"},up={class:"context-topic"},fp={class:"value"},mp={key:0,class:"context-keywords"},pp={class:"keywords-list"},gp={class:"context-stats"},vp={class:"stat"},hp={class:"stat-value"},bp={class:"stat"},yp={class:"stat-value"},wp={class:"knowledge-items"},kp={class:"items-list"},_p={class:"item-header"},xp={class:"item-selection"},Cp=["id","onUpdate:modelValue","onChange"],Sp=["for"],Tp={key:0,class:"item-details"},Ep={class:"content-preview"},Ip={class:"decision-options"},Pp={class:"decision-option"},Rp=["name","onUpdate:modelValue"],Dp={class:"decision-option"},Mp=["name","onUpdate:modelValue"],Ap={class:"decision-option"},Up=["name","onUpdate:modelValue"],Lp={key:0,class:"item-metadata"},Op={class:"metadata-value"},Fp={key:0,class:"metadata-label"},Np={key:1,class:"metadata-value"},Vp={key:1,class:"bulk-actions"},jp={class:"bulk-buttons"},Bp=["disabled"],Kp=["disabled"],Wp=["disabled"],Hp={class:"compile-section"},qp={class:"compile-options"},Gp={class:"compile-option"},$p={class:"compile-title"},zp={class:"dialog-actions"},Jp={class:"action-summary"},Yp={key:0,class:"summary-item add"},Qp={key:1,class:"summary-item temp"},Zp={key:2,class:"summary-item delete"},Xp={class:"action-buttons"},eg=["disabled"],tg={__name:"KnowledgePersistenceDialog",props:{visible:{type:Boolean,default:!1},chatId:{type:String,required:!1,default:null},chatContext:{type:Object,default:null}},emits:["close","decisions-applied","chat-compiled"],setup(s,{emit:e}){const o=s,t=e,{showToast:i}=cp(),r=b([]),l=b({}),a=b({}),u=b({includeSystemMessages:!1,title:""}),p=b(!1),f=Se(()=>Object.values(l.value).some(z=>z)),v=Se(()=>Object.keys(a.value).length>0),w=Se(()=>{const z={add_to_kb:0,keep_temporary:0,delete:0};return Object.entries(a.value).forEach(([q,X])=>{l.value[q]&&X&&z[X]++}),z}),k=async()=>{try{p.value=!0;const z=await lt.get(`/api/chat_knowledge/knowledge/pending/${o.chatId}`);z.success&&(r.value=z.pending_items,r.value.forEach(q=>{l.value[q.id]=!1,a.value[q.id]=q.suggested_action||"keep_temporary"}))}catch(z){console.error("Failed to load pending knowledge:",z),i("Failed to load knowledge items","error")}finally{p.value=!1}},h=(z,q)=>z.length<=q?z:z.substring(0,q)+"...",P=z=>({add_to_kb:" Suggested: Add to KB",keep_temporary:" Suggested: Keep temporary",delete:" Suggested: Delete"})[z]||"",x=z=>new Date(z).toLocaleString(),_=z=>{l.value[z]||delete a.value[z]},S=()=>{r.value.forEach(z=>{l.value[z.id]=!0})},L=()=>{r.value.forEach(z=>{l.value[z.id]=!1}),a.value={}},A=z=>{Object.keys(l.value).forEach(q=>{l.value[q]&&(a.value[q]=z)})},ae=async()=>{try{p.value=!0;const z=[];Object.entries(a.value).forEach(([q,X])=>{l.value[q]&&z.push({chat_id:o.chatId,knowledge_id:q,decision:X})});for(const q of z)await lt.post("/api/chat_knowledge/knowledge/decide",q);i(`Applied ${z.length} knowledge decisions`,"success"),t("decisions-applied",z),be()}catch(z){console.error("Failed to apply decisions:",z),i("Failed to apply knowledge decisions","error")}finally{p.value=!1}},se=async()=>{try{p.value=!0;const z=await lt.post("/api/chat_knowledge/compile",{chat_id:o.chatId,title:u.value.title||null,include_system_messages:u.value.includeSystemMessages});z.success&&(i("Chat compiled to knowledge base successfully","success"),t("chat-compiled",z.compiled),be())}catch(z){console.error("Failed to compile chat:",z),i("Failed to compile chat to knowledge base","error")}finally{p.value=!1}},be=()=>{t("close")};return it(()=>{o.visible&&o.chatId&&k()}),yt(()=>o.visible,z=>{z&&o.chatId&&k()}),(z,q)=>s.visible?(c(),d("div",{key:0,class:"dialog-overlay",onClick:be,tabindex:"0",onKeyup:[q[8]||(q[8]=ve(X=>X.target.click(),["enter"])),q[9]||(q[9]=ve(X=>X.target.click(),["space"]))]},[n("div",{class:"knowledge-dialog",onClick:q[5]||(q[5]=ze(()=>{},["stop"])),tabindex:"0",onKeyup:[q[6]||(q[6]=ve(X=>X.target.click(),["enter"])),q[7]||(q[7]=ve(X=>X.target.click(),["space"]))]},[n("div",{class:"dialog-header"},[q[10]||(q[10]=n("h3",{class:"dialog-title"}," Knowledge Management Decision",-1)),n("button",{class:"close-button",onClick:be,"aria-label":"Action button"},"")]),s.chatContext?(c(),d("div",dp,[n("div",up,[q[11]||(q[11]=n("span",{class:"label"},"Topic:",-1)),n("span",fp,m(s.chatContext.topic||"General Discussion"),1)]),s.chatContext.keywords?.length?(c(),d("div",mp,[q[12]||(q[12]=n("span",{class:"label"},"Keywords:",-1)),n("div",pp,[(c(!0),d(pe,null,ye(s.chatContext.keywords,X=>(c(),d("span",{key:X,class:"keyword-tag"},m(X),1))),128))])])):C("",!0),n("div",gp,[n("div",vp,[n("span",hp,m(r.value.length),1),q[13]||(q[13]=n("span",{class:"stat-label"},"Knowledge Items",-1))]),n("div",bp,[n("span",yp,m(s.chatContext.file_count||0),1),q[14]||(q[14]=n("span",{class:"stat-label"},"Associated Files",-1))])])])):C("",!0),n("div",wp,[q[22]||(q[22]=n("h4",{class:"section-title"}," Review Knowledge Items",-1)),n("div",kp,[(c(!0),d(pe,null,ye(r.value,X=>(c(),d("div",{key:X.id,class:G(["knowledge-item",{selected:l.value[X.id]}])},[n("div",_p,[n("div",xp,[B(n("input",{type:"checkbox",id:`item-${X.id}`,"onUpdate:modelValue":Ee=>l.value[X.id]=Ee,onChange:Ee=>_(X.id)},null,40,Cp),[[Ne,l.value[X.id]]]),n("label",{for:`item-${X.id}`,class:"item-preview"},m(h(X.content,100)),9,Sp)]),n("div",{class:G(["item-suggestion",X.suggested_action])},m(P(X.suggested_action)),3)]),l.value[X.id]?(c(),d("div",Tp,[n("div",Ep,[n("pre",null,m(X.content),1)]),n("div",Ip,[n("label",Pp,[B(n("input",{type:"radio",name:`decision-${X.id}`,value:"add_to_kb","onUpdate:modelValue":Ee=>a.value[X.id]=Ee},null,8,Rp),[[gs,a.value[X.id]]]),q[15]||(q[15]=n("span",{class:"option-label"},[n("span",{class:"option-icon"},""),U(" Add to Knowledge Base (Permanent) ")],-1)),q[16]||(q[16]=n("span",{class:"option-description"}," Store permanently for future reference across all chats ",-1))]),n("label",Dp,[B(n("input",{type:"radio",name:`decision-${X.id}`,value:"keep_temporary","onUpdate:modelValue":Ee=>a.value[X.id]=Ee},null,8,Mp),[[gs,a.value[X.id]]]),q[17]||(q[17]=n("span",{class:"option-label"},[n("span",{class:"option-icon"},""),U(" Keep for This Session Only ")],-1)),q[18]||(q[18]=n("span",{class:"option-description"}," Available only during this chat session ",-1))]),n("label",Ap,[B(n("input",{type:"radio",name:`decision-${X.id}`,value:"delete","onUpdate:modelValue":Ee=>a.value[X.id]=Ee},null,8,Up),[[gs,a.value[X.id]]]),q[19]||(q[19]=n("span",{class:"option-label"},[n("span",{class:"option-icon"},""),U(" Delete ")],-1)),q[20]||(q[20]=n("span",{class:"option-description"}," Remove this knowledge item completely ",-1))])]),X.metadata?(c(),d("div",Lp,[q[21]||(q[21]=n("span",{class:"metadata-label"},"Created:",-1)),n("span",Op,m(x(X.created_at)),1),X.metadata.source?(c(),d("span",Fp,"Source:")):C("",!0),X.metadata.source?(c(),d("span",Np,m(X.metadata.source),1)):C("",!0)])):C("",!0)])):C("",!0)],2))),128))])]),r.value.length>1?(c(),d("div",Vp,[q[23]||(q[23]=n("h4",{class:"section-title"}," Bulk Actions",-1)),n("div",jp,[n("button",{onClick:S,class:"bulk-button","aria-label":" select all"},"  Select All "),n("button",{onClick:L,class:"bulk-button","aria-label":" deselect all"},"  Deselect All "),n("button",{onClick:q[0]||(q[0]=X=>A("add_to_kb")),disabled:!f.value,class:"bulk-button add","aria-label":" add selected to kb"},"  Add Selected to KB ",8,Bp),n("button",{onClick:q[1]||(q[1]=X=>A("keep_temporary")),disabled:!f.value,class:"bulk-button temp","aria-label":" keep selected temporarily"},"  Keep Selected Temporarily ",8,Kp),n("button",{onClick:q[2]||(q[2]=X=>A("delete")),disabled:!f.value,class:"bulk-button delete","aria-label":" delete selected"},"  Delete Selected ",8,Wp)])])):C("",!0),n("div",Hp,[q[26]||(q[26]=n("h4",{class:"section-title"}," Compile Entire Chat",-1)),q[27]||(q[27]=n("div",{class:"compile-description"}," Convert the entire chat conversation into a comprehensive knowledge base entry ",-1)),n("div",qp,[n("label",Gp,[B(n("input",{type:"checkbox","onUpdate:modelValue":q[3]||(q[3]=X=>u.value.includeSystemMessages=X)},null,512),[[Ne,u.value.includeSystemMessages]]),q[24]||(q[24]=U(" Include system messages ",-1))]),n("div",$p,[q[25]||(q[25]=n("label",null,"Title for compiled entry:",-1)),B(n("input",{type:"text","onUpdate:modelValue":q[4]||(q[4]=X=>u.value.title=X),placeholder:"Enter a descriptive title...",class:"title-input"},null,512),[[he,u.value.title]])])]),n("button",{onClick:se,class:"compile-button","aria-label":" compile chat to knowledge base"},"  Compile Chat to Knowledge Base ")]),n("div",zp,[n("div",Jp,[w.value.add_to_kb>0?(c(),d("span",Yp,"  "+m(w.value.add_to_kb)+" to KB ",1)):C("",!0),w.value.keep_temporary>0?(c(),d("span",Qp,"  "+m(w.value.keep_temporary)+" temporary ",1)):C("",!0),w.value.delete>0?(c(),d("span",Zp,"  "+m(w.value.delete)+" to delete ",1)):C("",!0)]),n("div",Xp,[n("button",{onClick:ae,class:"primary-button",disabled:!v.value,"aria-label":" apply decisions"},"  Apply Decisions ",8,eg),n("button",{onClick:be,class:"secondary-button","aria-label":" cancel"},"  Cancel ")])])],32)],32)):C("",!0)}},sg=Xe(tg,[["__scopeId","data-v-92184e2e"]]),ng={name:"CommandPermissionDialog",props:{show:{type:Boolean,default:!1},command:{type:String,default:""},purpose:{type:String,default:""},riskLevel:{type:String,default:"LOW",validator:s=>["LOW","MEDIUM","HIGH","CRITICAL"].includes(s)},chatId:{type:String,required:!1,default:null},originalMessage:{type:String,default:""}},emits:["approved","denied","commented","close"],setup(s,{emit:e}){const o=b(!1),t=b(!1),i=b(!1),r=b(""),l=b(!1),a=b(""),u=async()=>{i.value=!0,r.value="";try{const x=await lt.post("/chat/direct",{message:"yes",chat_id:s.chatId,remember_choice:t.value});x.data?(e("approved",{command:s.command,result:x.data,rememberChoice:t.value}),k()):r.value="Command execution failed"}catch(x){console.error("Command approval error:",x),r.value=x.response?.data?.message||"Command execution failed"}finally{i.value=!1}},p=async()=>{try{await lt.post("/chat/direct",{message:"no",chat_id:s.chatId}),e("denied",{command:s.command,reason:"User denied permission"}),k()}catch(x){console.error("Command denial error:",x),e("denied",{command:s.command,reason:"User denied permission"}),k()}},f=()=>{l.value=!0,r.value=""},v=async()=>{if(!a.value.trim()){r.value="Please enter a comment";return}i.value=!0,r.value="";try{const x=await lt.post("/chat/direct",{message:`Command feedback: ${a.value}`,chat_id:s.chatId});e("commented",{command:s.command,comment:a.value,response:x.data}),k()}catch(x){console.error("Comment submission error:",x),r.value=x.response?.data?.message||"Failed to submit comment"}finally{i.value=!1}},w=()=>{l.value=!1,a.value="",r.value=""},k=()=>{o.value=!1,r.value="",i.value=!1,t.value=!1,e("close")},h=x=>{x.key==="Escape"&&o.value&&!i.value&&p()};return it(()=>{o.value=s.show,document.addEventListener("keydown",h)}),ut(()=>{document.removeEventListener("keydown",h)}),{showDialog:o,rememberForSession:t,isProcessing:i,error:r,showCommentInput:l,commentText:a,handleAllow:u,handleDeny:p,handleComment:f,submitComment:v,cancelComment:w,updateShow:x=>{o.value=x,x&&(r.value="")}}},watch:{show:{handler(s){this.updateShow(s)},immediate:!0}}},og={key:0,class:"command-overlay"},lg={class:"command-dialog"},ig={class:"command-header"},ag={class:"command-title"},rg={class:"command-subtitle"},cg={class:"command-body"},dg={class:"command-details"},ug={class:"operation-info"},fg={class:"info-item"},mg={class:"command"},pg={key:0,class:"info-item"},gg={class:"purpose"},vg={key:1,class:"info-item"},hg={class:"command-form"},bg={class:"security-options"},yg={class:"checkbox-label"},wg=["disabled"],kg={key:0,class:"warning-message"},_g={key:0,class:"comment-section"},xg={class:"comment-input-group"},Cg=["disabled"],Sg={class:"comment-actions"},Tg=["disabled"],Eg=["disabled"],Ig={key:0,class:"fas fa-spinner fa-spin"},Pg={key:1,class:"fas fa-paper-plane"},Rg={class:"command-footer"},Dg={class:"button-group"},Mg=["disabled"],Ag=["disabled"],Ug=["disabled"],Lg={key:0,class:"fas fa-spinner fa-spin"},Og={key:1,class:"fas fa-check"};function Fg(s,e,o,t,i,r){return t.showDialog?(c(),d("div",og,[n("div",lg,[n("div",ig,[e[8]||(e[8]=n("div",{class:"command-icon"},[n("i",{class:"fas fa-terminal"})],-1)),n("div",ag,[e[7]||(e[7]=n("h3",null,"Command Permission Required",-1)),n("p",rg,m(o.purpose||"The AI assistant needs to run a command"),1)])]),n("div",cg,[n("div",dg,[e[12]||(e[12]=n("h4",null,"Command Details:",-1)),n("div",ug,[n("div",fg,[e[9]||(e[9]=n("span",{class:"label"},"Command:",-1)),n("code",mg,m(o.command||"system operation"),1)]),o.purpose?(c(),d("div",pg,[e[10]||(e[10]=n("span",{class:"label"},"Purpose:",-1)),n("span",gg,m(o.purpose),1)])):C("",!0),o.riskLevel?(c(),d("div",vg,[e[11]||(e[11]=n("span",{class:"label"},"Risk Level:",-1)),n("span",{class:G(["risk-badge",o.riskLevel.toLowerCase()])},m(o.riskLevel),3)])):C("",!0)])]),n("div",hg,[n("div",bg,[n("label",yg,[B(n("input",{type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=l=>t.rememberForSession=l),disabled:t.isProcessing},null,8,wg),[[Ne,t.rememberForSession]]),e[13]||(e[13]=n("span",{class:"checkmark"},null,-1)),e[14]||(e[14]=U(" Remember my choice for similar commands this session ",-1))])]),t.error?(c(),d("div",kg,[e[15]||(e[15]=n("i",{class:"fas fa-exclamation-triangle"},null,-1)),n("span",null,m(t.error),1)])):C("",!0)]),t.showCommentInput?(c(),d("div",_g,[e[17]||(e[17]=n("div",{class:"comment-header"},[n("h4",null,"Provide Command Feedback"),n("p",null,"Suggest modifications, alternative commands, or execution order changes:")],-1)),n("div",xg,[B(n("textarea",{"onUpdate:modelValue":e[1]||(e[1]=l=>t.commentText=l),placeholder:"e.g., 'Use ip addr instead of ifconfig' or 'Run this after checking disk space first'",class:"comment-textarea",rows:"3",disabled:t.isProcessing},null,8,Cg),[[he,t.commentText]])]),n("div",Sg,[n("button",{class:"btn btn-secondary",onClick:e[2]||(e[2]=(...l)=>t.cancelComment&&t.cancelComment(...l)),disabled:t.isProcessing},e[16]||(e[16]=[n("i",{class:"fas fa-times"},null,-1),U(" Cancel ",-1)]),8,Tg),n("button",{class:"btn btn-primary",onClick:e[3]||(e[3]=(...l)=>t.submitComment&&t.submitComment(...l)),disabled:!t.commentText.trim()||t.isProcessing},[t.isProcessing?(c(),d("i",Ig)):(c(),d("i",Pg)),U(" "+m(t.isProcessing?"Sending...":"Send Feedback"),1)],8,Eg)])])):C("",!0)]),n("div",Rg,[n("div",Dg,[n("button",{class:"btn btn-cancel",onClick:e[4]||(e[4]=(...l)=>t.handleDeny&&t.handleDeny(...l)),disabled:t.isProcessing,"aria-label":"Deny"},e[18]||(e[18]=[n("i",{class:"fas fa-times"},null,-1),U(" Deny ",-1)]),8,Mg),n("button",{class:"btn btn-comment",onClick:e[5]||(e[5]=(...l)=>t.handleComment&&t.handleComment(...l)),disabled:t.isProcessing,"aria-label":"Comment"},e[19]||(e[19]=[n("i",{class:"fas fa-comment"},null,-1),U(" Comment ",-1)]),8,Ag),n("button",{class:G(["btn btn-allow",{processing:t.isProcessing}]),onClick:e[6]||(e[6]=(...l)=>t.handleAllow&&t.handleAllow(...l)),disabled:t.isProcessing,"aria-label":"Allow"},[t.isProcessing?(c(),d("i",Lg)):(c(),d("i",Og)),U(" "+m(t.isProcessing?"Executing...":"Allow"),1)],10,Ug)]),e[20]||(e[20]=n("div",{class:"security-note"},[n("i",{class:"fas fa-info-circle"}),n("span",null,"Commands are executed in a secure environment and logged for security.")],-1))])])])):C("",!0)}const Ng=Xe(ng,[["render",Fg],["__scopeId","data-v-e1b32cfe"]]),Vg={name:"PlaywrightDesktopViewer",setup(){const s=b(!1),e=b(!1),o=b("http://localhost:6080/vnc.html?autoconnect=true&resize=scale"),t=b(null),i=b(null),r=async()=>{try{return(await fetch("/vnc-proxy/",{method:"HEAD"})).ok}catch(k){return console.warn("Playwright health check failed:",k),!0}},l=async()=>{e.value=!0;try{console.log("Connecting to Playwright VNC interface..."),setTimeout(()=>{s.value=!0,e.value=!1,v()},1e3)}catch(k){console.error("Failed to connect to Playwright:",k),e.value=!1}},a=()=>{s.value=!1,w()},u=()=>{t.value&&(t.value.src=t.value.src)},p=()=>{console.log("VNC iframe loaded successfully")},f=()=>{console.error("VNC iframe failed to load"),alert("Failed to load VNC interface. Please check the connection.")},v=()=>{i.value=setInterval(async()=>{!await r()&&s.value&&console.warn("Playwright service became unhealthy")},3e4)},w=()=>{i.value&&(clearInterval(i.value),i.value=null)};return it(()=>{r().then(k=>{k&&console.log("Playwright service is available")})}),ut(()=>{w()}),{isConnected:s,isConnecting:e,vncUrl:o,vncFrame:t,connectToPlaywright:l,disconnectVNC:a,refreshVNC:u,onVNCLoad:p,onVNCError:f}}},jg={class:"playwright-desktop-viewer"},Bg={key:0,class:"connection-overlay"},Kg={class:"connection-status"},Wg=["disabled"],Hg={key:1,class:"vnc-container"},qg={class:"vnc-header"},Gg={class:"vnc-controls"},$g=["src"];function zg(s,e,o,t,i,r){return c(),d("div",jg,[t.isConnected?(c(),d("div",Hg,[n("div",qg,[e[9]||(e[9]=n("h3",{class:"text-sm font-medium"}," Playwright Browser - VNC Session",-1)),n("div",Gg,[n("button",{onClick:e[1]||(e[1]=(...l)=>t.refreshVNC&&t.refreshVNC(...l)),class:"control-btn"},""),n("button",{onClick:e[2]||(e[2]=(...l)=>t.disconnectVNC&&t.disconnectVNC(...l)),class:"control-btn"},"")])]),n("iframe",{ref:"vncFrame",src:t.vncUrl,class:"vnc-iframe",onLoad:e[3]||(e[3]=(...l)=>t.onVNCLoad&&t.onVNCLoad(...l)),onError:e[4]||(e[4]=(...l)=>t.onVNCError&&t.onVNCError(...l))},null,40,$g)])):(c(),d("div",Bg,[n("div",Kg,[e[5]||(e[5]=n("div",{class:"text-4xl mb-4"},"",-1)),e[6]||(e[6]=n("h3",{class:"text-lg font-semibold mb-2"},"Playwright Browser Automation",-1)),e[7]||(e[7]=n("p",{class:"text-sm mb-4"}," Live browser automation with visible desktop streaming via VNC ",-1)),n("button",{onClick:e[0]||(e[0]=(...l)=>t.connectToPlaywright&&t.connectToPlaywright(...l)),disabled:t.isConnecting,class:"connect-btn"},m(t.isConnecting?"Connecting...":"Connect to Browser"),9,Wg),e[8]||(e[8]=n("div",{class:"mt-4 text-xs text-gray-400"}," Port: 6080 (noVNC) | API: 3000 ",-1))])]))])}const Jg=Xe(Vg,[["render",zg],["__scopeId","data-v-15b0112b"]]),Yg={name:"ComputerDesktopViewer",setup(){return{}}},Qg={class:"computer-desktop-viewer p-8 text-center text-gray-500"};function Zg(s,e,o,t,i,r){return c(),d("div",Qg,e[0]||(e[0]=[hs('<div class="max-w-md mx-auto" data-v-94bb39c9><div class="text-4xl mb-4" data-v-94bb39c9></div><h3 class="text-lg font-semibold mb-2" data-v-94bb39c9>Computer Desktop Viewer</h3><p class="text-sm mb-4" data-v-94bb39c9> Desktop streaming is now available via the Playwright Browser component with noVNC integration. </p><div class="info-box p-4 bg-blue-50 border border-blue-200 rounded-lg" data-v-94bb39c9><p class="text-sm text-blue-700 mb-2" data-v-94bb39c9><strong data-v-94bb39c9> Active:</strong> Browser automation desktop available </p><p class="text-xs text-blue-600" data-v-94bb39c9> Access: http://localhost:6080/vnc.html </p></div><div class="mt-4 text-xs text-gray-400" data-v-94bb39c9> Phase 9 Complete - VNC Integration Active </div></div>',1)]))}const Xg=Xe(Yg,[["render",Zg],["__scopeId","data-v-94bb39c9"]]);class ev{baseUrl;timeout;settings;constructor(){this.baseUrl="http://localhost:8001",this.timeout=3e4,this.settings=this.loadSettings(),this.settings?.backend?.api_endpoint&&(this.baseUrl=this.settings.backend.api_endpoint)}loadSettings(){try{const e=localStorage.getItem("chat_settings");return e?JSON.parse(e):{}}catch(e){return console.error("Error loading settings:",e),{}}}async request(e,o={}){const t=`${this.baseUrl}${e}`,i=o.method||"GET",r=performance.now();window.rum&&window.rum.trackUserInteraction("api_call_initiated",null,{method:i,endpoint:e,url:t});const l={headers:{"Content-Type":"application/json",...o.headers},...o};try{const a=new AbortController,u=setTimeout(()=>a.abort(),this.timeout),p=await fetch(t,{...l,signal:a.signal});clearTimeout(u);const f=performance.now();if(!p.ok)throw window.rum&&window.rum.trackApiCall(i,e,r,f,p.status),new Error(`HTTP ${p.status}: ${p.statusText}`);return window.rum&&window.rum.trackApiCall(i,e,r,f,p.status),p}catch(a){const u=performance.now();if(a.name==="AbortError"){const p=new Error(`Request timeout after ${this.timeout}ms`);throw window.rum&&(window.rum.trackApiCall(i,e,r,u,"timeout",p),window.rum.reportCriticalIssue("api_timeout",{method:i,endpoint:e,url:t,duration:u-r,timeout:this.timeout})),p}throw window.rum&&window.rum.trackApiCall(i,e,r,u,"error",a),a}}async get(e,o={}){return this.request(e,{method:"GET",...o})}async post(e,o=null,t={}){const i={method:"POST",...t};return o&&(o instanceof FormData?(i.headers&&i.headers["Content-Type"]&&delete i.headers["Content-Type"],i.body=o):i.body=JSON.stringify(o)),this.request(e,i)}async put(e,o=null,t={}){const i={method:"PUT",...t};return o&&(i.body=JSON.stringify(o)),this.request(e,i)}async delete(e,o={}){return this.request(e,{method:"DELETE",...o})}async sendChatMessage(e,o={}){const t=await this.post("/api/chat",{message:e,...o}),i=t.headers.get("content-type");return i&&i.includes("text/event-stream")?{type:"streaming",response:t}:{type:"json",data:await t.json()}}async createNewChat(){return(await this.post("/api/chats/new")).json()}async getChatList(){return(await this.get("/api/chats")).json()}async getChatMessages(e){return(await this.get(`/api/chats/${e}`)).json()}async saveChatMessages(e,o){return(await this.post(`/api/chats/${e}/save`,{messages:o})).json()}async deleteChat(e){return(await this.delete(`/api/chats/${e}`)).json()}async resetChat(){return(await this.post("/api/reset")).json()}async getSettings(){return(await this.get("/api/settings/")).json()}async saveSettings(e){const t=await(await this.post("/api/settings/",e)).json();return this.saveSettingsLocally(e),t}saveSettingsLocally(e){try{localStorage.setItem("chat_settings",JSON.stringify(e)),this.settings=e,e?.backend?.api_endpoint&&(this.baseUrl=e.backend.api_endpoint)}catch(o){console.error("Error saving settings locally:",o)}}async getBackendSettings(){return(await this.get("/api/settings/backend")).json()}async saveBackendSettings(e){return(await this.post("/api/settings/backend",{settings:e})).json()}async searchKnowledge(e,o=10){return(await this.post("/api/knowledge_base/search",{query:e,limit:o})).json()}async addTextToKnowledge(e,o="",t="Manual Entry"){return(await this.post("/api/knowledge_base/add_text",{text:e,title:o,source:t})).json()}async addUrlToKnowledge(e,o="fetch"){return(await this.post("/api/knowledge_base/add_url",{url:e,method:o})).json()}async addFileToKnowledge(e){const o=new FormData;return o.append("file",e),(await this.post("/api/knowledge_base/add_file",o)).json()}async exportKnowledge(){return(await this.get("/api/knowledge_base/export")).blob()}async cleanupKnowledge(){return(await this.post("/api/knowledge_base/cleanup")).json()}async getKnowledgeStats(){return(await this.get("/api/knowledge_base/stats")).json()}async getDetailedKnowledgeStats(){return(await this.get("/api/knowledge_base/detailed_stats")).json()}async checkHealth(){return(await this.get("/api/system/health")).json()}async testConnection(){try{const e=Date.now();await this.checkHealth();const o=Date.now()-e;return{connected:!0,latency:o,message:`Connected (${o}ms)`}}catch(e){return{connected:!1,error:e.message,message:`Connection failed: ${e.message}`}}}}const co=new ev,tv={name:"PopoutChromiumBrowser",props:{sessionId:{type:String,required:!0},initialUrl:{type:String,default:"about:blank"},canResize:{type:Boolean,default:!0},autoPopout:{type:Boolean,default:!1}},emits:["close","navigate","interact","popout","dock"],setup(s,{emit:e}){const o=b(!1),t=b("initializing"),i=b(s.initialUrl),r=b(s.initialUrl),l=b(!1),a=b(!1),u=b(!1),p=b(!1),f=b(""),v=b("vnc"),w=b("http://localhost:6080/vnc.html?autoconnect=true&resize=scale&reconnect=true&quality=6&view_only=false"),k=b("http://localhost:9222"),h=b(null),P=b(!1),x=b(!1),_=b(!1),S=b(100),L=b(0),A=b([]),ae=b(null),se=b(null),be=b(null),z=Se(()=>({height:l.value?"80vh":"60vh",minHeight:"400px",maxHeight:"90vh"})),q=async()=>{try{if(o.value=!0,t.value="connecting",s.sessionId&&s.sessionId!=="manual-browser"&&s.sessionId!=="unified-browser")try{const y=await(await co.get(`/api/research/browser/${s.sessionId}`)).json();y.docker_browser&&y.docker_browser.available?(v.value="vnc",w.value=y.docker_browser.vnc_url||w.value,t.value="connected"):(v.value="vnc",t.value="ready")}catch(g){console.warn("Could not get session info, using default browser mode:",g),v.value="vnc",t.value="ready"}else v.value="vnc",t.value="ready";if(v.value!=="vnc")try{const g=await fetch("http://localhost:9222/json");if(g.ok){v.value="remote";const y=await g.json();y.length>0&&(k.value=y[0].devtoolsFrontendUrl)}}catch{console.warn("Remote debugging not available, using VNC"),v.value="vnc"}s.initialUrl&&typeof s.initialUrl=="string"&&s.initialUrl!=="about:blank"?(i.value=s.initialUrl,r.value=s.initialUrl,_.value=s.initialUrl.startsWith("https://"),await X(s.initialUrl),me("info",`Navigating to initial URL: ${s.initialUrl}`)):me("info",`No initial URL provided, using: ${s.initialUrl||"about:blank"}`)}catch(g){console.error("Browser initialization failed:",g),t.value="error",v.value="vnc"}finally{o.value=!1}},X=async(g=null)=>{let y=g||r.value;if(!y||typeof y!="string"){console.warn("Invalid URL provided:",y);return}if(y=y.trim(),!!y){!y.startsWith("http://")&&!y.startsWith("https://")&&!y.startsWith("about:")&&(y="https://"+y);try{o.value=!0;const I=Date.now();if(i.value=y,r.value=y,_.value=y.startsWith("https://"),s.sessionId&&s.sessionId!=="manual-browser"&&s.sessionId!=="unified-browser")try{await co.post(`/api/research/session/${s.sessionId}/navigate`,{url:y})}catch(V){console.warn("API navigation failed, continuing with local navigation:",V)}else if(s.sessionId==="manual-browser"||s.sessionId==="unified-browser"){if(v.value==="vnc")try{me("info",`Manual navigation requested: ${y}`),t.value="ready"}catch(V){console.warn("VNC manual navigation failed:",V),t.value="error"}se.value&&v.value==="native"&&(se.value.src=y)}L.value=Date.now()-I,e("navigate",{url:y,sessionId:s.sessionId}),me("info",`Navigated to: ${y}`)}catch(I){console.error("Navigation failed:",I),me("error",`Navigation failed: ${I instanceof Error?I.message:String(I)}`)}finally{o.value=!1}}},Ee=()=>{se.value&&se.value.canGoBack()&&(se.value.goBack(),P.value=se.value.canGoBack(),x.value=se.value.canGoForward())},Pe=()=>{se.value&&se.value.canGoForward()&&(se.value.goForward(),P.value=se.value.canGoBack(),x.value=se.value.canGoForward())},ee=async()=>{se.value?se.value.reload():await X(i.value)},xe=()=>{X("about:blank")},fe=()=>{if(l.value=!l.value,l.value){const g=window.open("","vnc-research-browser","width=1400,height=900,scrollbars=yes,resizable=yes,toolbar=no,menubar=no,location=no,status=no");if(g){const y=s.sessionId?`(${s.sessionId.slice(0,8)}...)`:"(Manual)";g.document.head.innerHTML=`
            <title>VNC Research Browser - ${y}</title>
            <style>
              body { margin: 0; padding: 0; font-family: system-ui, sans-serif; background: #f3f4f6; }
              .browser-header { background: #e5e7eb; padding: 8px 12px; border-bottom: 1px solid #d1d5db; display: flex; align-items: center; justify-content: space-between; font-size: 14px; }
              .browser-title { font-weight: 600; color: #374151; }
              .browser-controls { display: flex; gap: 8px; }
              .control-btn { padding: 4px 8px; border: 1px solid #d1d5db; background: white; border-radius: 4px; cursor: pointer; font-size: 12px; }
              .control-btn:hover { background: #f9fafb; }
              .vnc-container { position: relative; height: calc(100vh - 40px); }
              .vnc-iframe { width: 100%; height: 100%; border: none; display: block; }
              .vnc-overlay { position: absolute; top: 10px; left: 10px; right: 10px; background: rgba(59, 130, 246, 0.9); color: white; padding: 8px 12px; border-radius: 6px; font-size: 12px; z-index: 10; }
            </style>
          `,g.document.body.innerHTML=`
            <div class="browser-header">
              <div class="browser-title"> VNC Research Browser ${y}</div>
              <div class="browser-controls">
                <button class="control-btn" onclick="location.reload()" title="Refresh"> Refresh</button>
                <button class="control-btn" onclick="window.close()" title="Close"> Close</button>
              </div>
            </div>
            <div class="vnc-container">
              <div class="vnc-overlay"> VNC Browser Control - Click and interact directly  Right-click for menu  Scroll to navigate</div>
              <iframe src="${w.value}" class="vnc-iframe" title="VNC Browser Session"></iframe>
            </div>
          `;const I=g.document.createElement("script");I.textContent=`
            function resizeVNCFrame() {
              const iframe = document.querySelector('.vnc-iframe');
              if (iframe) {
                iframe.style.height = 'calc(100vh - 40px)';
                iframe.style.width = '100%';
              }
            }
            window.addEventListener('resize', resizeVNCFrame);
            window.addEventListener('load', resizeVNCFrame);
            setTimeout(function() {
              const overlay = document.querySelector('.vnc-overlay');
              if (overlay) {
                overlay.style.opacity = '0';
                overlay.style.transition = 'opacity 0.5s';
                setTimeout(() => overlay.remove(), 500);
              }
            }, 5000);
          `,g.document.body.appendChild(I),g.focus(),e("popout",{popup:g,sessionId:s.sessionId}),me("info","VNC browser popped out to new window")}}else e("dock",{sessionId:s.sessionId}),me("info","VNC browser docked back to main window")},Z=()=>{a.value=!a.value},O=()=>{e("close",{sessionId:s.sessionId})},M=async g=>{try{if(s.sessionId&&s.sessionId!=="manual-browser"&&s.sessionId!=="unified-browser"){const y=await co.post("/api/research/session/action",{session_id:s.sessionId,action:g==="wait"?"wait":"manual_intervention"});e("interact",{action:g,response:y,sessionId:s.sessionId})}else e("interact",{action:g,sessionId:s.sessionId});g==="takeover"&&(p.value=!1,me("info","User took manual control of browser session"))}catch(y){console.error("Interaction handling failed:",y),me("error",`Interaction failed: ${y instanceof Error?y.message:String(y)}`)}},J=()=>{p.value=!1},W=g=>{f.value=g,p.value=!0},K=g=>{S.value=Math.max(25,Math.min(500,S.value+g*100)),se.value&&se.value.setZoomFactor(S.value/100)},F=()=>{S.value=100,se.value&&se.value.setZoomFactor(1)},de=g=>{g.target.select()},me=(g,y)=>{A.value.push({timestamp:new Date().toLocaleTimeString(),level:g,message:y}),A.value.length>100&&(A.value=A.value.slice(-100))},Re=g=>({info:"text-blue-400",warn:"text-yellow-400",error:"text-red-400",debug:"text-green-400"})[g]||"text-gray-400",re=()=>{t.value="ready",me("info",`VNC browser connection established for session: ${s.sessionId||"manual"}`)},D=()=>{t.value="ready",me("info","Native webview ready")},ne=g=>{i.value=g.url,r.value=g.url,_.value=g.url.startsWith("https://")},le=g=>{document.title=g.title||"Research Browser"},ce=()=>{t.value="ready",me("info","Remote debugging interface loaded")},Ae=()=>{mt(()=>{if(ae.value){const g=ae.value,y=g.parentElement;if(y){const I=Math.floor(y.clientWidth),V=Math.floor(y.clientHeight);let j=w.value;j.includes("resize=")&&(j=j.replace(/resize=\w+/,"resize=scale")),!j.includes("width=")&&!j.includes("height=")?j+=`&width=${I}&height=${V}`:(j=j.replace(/width=\d+/,`width=${I}`),j=j.replace(/height=\d+/,`height=${V}`)),g.src!==j&&(g.src=j)}}if(se.value)try{se.value.executeJavaScript(`
              window.dispatchEvent(new Event('resize'));
              document.body.style.zoom = ${S.value/100};
            `)}catch(g){console.log("Webview resize update failed:",g)}if(be.value){const g=be.value;g.style.width="100%",g.style.height="100%"}})};return it(()=>{q(),window.addEventListener("resize",Ae),window.ResizeObserver&&(h.value=new ResizeObserver(g=>{for(let y of g)Ae()}),mt(()=>{const g=document.querySelector(".browser-content");g&&h.value&&h.value.observe(g)})),s.autoPopout&&setTimeout(()=>fe(),1e3)}),ut(()=>{window.removeEventListener("resize",Ae),h.value&&h.value.disconnect(),l.value&&e("dock")}),yt(()=>s.sessionId,g=>{g&&q()}),yt(()=>s.initialUrl,g=>{g&&typeof g=="string"&&g!=="about:blank"&&(i.value=g,r.value=g,_.value=g.startsWith("https://"),t.value==="ready"&&X(g))},{immediate:!0}),{loading:o,browserStatus:t,currentUrl:i,addressBarUrl:r,isPopout:l,isFullscreen:a,showDevTools:u,showInteractionOverlay:p,interactionMessage:f,browserMode:v,vncUrl:w,remoteDebugUrl:k,canGoBack:P,canGoForward:x,isSecure:_,zoomLevel:S,pageLoadTime:L,consoleLogs:A,vncIframe:ae,webview:se,remoteIframe:be,browserContentStyle:z,initializeBrowser:q,navigateToUrl:X,goBack:Ee,goForward:Pe,refreshBrowser:ee,navigateHome:xe,togglePopout:fe,toggleFullscreen:Z,closeBrowser:O,handleInteraction:M,hideInteractionOverlay:J,showInteractionPrompt:W,adjustZoom:K,resetZoom:F,selectAll:de,getLogColor:Re,onVncLoad:re,onWebviewReady:D,onNavigate:ne,onTitleUpdate:le,onRemoteDebugLoad:ce}}},sv={class:"chromium-browser-container"},nv={class:"browser-header bg-gray-100 border-b border-gray-300 p-2 flex items-center justify-between"},ov={class:"flex items-center space-x-3"},lv={class:"flex items-center space-x-2 text-sm"},iv={key:0,class:"text-xs text-gray-500"},av={class:"flex items-center space-x-2"},rv={class:"flex items-center space-x-1"},cv=["disabled"],dv={class:"border-l border-gray-300 pl-2 flex items-center space-x-1"},uv=["title"],fv={class:"address-bar bg-white border-b border-gray-200 p-2"},mv={class:"flex items-center space-x-2"},pv={class:"flex items-center space-x-1"},gv=["disabled"],vv=["disabled"],hv={class:"flex-1 flex items-center"},bv={class:"url-input-container flex-1"},yv={key:0,class:"fas fa-lock text-green-500 mr-2"},wv={key:1,class:"fas fa-globe text-gray-500 mr-2"},kv={key:0,class:"w-full h-full relative"},_v={key:0,class:"absolute inset-0 bg-gray-100 flex items-center justify-center z-10"},xv={key:1,class:"absolute inset-0 bg-red-50 flex items-center justify-center z-10"},Cv={class:"text-center p-4"},Sv={key:2,class:"absolute top-4 left-4 right-4 bg-blue-900 bg-opacity-90 text-white p-3 rounded-lg z-20"},Tv=["src"],Ev={key:1,class:"w-full h-full"},Iv={key:2,class:"w-full h-full"},Pv=["src"],Rv={key:3,class:"flex items-center justify-center h-full bg-gray-50"},Dv={class:"text-center"},Mv={key:0,class:"text-center"},Av={key:1},Uv={class:"text-sm text-gray-500 mt-2"},Lv={key:4,class:"absolute bottom-0 left-0 right-0 h-1/3 bg-gray-900 border-t border-gray-600"},Ov={class:"flex items-center justify-between bg-gray-800 p-2 text-white text-sm"},Fv={class:"h-full overflow-auto p-2 text-green-400 font-mono text-xs bg-black"},Nv={class:"text-gray-500"},Vv={key:5,class:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center"},jv={class:"bg-white rounded-lg p-6 max-w-md mx-4"},Bv={class:"text-gray-700 mb-4"},Kv={class:"flex space-x-3"},Wv={class:"status-bar bg-gray-100 border-t border-gray-300 p-1 text-xs text-gray-600 flex items-center justify-between"},Hv={class:"flex items-center space-x-4"},qv={key:0},Gv={key:1},$v={class:"flex items-center space-x-2"},zv={key:0};function Jv(s,e,o,t,i,r){const l=Je("webview");return c(),d("div",sv,[n("div",nv,[n("div",ov,[e[25]||(e[25]=n("div",{class:"flex space-x-1"},[n("div",{class:"w-3 h-3 bg-red-500 rounded-full"}),n("div",{class:"w-3 h-3 bg-yellow-500 rounded-full"}),n("div",{class:"w-3 h-3 bg-green-500 rounded-full"})],-1)),n("div",lv,[e[23]||(e[23]=n("i",{class:"fab fa-chrome text-blue-600"},null,-1)),e[24]||(e[24]=n("span",{class:"font-medium"},"Research Browser",-1)),o.sessionId?(c(),d("span",iv,"Session: "+m(o.sessionId.slice(0,8))+"...",1)):C("",!0)])]),n("div",av,[n("div",rv,[n("button",{onClick:e[0]||(e[0]=(...a)=>t.refreshBrowser&&t.refreshBrowser(...a)),class:"browser-btn",disabled:t.loading,title:"Refresh"},[n("i",{class:G(["fas fa-sync-alt",{"fa-spin":t.loading}])},null,2)],8,cv),n("button",{onClick:e[1]||(e[1]=(...a)=>t.navigateHome&&t.navigateHome(...a)),class:"browser-btn",title:"Home"},e[26]||(e[26]=[n("i",{class:"fas fa-home"},null,-1)])),n("button",{onClick:e[2]||(e[2]=a=>t.showDevTools=!t.showDevTools),class:"browser-btn",title:"Developer Tools"},e[27]||(e[27]=[n("i",{class:"fas fa-code"},null,-1)]))]),n("div",dv,[n("button",{onClick:e[3]||(e[3]=(...a)=>t.togglePopout&&t.togglePopout(...a)),class:"browser-btn",title:t.isPopout?"Dock Browser":"Pop Out Browser"},[n("i",{class:G(["fas",t.isPopout?"fa-compress-arrows-alt":"fa-external-link-alt"])},null,2)],8,uv),o.canResize?(c(),d("button",{key:0,onClick:e[4]||(e[4]=(...a)=>t.toggleFullscreen&&t.toggleFullscreen(...a)),class:"browser-btn",title:"Toggle Fullscreen"},[n("i",{class:G(["fas",t.isFullscreen?"fa-compress":"fa-expand"])},null,2)])):C("",!0),n("button",{onClick:e[5]||(e[5]=(...a)=>t.closeBrowser&&t.closeBrowser(...a)),class:"browser-btn text-red-600",title:"Close Browser"},e[28]||(e[28]=[n("i",{class:"fas fa-times"},null,-1)]))])])]),n("div",fv,[n("div",mv,[n("div",pv,[n("button",{onClick:e[6]||(e[6]=(...a)=>t.goBack&&t.goBack(...a)),class:"nav-btn",disabled:!t.canGoBack},e[29]||(e[29]=[n("i",{class:"fas fa-arrow-left"},null,-1)]),8,gv),n("button",{onClick:e[7]||(e[7]=(...a)=>t.goForward&&t.goForward(...a)),class:"nav-btn",disabled:!t.canGoForward},e[30]||(e[30]=[n("i",{class:"fas fa-arrow-right"},null,-1)]),8,vv)]),n("div",hv,[n("div",bv,[t.isSecure?(c(),d("i",yv)):(c(),d("i",wv)),B(n("input",{"onUpdate:modelValue":e[8]||(e[8]=a=>t.addressBarUrl=a),onKeyup:e[9]||(e[9]=ve(()=>t.navigateToUrl(),["enter"])),onFocus:e[10]||(e[10]=(...a)=>t.selectAll&&t.selectAll(...a)),class:G(["url-input flex-1 bg-transparent outline-none text-sm",{"text-green-700":t.isSecure,"text-gray-700":!t.isSecure}]),placeholder:"Enter URL or search terms..."},null,34),[[he,t.addressBarUrl]])]),n("button",{onClick:e[11]||(e[11]=()=>t.navigateToUrl()),class:"nav-btn ml-2"},e[31]||(e[31]=[n("i",{class:"fas fa-arrow-right"},null,-1)]))])])]),n("div",{class:"browser-content flex-1 relative",style:ct(t.browserContentStyle)},[t.browserMode==="vnc"?(c(),d("div",kv,[t.browserStatus==="connecting"?(c(),d("div",_v,e[32]||(e[32]=[n("div",{class:"text-center"},[n("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),n("p",{class:"text-sm text-gray-600"},"Connecting to browser...")],-1)]))):C("",!0),t.browserStatus==="error"?(c(),d("div",xv,[n("div",Cv,[e[34]||(e[34]=n("i",{class:"fas fa-exclamation-triangle text-red-500 text-2xl mb-2"},null,-1)),e[35]||(e[35]=n("p",{class:"text-sm text-red-600 mb-2"},"Browser connection failed",-1)),n("button",{onClick:e[12]||(e[12]=(...a)=>t.initializeBrowser&&t.initializeBrowser(...a)),class:"btn btn-primary btn-sm"},e[33]||(e[33]=[n("i",{class:"fas fa-redo mr-1"},null,-1),U("Retry Connection ",-1)]))])])):C("",!0),o.sessionId==="unified-browser"||o.sessionId==="manual-browser"?(c(),d("div",Sv,e[36]||(e[36]=[hs('<div class="flex items-center justify-between" data-v-3ca224bf><div class="flex items-center space-x-2" data-v-3ca224bf><i class="fas fa-mouse-pointer text-blue-300" data-v-3ca224bf></i><div data-v-3ca224bf><p class="text-sm font-medium" data-v-3ca224bf>VNC Browser Control</p><p class="text-xs text-blue-200" data-v-3ca224bf>Click and interact directly in the browser below</p></div></div><div class="text-xs text-blue-200" data-v-3ca224bf> Right-click for menu  Scroll to navigate </div></div>',1)]))):C("",!0),n("iframe",{src:t.vncUrl,class:"w-full h-full border-0",onLoad:e[13]||(e[13]=(...a)=>t.onVncLoad&&t.onVncLoad(...a)),ref:"vncIframe"},null,40,Tv)])):t.browserMode==="native"?(c(),d("div",Ev,[Oe(l,{src:t.currentUrl,class:"w-full h-full",onDomReady:t.onWebviewReady,onDidNavigate:t.onNavigate,onPageTitleUpdated:t.onTitleUpdate,ref:"webview",allowpopups:"",plugins:""},null,8,["src","onDomReady","onDidNavigate","onPageTitleUpdated"])])):t.browserMode==="remote"?(c(),d("div",Iv,[n("iframe",{src:t.remoteDebugUrl,class:"w-full h-full border-0",onLoad:e[14]||(e[14]=(...a)=>t.onRemoteDebugLoad&&t.onRemoteDebugLoad(...a)),ref:"remoteIframe"},null,40,Pv)])):(c(),d("div",Rv,[n("div",Dv,[t.isPopout?(c(),d("div",Mv,[e[38]||(e[38]=n("i",{class:"fas fa-external-link-alt text-blue-500 text-4xl mb-4"},null,-1)),e[39]||(e[39]=n("h3",{class:"text-lg font-medium text-gray-800 mb-2"},"Browser Popped Out",-1)),e[40]||(e[40]=n("p",{class:"text-sm text-gray-600 mb-4"},"VNC browser is open in a separate window",-1)),n("button",{onClick:e[15]||(e[15]=(...a)=>t.togglePopout&&t.togglePopout(...a)),class:"btn btn-primary btn-sm"},e[37]||(e[37]=[n("i",{class:"fas fa-compress-arrows-alt mr-1"},null,-1),U(" Dock Browser Back ",-1)]))])):(c(),d("div",Av,[e[41]||(e[41]=n("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"},null,-1)),e[42]||(e[42]=n("p",{class:"text-gray-600"},"Initializing browser session...",-1)),n("p",Uv,"Session ID: "+m(o.sessionId||"Not available"),1)]))])])),t.showDevTools?(c(),d("div",Lv,[n("div",Ov,[e[44]||(e[44]=n("span",null,"Developer Console",-1)),n("button",{onClick:e[16]||(e[16]=a=>t.showDevTools=!1),class:"text-gray-400 hover:text-white"},e[43]||(e[43]=[n("i",{class:"fas fa-times"},null,-1)]))]),n("div",Fv,[(c(!0),d(pe,null,ye(t.consoleLogs,(a,u)=>(c(),d("div",{key:u,class:"mb-1"},[n("span",Nv,m(a.timestamp),1),n("span",{class:G(t.getLogColor(a.level))},m(a.message),3)]))),128))])])):C("",!0),t.showInteractionOverlay?(c(),d("div",Vv,[n("div",jv,[e[47]||(e[47]=n("div",{class:"flex items-center mb-4"},[n("i",{class:"fas fa-exclamation-triangle text-yellow-500 text-2xl mr-3"}),n("h3",{class:"text-lg font-semibold"},"User Interaction Required")],-1)),n("p",Bv,m(t.interactionMessage),1),n("div",Kv,[n("button",{onClick:e[17]||(e[17]=a=>t.handleInteraction("wait")),class:"btn btn-primary"},e[45]||(e[45]=[n("i",{class:"fas fa-clock mr-1"},null,-1),U(" Wait & Monitor ",-1)])),n("button",{onClick:e[18]||(e[18]=a=>t.handleInteraction("takeover")),class:"btn btn-secondary"},e[46]||(e[46]=[n("i",{class:"fas fa-hand-paper mr-1"},null,-1),U(" Take Control ",-1)])),n("button",{onClick:e[19]||(e[19]=(...a)=>t.hideInteractionOverlay&&t.hideInteractionOverlay(...a)),class:"btn btn-outline"}," Dismiss ")])])])):C("",!0)],4),n("div",Wv,[n("div",Hv,[n("span",null,"Status: "+m(t.browserStatus),1),t.currentUrl?(c(),d("span",qv,m(t.currentUrl),1)):C("",!0),t.pageLoadTime?(c(),d("span",Gv,"Load: "+m(t.pageLoadTime)+"ms",1)):C("",!0)]),n("div",$v,[t.zoomLevel!==100?(c(),d("span",zv,m(t.zoomLevel)+"%",1)):C("",!0),n("button",{onClick:e[20]||(e[20]=a=>t.adjustZoom(-.1)),class:"status-btn"},"-"),n("button",{onClick:e[21]||(e[21]=(...a)=>t.resetZoom&&t.resetZoom(...a)),class:"status-btn"},"100%"),n("button",{onClick:e[22]||(e[22]=a=>t.adjustZoom(.1)),class:"status-btn"},"+")])])])}const Yv=Xe(tv,[["render",Jv],["__scopeId","data-v-3ca224bf"]]),Qv={name:"ResearchBrowser",components:{PopoutChromiumBrowser:Yv},props:{sessionId:{type:String,default:null},researchData:{type:Object,default:()=>({})}},setup(s){const e=b(!1),o=b("unknown"),t=b(""),i=b(!1),r=b(""),l=b(null),a=b(!1),u=b(!1),p=b(""),f=b(null),v=b(""),w=b(""),k=b(!1),h=b(!1),P=Se(()=>s.researchData?.results||[]),x=Se(()=>s.sessionId||"unified-browser"),_=Se(()=>P.value.length>0?P.value[0].url||P.value[0].navigation?.url:v.value||t.value||"about:blank"),S=Se(()=>({active:"bg-green-100 text-green-800",waiting_for_user:"bg-yellow-100 text-yellow-800",error:"bg-red-100 text-red-800",closed:"bg-gray-100 text-gray-800",initializing:"bg-blue-100 text-blue-800"})[o.value]||"bg-gray-100 text-gray-800"),L=re=>({completed:"bg-green-100 text-green-800",interaction_required:"bg-yellow-100 text-yellow-800",mhtml_fallback:"bg-orange-100 text-orange-800",error:"bg-red-100 text-red-800"})[re]||"bg-gray-100 text-gray-800",A=async()=>{if(s.sessionId){e.value=!0;try{const re=await Ie.get(`/api/research/session/${s.sessionId}/status`);o.value=re.data.status,t.value=re.data.current_url,v.value=re.data.current_url,i.value=re.data.interaction_required,r.value=re.data.interaction_message;const D=await Ie.get(`/api/research/browser/${s.sessionId}`);l.value=D.data}catch(re){console.error("Failed to refresh status:",re)}finally{e.value=!1}}},ae=async()=>{e.value=!0;try{const re=await Ie.post("/api/research/session/action",{session_id:s.sessionId,action:"wait",timeout_seconds:300});f.value=re.data,await A()}catch(re){console.error("Wait for user failed:",re),f.value={error:re.message}}finally{e.value=!1}},se=async re=>{e.value=!0;try{const D=await Ie.post("/api/research/session/action",{session_id:s.sessionId,action:re});f.value=D.data,await A()}catch(D){console.error(`Session action ${re} failed:`,D),f.value={error:D.message}}finally{e.value=!1}},be=()=>{l.value&&l.value.docker_browser&&l.value.docker_browser.vnc_url&&window.open(l.value.docker_browser.vnc_url,"_blank","width=1280,height=720")},z=re=>{re.browser_url?a.value=!0:be()},q=()=>{u.value=!0},X=async()=>{if(p.value){e.value=!0;try{const re=await Ie.post(`/api/research/session/${s.sessionId}/navigate`,{url:p.value});f.value=re.data,u.value=!1,p.value="",await A()}catch(re){console.error("Navigation failed:",re),f.value={error:re.message}}finally{e.value=!1}}},Ee=async()=>{if(confirm("Are you sure you want to close this research session?")){e.value=!0;try{await Ie.delete(`/api/research/session/${s.sessionId}`),window.location.reload()}catch(re){console.error("Close session failed:",re)}finally{e.value=!1}}},Pe=async()=>{t.value&&await navigator.clipboard.writeText(t.value)},ee=()=>{a.value=!a.value},xe=()=>{console.log("Browser iframe loaded")},fe=()=>{a.value=!1,console.log("Browser closed")},Z=re=>{v.value=re.url,t.value=re.url,console.log("Browser navigated to:",re.url)},O=re=>{console.log("Browser interaction:",re.action)},M=()=>{console.log("Browser popped out")},J=()=>{console.log("Browser docked")},W=()=>{a.value=!0},K=async()=>{if(w.value){k.value=!0;try{if(a.value=!0,!s.sessionId){const re=await Ie.post("/api/research/url",{conversation_id:"unified-browser-session",url:w.value,extract_content:!1});console.log("Unified browser navigation response:",re.data),re.data&&re.data.success&&re.data.session_id&&(v.value=w.value,console.log("Created research session for unified browser:",re.data.session_id))}v.value=w.value,w.value=""}catch(re){console.error("Failed to navigate browser:",re),v.value=w.value,a.value=!0}finally{k.value=!1}}},F=()=>{a.value=!0,console.log("Browser relaunched for session:",s.sessionId)},de=async()=>{if(s.sessionId)try{const re=await Ie.post("/api/research/session/action",{session_id:s.sessionId,action:"manual_intervention"});re.data&&re.data.success&&(h.value=!0,console.log("Agent research session paused - user has control"),f.value={message:"Agent paused - you now have control of the browser",timestamp:new Date().toISOString()})}catch(re){console.error("Failed to pause agent:",re)}},me=async()=>{if(s.sessionId)try{(await Ie.post("/api/research/session/action",{session_id:s.sessionId,action:"wait",timeout_seconds:300})).data&&(h.value=!1,console.log("Agent research session resumed"),f.value={message:"Agent resumed - research session is now active",timestamp:new Date().toISOString()},await A())}catch(re){console.error("Failed to resume agent:",re)}};let Re;return it(()=>{s.sessionId?(A(),Re=setInterval(A,1e4),a.value=!0):s.researchData&&s.researchData.results&&s.researchData.results.length>0&&(a.value=!0),a.value=!0}),ut(()=>{Re&&clearInterval(Re)}),yt(()=>s.researchData,re=>{re&&re.results&&re.results.length>0&&(a.value=!0,console.log("Research data updated, showing browser with URL:",initialBrowserUrl.value))},{deep:!0}),{loading:e,status:o,currentUrl:t,interactionRequired:i,interactionMessage:r,browserInfo:l,showBrowser:a,showNavigationInput:u,navigationUrl:p,actionResult:f,currentBrowserUrl:v,browserUrl:w,browserLoading:k,agentPaused:h,activeSessionId:x,currentUrlForDisplay:_,researchResults:P,statusClass:S,getResultStatusClass:L,refreshStatus:A,handleWaitForUser:ae,handleSessionAction:se,openBrowserSession:be,openBrowserForResult:z,navigateToUrl:q,performNavigation:X,closeSession:Ee,copyUrl:Pe,toggleBrowserView:ee,onBrowserLoad:xe,onBrowserClose:fe,onBrowserNavigate:Z,onBrowserInteract:O,onBrowserPopout:M,onBrowserDock:J,popoutBrowser:W,navigateToBrowserUrl:K,relaunchBrowser:F,pauseAgent:de,resumeAgent:me}}},Zv={class:"research-browser"},Xv={class:"research-header bg-blue-50 border-b border-blue-200 p-4"},eh={class:"flex items-center justify-between"},th={class:"flex items-center space-x-3"},sh={class:"text-sm text-blue-600"},nh={class:"flex items-center space-x-2"},oh=["disabled"],lh={key:0,class:"url-bar bg-gray-100 border-b p-3"},ih={class:"flex items-center space-x-3"},ah={class:"text-sm text-gray-700 font-mono"},rh={key:1,class:"interaction-alert bg-yellow-50 border-l-4 border-yellow-400 p-4"},ch={class:"flex items-center"},dh={class:"ml-3 flex-1"},uh={class:"text-sm text-yellow-800"},fh={class:"ml-4 flex space-x-2"},mh=["disabled"],ph={key:2,class:"research-results p-4"},gh={class:"space-y-4"},vh={class:"flex items-start justify-between mb-2"},hh={class:"flex-1"},bh={class:"text-sm font-medium text-gray-900"},yh={class:"text-xs text-gray-500 mt-1"},wh={key:0,class:"content-preview mt-3"},kh={class:"text-sm text-gray-700 bg-gray-50 rounded p-2 max-h-32 overflow-y-auto"},_h={key:0,class:"mt-2"},xh={class:"flex flex-wrap gap-1"},Ch={key:1,class:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded"},Sh={class:"flex items-center justify-between"},Th=["onClick"],Eh={key:3,class:"session-controls border-t p-4 bg-gray-50"},Ih={class:"grid grid-cols-2 md:grid-cols-4 gap-2"},Ph=["disabled"],Rh=["disabled"],Dh=["disabled"],Mh=["disabled"],Ah={key:0,class:"mt-3"},Uh={class:"flex space-x-2"},Lh=["disabled"],Oh={class:"browser-container border-t"},Fh={class:"browser-header bg-blue-50 p-3 flex items-center justify-between"},Nh={class:"flex items-center space-x-2"},Vh={key:0,class:"text-xs text-blue-600"},jh={key:1,class:"text-xs text-orange-600"},Bh={class:"flex items-center space-x-2"},Kh={class:"flex items-center space-x-1"},Wh=["disabled"],Hh=["disabled"],qh={key:0,class:"flex items-center space-x-1 border-l border-gray-300 pl-2"},Gh={key:0,class:"browser-content"},$h={key:1,class:"p-4 text-center text-gray-500"},zh={class:"text-xs mt-2 text-blue-600"},Jh={key:0,class:"text-xs mt-1 text-orange-600"},Yh={key:4,class:"action-result p-4 border-t"},Qh={class:"bg-white border rounded-lg p-3"},Zh={class:"flex items-center justify-between mb-2"},Xh={class:"text-xs text-gray-600 bg-gray-50 rounded p-2 overflow-auto max-h-40"};function eb(s,e,o,t,i,r){const l=Je("PopoutChromiumBrowser");return c(),d("div",Zv,[n("div",Xv,[n("div",eh,[n("div",th,[e[21]||(e[21]=n("i",{class:"fas fa-search text-blue-600"},null,-1)),n("div",null,[e[20]||(e[20]=n("h3",{class:"text-lg font-semibold text-blue-800"},"Research Browser Session",-1)),n("p",sh,m(o.sessionId?`Session: ${o.sessionId.slice(0,8)}...`:"No active session"),1)])]),n("div",nh,[n("span",{class:G(["status-badge",t.statusClass])},m(t.status||"Unknown"),3),n("button",{onClick:e[0]||(e[0]=(...a)=>t.refreshStatus&&t.refreshStatus(...a)),class:"btn btn-secondary btn-sm",disabled:t.loading},[n("i",{class:G(["fas fa-sync-alt",{"fa-spin":t.loading}])},null,2)],8,oh)])])]),t.currentUrl?(c(),d("div",lh,[n("div",ih,[e[23]||(e[23]=n("i",{class:"fas fa-globe text-gray-500"},null,-1)),n("span",ah,m(t.currentUrl),1),n("button",{onClick:e[1]||(e[1]=(...a)=>t.copyUrl&&t.copyUrl(...a)),class:"btn btn-outline btn-xs",title:"Copy URL"},e[22]||(e[22]=[n("i",{class:"fas fa-copy"},null,-1)]))])])):C("",!0),t.interactionRequired?(c(),d("div",rh,[n("div",ch,[e[26]||(e[26]=n("div",{class:"flex-shrink-0"},[n("i",{class:"fas fa-exclamation-triangle text-yellow-400"})],-1)),n("div",dh,[n("p",uh,m(t.interactionMessage||"User interaction required to continue"),1)]),n("div",fh,[n("button",{onClick:e[2]||(e[2]=(...a)=>t.handleWaitForUser&&t.handleWaitForUser(...a)),class:"btn btn-primary btn-sm",disabled:t.loading},e[24]||(e[24]=[n("i",{class:"fas fa-clock mr-1"},null,-1),U(" Wait ",-1)]),8,mh),n("button",{onClick:e[3]||(e[3]=(...a)=>t.openBrowserSession&&t.openBrowserSession(...a)),class:"btn btn-secondary btn-sm"},e[25]||(e[25]=[n("i",{class:"fas fa-external-link-alt mr-1"},null,-1),U(" Open Browser ",-1)]))])])])):C("",!0),t.researchResults&&t.researchResults.length>0?(c(),d("div",ph,[e[31]||(e[31]=n("h4",{class:"text-md font-semibold text-gray-800 mb-3"},"Research Results",-1)),n("div",gh,[(c(!0),d(pe,null,ye(t.researchResults,(a,u)=>(c(),d("div",{key:u,class:"result-card bg-white border rounded-lg p-4 shadow-sm"},[n("div",vh,[n("div",hh,[n("h5",bh,m(a.query),1),n("p",yh,m(a.url),1)]),n("span",{class:G(["status-badge",t.getResultStatusClass(a.status)])},m(a.status),3)]),a.content&&a.content.success?(c(),d("div",wh,[e[28]||(e[28]=n("div",{class:"text-xs font-medium text-gray-600 mb-2"},"Content Preview:",-1)),n("div",kh,m(a.content.text_content?a.content.text_content.substring(0,300)+"...":"No content extracted"),1),a.content.structured_data&&a.content.structured_data.headings&&a.content.structured_data.headings.length>0?(c(),d("div",_h,[e[27]||(e[27]=n("div",{class:"text-xs font-medium text-gray-600 mb-1"},"Headings:",-1)),n("div",xh,[(c(!0),d(pe,null,ye(a.content.structured_data.headings.slice(0,3),p=>(c(),d("span",{key:p.text,class:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded"},m(p.level)+": "+m(p.text.substring(0,30))+m(p.text.length>30?"...":""),1))),128))])])):C("",!0)])):C("",!0),a.interaction_required?(c(),d("div",Ch,[n("div",Sh,[e[30]||(e[30]=n("div",{class:"text-sm text-yellow-800"},[n("i",{class:"fas fa-hand-paper mr-1"}),U(" Manual intervention required ")],-1)),n("button",{onClick:p=>t.openBrowserForResult(a),class:"btn btn-warning btn-sm"},e[29]||(e[29]=[n("i",{class:"fas fa-external-link-alt mr-1"},null,-1),U(" Open Browser ",-1)]),8,Th)])])):C("",!0)]))),128))])])):C("",!0),o.sessionId?(c(),d("div",Eh,[e[36]||(e[36]=n("h4",{class:"text-md font-semibold text-gray-800 mb-3"},"Session Controls",-1)),n("div",Ih,[n("button",{onClick:e[4]||(e[4]=a=>t.handleSessionAction("extract_content")),class:"btn btn-outline btn-sm",disabled:t.loading},e[32]||(e[32]=[n("i",{class:"fas fa-file-alt mr-1"},null,-1),U(" Extract Content ",-1)]),8,Ph),n("button",{onClick:e[5]||(e[5]=a=>t.handleSessionAction("save_mhtml")),class:"btn btn-outline btn-sm",disabled:t.loading},e[33]||(e[33]=[n("i",{class:"fas fa-save mr-1"},null,-1),U(" Save MHTML ",-1)]),8,Rh),n("button",{onClick:e[6]||(e[6]=(...a)=>t.navigateToUrl&&t.navigateToUrl(...a)),class:"btn btn-outline btn-sm",disabled:t.loading},e[34]||(e[34]=[n("i",{class:"fas fa-arrow-right mr-1"},null,-1),U(" Navigate ",-1)]),8,Dh),n("button",{onClick:e[7]||(e[7]=(...a)=>t.closeSession&&t.closeSession(...a)),class:"btn btn-danger btn-sm",disabled:t.loading},e[35]||(e[35]=[n("i",{class:"fas fa-times mr-1"},null,-1),U(" Close Session ",-1)]),8,Mh)]),t.showNavigationInput?(c(),d("div",Ah,[n("div",Uh,[B(n("input",{"onUpdate:modelValue":e[8]||(e[8]=a=>t.navigationUrl=a),type:"url",placeholder:"Enter URL to navigate to...",class:"flex-1 px-3 py-2 border border-gray-300 rounded text-sm",onKeyup:e[9]||(e[9]=ve((...a)=>t.performNavigation&&t.performNavigation(...a),["enter"]))},null,544),[[he,t.navigationUrl]]),n("button",{onClick:e[10]||(e[10]=(...a)=>t.performNavigation&&t.performNavigation(...a)),class:"btn btn-primary btn-sm",disabled:!t.navigationUrl||t.loading}," Go ",8,Lh),n("button",{onClick:e[11]||(e[11]=a=>t.showNavigationInput=!1),class:"btn btn-secondary btn-sm"}," Cancel ")])])):C("",!0)])):C("",!0),n("div",Oh,[n("div",Fh,[n("div",Nh,[e[37]||(e[37]=n("i",{class:"fab fa-chrome text-blue-600"},null,-1)),e[38]||(e[38]=n("span",{class:"text-sm font-medium text-blue-800"},"Unified Browser",-1)),o.sessionId&&!t.agentPaused?(c(),d("span",Vh,"(Agent Research Active)")):C("",!0),o.sessionId&&t.agentPaused?(c(),d("span",jh,"(Agent Paused - User Control)")):C("",!0)]),n("div",Bh,[n("div",Kh,[B(n("input",{"onUpdate:modelValue":e[12]||(e[12]=a=>t.browserUrl=a),type:"url",placeholder:"Enter URL to navigate...",class:"px-2 py-1 border border-gray-300 rounded text-sm w-48",disabled:o.sessionId&&!t.agentPaused,onKeyup:e[13]||(e[13]=ve((...a)=>t.navigateToBrowserUrl&&t.navigateToBrowserUrl(...a),["enter"]))},null,40,Wh),[[he,t.browserUrl]]),n("button",{onClick:e[14]||(e[14]=(...a)=>t.navigateToBrowserUrl&&t.navigateToBrowserUrl(...a)),disabled:!t.browserUrl||t.browserLoading||o.sessionId&&!t.agentPaused,class:"btn btn-primary btn-xs"},e[39]||(e[39]=[n("i",{class:"fas fa-arrow-right"},null,-1)]),8,Hh)]),o.sessionId?(c(),d("div",qh,[t.agentPaused?C("",!0):(c(),d("button",{key:0,onClick:e[15]||(e[15]=(...a)=>t.pauseAgent&&t.pauseAgent(...a)),class:"btn btn-warning btn-xs",title:"Pause agent and take control of browser"},e[40]||(e[40]=[n("i",{class:"fas fa-pause mr-1"},null,-1),U(" Take Control ",-1)]))),t.agentPaused?(c(),d("button",{key:1,onClick:e[16]||(e[16]=(...a)=>t.resumeAgent&&t.resumeAgent(...a)),class:"btn btn-success btn-xs",title:"Resume agent research session"},e[41]||(e[41]=[n("i",{class:"fas fa-play mr-1"},null,-1),U(" Resume Agent ",-1)]))):C("",!0)])):C("",!0),n("button",{onClick:e[17]||(e[17]=(...a)=>t.toggleBrowserView&&t.toggleBrowserView(...a)),class:"btn btn-outline btn-xs"},[n("i",{class:G(["fas",t.showBrowser?"fa-eye-slash":"fa-eye"])},null,2),U(" "+m(t.showBrowser?"Hide Browser":"Show Browser"),1)]),n("button",{onClick:e[18]||(e[18]=(...a)=>t.popoutBrowser&&t.popoutBrowser(...a)),class:"btn btn-primary btn-xs"},e[42]||(e[42]=[n("i",{class:"fas fa-external-link-alt mr-1"},null,-1),U(" Pop Out ",-1)]))])]),t.showBrowser?(c(),d("div",Gh,[Oe(l,{"session-id":t.activeSessionId,"initial-url":t.currentUrlForDisplay,"can-resize":!0,"auto-popout":!1,onClose:t.onBrowserClose,onNavigate:t.onBrowserNavigate,onInteract:t.onBrowserInteract,onPopout:t.onBrowserPopout,onDock:t.onBrowserDock},null,8,["session-id","initial-url","onClose","onNavigate","onInteract","onPopout","onDock"])])):(c(),d("div",$h,[e[43]||(e[43]=n("i",{class:"fas fa-eye text-4xl mb-3 opacity-30"},null,-1)),e[44]||(e[44]=n("p",{class:"text-sm"},"Browser is hidden",-1)),n("p",zh,'Click "Show Browser" above to observe '+m(o.sessionId?"agent research activity":"browser"),1),o.sessionId?(c(),d("p",Jh," Agent may be actively researching in the background")):C("",!0)]))]),t.actionResult?(c(),d("div",Yh,[n("div",Qh,[n("div",Zh,[e[46]||(e[46]=n("h5",{class:"text-sm font-medium text-gray-900"},"Action Result",-1)),n("button",{onClick:e[19]||(e[19]=a=>t.actionResult=null),class:"text-gray-400 hover:text-gray-600"},e[45]||(e[45]=[n("i",{class:"fas fa-times"},null,-1)]))]),n("pre",Xh,m(JSON.stringify(t.actionResult,null,2)),1)])])):C("",!0)])}const tb=Xe(Qv,[["render",eb],["__scopeId","data-v-1396b322"]]),sb={name:"ChatInterface",components:{TerminalSidebar:gd,TerminalWindow:qo,WorkflowApproval:oa,WorkflowProgressWidget:ap,KnowledgePersistenceDialog:sg,CommandPermissionDialog:Ng,PlaywrightDesktopViewer:Jg,ComputerDesktopViewer:Xg,ResearchBrowser:tb},setup(){const s=b(!1),e=b(!0),o=b(!1),t=b("chat"),i=b(""),r=b([]),l=b([]),a=b(null),u=b(!1),p=b(!1),f=b(!1),v=b(null),w=b([]),k=b(null),h=b(null),P=b(!1),x=b(null),_=b(!1),S=b(null),L=b(!1),A=b(null),ae=b({}),se=b(!1),be=b({command:"",purpose:"",riskLevel:"LOW",originalMessage:""}),z=b({message_display:{show_json:!1,show_planning:!0,show_debug:!1,show_thoughts:!0,show_utility:!1,show_sources:!0},chat:{auto_scroll:!0}}),q=Se(()=>r.value.filter(E=>E.type==="thought"&&!z.value.message_display.show_thoughts||E.type==="json"&&!z.value.message_display.show_json||E.type==="utility"&&!z.value.message_display.show_utility||E.type==="planning"&&!z.value.message_display.show_planning||E.type==="debug"&&!z.value.message_display.show_debug||E.type==="source"&&!z.value.message_display.show_sources?!1:(!E.type||E.type==="user"||E.type==="assistant",!0))),X=(E,R)=>{let $=Ee(E);const ge=Pe($);return ge.length>0?ge.map(_e=>ee(_e.text,_e.type)).join(""):ee($,R)},Ee=E=>E?E.replace(/\\"/g,'"').replace(/\\n/g,`
`).replace(/\\r/g,"\r").replace(/\\t/g,"	").replace(/\\\\/g,"\\").replace(/^\{|\}$/g,"").replace(/^\[|\]$/g,"").replace(/^"|"$/g,""):"",Pe=E=>{const R=[];let $=E;const ge=/Tool Used: ([^\n]+)[\n\s]*Output: (.*?)(?=\n\d{2}:\d{2}:\d{2}|\nTool Used:|$)/gis;let _e;for(;(_e=ge.exec(E))!==null;){R.push({type:"tool_output",text:`<strong>${_e[1].trim()}</strong>`,order:_e.index});const ue=_e[2].trim();if(ue.startsWith("{")||ue.startsWith("{'"))try{let Ce=ue;ue.startsWith("{'")&&(Ce=ue.replace(/'/g,'"'));const Fe=JSON.parse(Ce);if(R.push({type:"json",text:JSON.stringify(Fe,null,2),order:_e.index+1}),Fe.response_text){let Ve=Fe.response_text;if(typeof Ve=="string"&&(Ve.startsWith("{")||Ve.startsWith("{")))try{const Ye=JSON.parse(Ve);if(Ye.response){const Mt=typeof Ye.response=="object"?Ye.response.greeting||Ye.response.message||JSON.stringify(Ye.response):Ye.response;R.push({type:"response",text:Mt,order:_e.index+2})}else typeof Ye=="string"&&R.push({type:"response",text:Ye,order:_e.index+2})}catch{R.push({type:"response",text:Ve,order:_e.index+2})}else R.push({type:"response",text:Ve,order:_e.index+2})}}catch{R.push({type:"utility",text:ue,order:_e.index+1})}else R.push({type:"utility",text:ue,order:_e.index+1});$=$.replace(_e[0],"").trim()}return[{type:"thought",pattern:/\[THOUGHT\](.*?)\[\/THOUGHT\]/gis},{type:"planning",pattern:/\[PLANNING\](.*?)\[\/PLANNING\]/gis},{type:"utility",pattern:/\[UTILITY\](.*?)\[\/UTILITY\]/gis},{type:"debug",pattern:/\[DEBUG\](.*?)\[\/DEBUG\]/gis},{type:"json",pattern:/\[JSON\](.*?)\[\/JSON\]/gis}].forEach(({type:ue,pattern:Ce})=>{let Fe;for(;(Fe=Ce.exec($))!==null;)R.push({type:ue,text:Fe[1].trim(),order:Fe.index+1e3})}),R.sort((ue,Ce)=>(ue.order||0)-(Ce.order||0)),R.length>0?R:[]},ee=(E,R)=>{const $=E.replace(/</g,"&lt;").replace(/>/g,"&gt;");switch(R){case"thought":return`<div class="thought-message">
            <div class="message-header"> Thoughts</div>
            <div class="message-content">${$}</div>
          </div>`;case"planning":return`<div class="planning-message">
            <div class="message-header"> Planning</div>
            <div class="message-content">${$}</div>
          </div>`;case"utility":return`<div class="utility-message">
            <div class="message-header"> Utility</div>
            <div class="message-content">${$}</div>
          </div>`;case"debug":return`<div class="debug-message">
            <div class="message-header"> Debug</div>
            <div class="message-content"><pre>${$}</pre></div>
          </div>`;case"json":return`<div class="json-message">
            <div class="message-header"> JSON Output</div>
            <div class="message-content"><pre>${$}</pre></div>
          </div>`;case"tool_output":return`<div class="tool-output-message">
            <div class="message-header"> Tool Output</div>
            <div class="message-content">${$}</div>
          </div>`;case"source":case"source_attribution":return`<div class="source-attribution-message">
            <div class="message-header"> Sources</div>
            <div class="message-content">${$}</div>
          </div>`;case"research_summary":return`<div class="research-summary-message">
            <div class="message-header"> Research Results</div>
            <div class="message-content">${$}</div>
            <div class="research-action mt-2 text-sm text-blue-600">
               Switch to Browser tab to interact with research sessions
            </div>
          </div>`;default:return`<div class="regular-message">${$}</div>`}},xe=E=>E?E.includes("response_text")||E.startsWith("{")&&E.includes('"status"')?"json":E.includes("Tool Used:")&&E.includes("Output:")?"tool_output":E.includes("[THOUGHT]")||E.includes("[PLANNING]")||E.includes("[UTILITY]")||E.includes("[DEBUG]")?"structured":"response":"response",fe=E=>{const R=Array.from(E.target.files);w.value.push(...R)},Z=E=>{w.value.splice(E,1)},O=E=>{const R=E.name.split(".").pop().toLowerCase();return{txt:"",pdf:"",doc:"",docx:"",md:"",json:"",xml:"",csv:"",py:"",js:"",html:"",css:"",img:"",png:"",jpg:"",jpeg:"",gif:""}[R]||""},M=async E=>{try{A.value={chatId:E}}catch(R){console.error("Failed to load chat context:",R)}},J=async(E,R)=>{try{await lt.post("/api/chat_knowledge/files/associate",{chat_id:a.value,file_path:E,association_type:"upload",metadata:{original_filename:R}}),ae.value[a.value]||(ae.value[a.value]=[]),ae.value[a.value].push({file_path:E,file_name:R,type:"upload"})}catch($){console.error("Failed to associate file with chat:",$)}},W=()=>{L.value=!0},K=E=>{a.value&&M(a.value)},F=E=>{},de=E=>{console.log("Command approved:",E),se.value=!1,r.value.push({sender:"user",content:" Command approved and executed",timestamp:new Date().toISOString(),messageType:"approval"}),E.result&&r.value.push(E.result)},me=E=>{console.log("Command denied:",E),se.value=!1,r.value.push({sender:"user",content:" Command denied by user",timestamp:new Date().toISOString(),messageType:"denial"}),r.value.push({sender:"assistant",content:"Understood. I won't execute that command. Is there anything else I can help you with?",timestamp:new Date().toISOString(),messageType:"response"})},Re=E=>{console.log("Command commented:",E),se.value=!1,r.value.push({sender:"user",content:` **Command Feedback**: ${E.comment}`,timestamp:new Date().toISOString(),messageType:"comment"}),E.response?r.value.push(E.response):r.value.push({sender:"assistant",content:`Thank you for the feedback! I'll take your suggestion into account. The original command was: \`${E.command}\`

Would you like me to try a different approach or modify the command based on your suggestion?`,timestamp:new Date().toISOString(),messageType:"response"})},re=async()=>{if(!i.value.trim()&&w.value.length===0)return;let E=i.value;if(w.value.length>0){const ge=w.value.map(_e=>_e.name).join(", ");E+=`

 Attached files: ${ge}`}r.value.push({sender:"user",text:E,timestamp:new Date().toLocaleTimeString(),type:"message"});const R=i.value,$=[...w.value];i.value="",w.value=[];try{let ge=[];if($.length>0)for(const ue of $){const Ce=new FormData;Ce.append("file",ue);const Fe=await fetch("http://localhost:8001/api/files/upload",{method:"POST",body:Ce});if(Fe.ok){const Ve=await Fe.json();ge.push(Ve.path||ue.name),await J(Ve.path||ue.name,ue.name)}}const _e={message:R};ge.length>0&&(_e.attachments=ge);const Ue=await fetch("http://localhost:8001/api/workflow/execute",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_message:R,auto_approve:!1})});if(Ue.ok){let ue;try{const Ce=await Ue.text();if(!Ce||Ce.trim()==="")throw new Error("Empty response received from server");if(!Ce.includes("{")||!Ce.includes("}"))throw new Error("Invalid JSON response format received");if(ue=JSON.parse(Ce),!ue||typeof ue!="object")throw new Error("Parsed response is not a valid object")}catch(Ce){console.error("Edge browser compatibility error:",Ce),console.error("Response status:",Ue.status),console.error("Response headers:",Object.fromEntries(Ue.headers.entries())),r.value.push({sender:"bot",text:"I encountered a compatibility issue processing your request. This sometimes happens in Microsoft Edge browser. Please try refreshing the page or using Chrome/Firefox. If the issue persists, please contact support.",timestamp:new Date().toLocaleTimeString(),type:"error"});return}if(ue.type==="workflow_orchestration"){if(x.value=ue.workflow_id,r.value.push({sender:"bot",text:` Workflow orchestration started for your request. I've broken this down into ${ue.workflow_response.workflow_preview.length} coordinated steps involving multiple agents.`,timestamp:new Date().toLocaleTimeString(),type:"workflow"}),ue.workflow_response.workflow_preview){const Ce=ue.workflow_response.workflow_preview.map((Fe,Ve)=>`${Ve+1}. ${Fe}`).join(`
`);r.value.push({sender:"bot",text:`**Workflow Steps:**
${Ce}`,timestamp:new Date().toLocaleTimeString(),type:"planning"})}}else{const Ce=ue.result?.response||ue.result?.response_text||"No response received";if(ue.result?.messageType==="command_permission_request"&&ue.result?.commandData)be.value={command:ue.result.commandData.command,purpose:ue.result.commandData.purpose,riskLevel:ue.result.commandData.riskLevel||"LOW",originalMessage:ue.result.commandData.originalMessage},se.value=!0,r.value.push({sender:"bot",text:Ce,timestamp:new Date().toLocaleTimeString(),type:"command_request"});else{const Ve=xe(Ce);r.value.push({sender:"bot",text:Ce,timestamp:new Date().toLocaleTimeString(),type:Ve})}}}else{console.log("Workflow failed, falling back to regular chat endpoint");try{const ue=await Ie.sendChatMessage(R,{chatId:a.value||"default"});if(ue.type==="json"&&ue.data){const Ce=ue.data.content||ue.data.response||"No response received";if(ue.data.messageType==="command_permission_request"&&ue.data.commandData)be.value={command:ue.data.commandData.command,purpose:ue.data.commandData.purpose,riskLevel:ue.data.commandData.riskLevel||"LOW",originalMessage:ue.data.commandData.originalMessage},se.value=!0,r.value.push({sender:"bot",text:Ce,timestamp:new Date().toLocaleTimeString(),type:"command_request"});else{const Ve=xe(Ce);if(r.value.push({sender:"bot",text:Ce,timestamp:new Date().toLocaleTimeString(),type:Ve}),ue.data.research&&ue.data.research.success&&ue.data.research.results){h.value=ue.data.research,ue.data.research.results.some(wt=>wt.interaction_required||wt.status==="interaction_required")&&(P.value=!0,k.value=ue.data.research.results.find(wt=>wt.session_id)?.session_id||null);const Mt=ue.data.research.results.length,st=ue.data.research.results.filter(wt=>wt.interaction_required).length;let rt=` **Research completed**: ${Mt} results found`;st>0&&(rt+=` (${st} require user interaction)`),r.value.push({sender:"system",text:rt,timestamp:new Date().toLocaleTimeString(),type:"research_summary",researchData:ue.data.research})}}}else throw new Error("Invalid response from chat endpoint")}catch(ue){console.error("Fallback chat also failed:",ue),r.value.push({sender:"bot",text:"Error: Could not get response from server (both workflow and chat endpoints failed)",timestamp:new Date().toLocaleTimeString(),type:"error"})}}}catch(ge){console.error("Chat interface error:",ge),console.error("Error type:",ge.constructor.name),ge.message&&(ge.message.includes("Unsupported LLM model type")||ge.message.includes("model type")||ge.message.includes("LLM")||ge.response?.status===500)&&H(!0);let _e=ge.message||"An unknown error occurred";ge.message.includes("Failed to fetch")||ge.message.includes("NetworkError")?_e="Network connection error. Please check your internet connection and try again.":ge.message.includes("JSON")||ge.message.includes("Unexpected token")?_e="Response parsing error. This sometimes happens in Microsoft Edge browser. Please try refreshing the page.":(ge.message.includes("AbortError")||ge.message.includes("timeout"))&&(_e="Request timeout. Please try again or refresh the page."),r.value.push({sender:"bot",text:`Error: ${_e}`,timestamp:new Date().toLocaleTimeString(),type:"error"})}mt(()=>{v.value&&z.value.chat.auto_scroll&&(v.value.scrollTop=v.value.scrollHeight)})},D=async()=>{try{const R=(await Ie.createNewChat()).chatId||`chat-${Date.now()}`;a.value=R,r.value=[],localStorage.setItem("lastChatId",R),l.value.unshift({id:R,chatId:R,name:null,lastMessage:null,timestamp:new Date})}catch(E){console.error("Error creating new chat:",E);const R=`chat-${Date.now()}`;a.value=R,r.value=[],localStorage.setItem("lastChatId",R),l.value.unshift({id:R,chatId:R,name:null,lastMessage:null,timestamp:new Date})}},ne=()=>{r.value=[]},le=async(E=null)=>{const R=E||a.value;if(R)try{await Ie.deleteChat(R),l.value=l.value.filter($=>$.chatId!==R),a.value===R&&(r.value=[],l.value.length>0?ce(l.value[0].chatId):D())}catch($){$.message&&$.message.includes("404")?console.debug(`Chat ${R} not found on backend (legacy format) - removing from local list`):console.error("Unexpected error deleting chat:",$),l.value=l.value.filter(ge=>ge.chatId!==R),a.value===R&&(r.value=[],l.value.length>0?ce(l.value[0].chatId):D())}},ce=async E=>{a.value&&r.value.length>0&&await V(a.value),a.value=E,localStorage.setItem("lastChatId",E),await I(E),await M(E)},Ae=E=>{const R=l.value.find($=>$.chatId===E);if(R){const $=prompt("Enter new chat name:",R.name||"");$!==null&&(R.name=$.trim()||null)}},g=E=>"Chat preview...",y=async()=>{try{const E=await Ie.getChatList();l.value=E.chats||[]}catch(E){if(console.error("Error loading chat list:",E),l.value.length===0){const R=`fallback-${Date.now()}`;l.value=[{id:R,chatId:R,name:"Default Chat",lastMessage:null,timestamp:new Date}]}}},I=async E=>{try{const $=(await Ie.getChatMessages(E)).history||[];r.value=$.map(ge=>({...ge,type:ge.messageType||ge.type||"default"})),await mt(),v.value&&(v.value.scrollTop=v.value.scrollHeight)}catch(R){console.error("Error loading chat messages:",R),r.value=[]}},V=async E=>{try{await Ie.saveChatMessages(E,r.value)}catch(R){console.error("Error saving chat messages:",R)}},j=async()=>{p.value=!0;try{const E=await Ie.post("/api/system/reload");if(E.data.status==="success"){f.value=!1;const R=E.data.reload_results||[],ge={sender:"system",text:`System reloaded successfully. Modules updated: ${(E.data.reloaded_modules||[]).length}`,timestamp:new Date().toLocaleTimeString(),type:"system"};r.value.push(ge)}else throw new Error("System reload failed")}catch(E){console.error("Failed to reload system:",E);const R={sender:"system",text:`System reload failed: ${E.message}`,timestamp:new Date().toLocaleTimeString(),type:"error"};r.value.push(R)}finally{p.value=!1}},H=(E=!0)=>{f.value=E},ie=()=>{},oe=E=>{(E==="approvals"||E==="workflow")&&(_.value=!0)},te=E=>{x.value===E&&(x.value=null),r.value.push({sender:"bot",text:` Workflow ${E} has been cancelled.`,timestamp:new Date().toLocaleTimeString(),type:"system"})},Y=()=>{if(S.value&&S.value.readyState===WebSocket.OPEN)return;const E="ws://localhost:8001/ws";window.rum&&window.rum.trackWebSocketEvent("connection_attempt",{url:E});try{S.value=new WebSocket(E)}catch(R){console.error("Failed to create WebSocket connection:",R),window.rum&&window.rum.trackWebSocketEvent("creation_failed",{url:E,error:R.message}),setTimeout(Y,5e3);return}S.value.onopen=()=>{window.rum&&window.rum.trackWebSocketEvent("connection_opened",{url:E})},S.value.onmessage=R=>{try{const $=JSON.parse(R.data);window.rum&&window.rum.trackWebSocketEvent("message_received",{dataSize:R.data.length,eventType:$.type||"unknown"}),we($)}catch($){console.error("Failed to parse WebSocket message:",$),window.rum&&window.rum.trackWebSocketEvent("message_parse_error",{error:$.message||String($)})}},S.value.onerror=R=>{console.error("WebSocket error:",R),window.rum&&(window.rum.trackWebSocketEvent("error",{error:R.toString()}),window.rum.reportCriticalIssue("websocket_error",{url:E,error:R.toString(),readyState:S.value?.readyState}))},S.value.onclose=R=>{window.rum&&window.rum.trackWebSocketEvent("connection_closed",{code:R.code,reason:R.reason,wasClean:R.wasClean}),!R.wasClean&&t.value!=="dashboard"&&setTimeout(Y,3e3)}},we=E=>{const R=E.type,$=E.payload;R.startsWith("workflow_")&&(R==="workflow_step_started"?r.value.push({sender:"workflow",text:` Started: ${$.description}`,timestamp:new Date().toLocaleTimeString(),type:"workflow"}):R==="workflow_step_completed"?r.value.push({sender:"workflow",text:` Completed: ${$.description}`,timestamp:new Date().toLocaleTimeString(),type:"workflow"}):R==="workflow_approval_required"?(x.value=$.workflow_id,r.value.push({sender:"workflow",text:` Approval Required: ${$.description}`,timestamp:new Date().toLocaleTimeString(),type:"workflow"})):R==="workflow_completed"?(r.value.push({sender:"workflow",text:` Workflow completed successfully! (${$.total_steps} steps)`,timestamp:new Date().toLocaleTimeString(),type:"workflow"}),x.value===$.workflow_id&&(x.value=null)):R==="workflow_failed"&&(r.value.push({sender:"workflow",text:` Workflow failed: ${$.error}`,timestamp:new Date().toLocaleTimeString(),type:"workflow"}),x.value===$.workflow_id&&(x.value=null)),mt(()=>{v.value&&z.value.chat.auto_scroll&&(v.value.scrollTop=v.value.scrollHeight)}))};return it(async()=>{try{const E=localStorage.getItem("chat-settings");E&&Object.assign(z.value,JSON.parse(E))}catch(E){console.error("Failed to load settings:",E),z.value={message_display:{show_json:!1,show_planning:!0,show_debug:!1,show_thoughts:!0,show_utility:!1},chat:{auto_scroll:!0}}}setTimeout(()=>{t.value==="chat"&&Y()},2e3),yt(t,(E,R)=>{E==="chat"&&(!S.value||S.value.readyState!==WebSocket.OPEN)?setTimeout(Y,500):R==="chat"&&E!=="chat"&&S.value&&S.value.readyState===WebSocket.OPEN&&S.value.close(1e3,"leaving chat tab")});try{await Promise.race([y(),new Promise((E,R)=>setTimeout(()=>R(new Error("Timeout")),1e4))])}catch{console.warn("Chat list loading timed out or failed, using fallback")}try{const E=localStorage.getItem("lastChatId");E&&l.value.some(R=>R.chatId===E)?await ce(E):l.value.length>0?await ce(l.value[0].chatId):await D()}catch(E){if(console.error("Chat initialization failed:",E),!a.value){const R=`default-${Date.now()}`;a.value=R,localStorage.setItem("lastChatId",R)}}}),ut(()=>{S.value&&S.value.close()}),{sidebarCollapsed:s,terminalSidebarCollapsed:e,showTerminalSidebar:o,activeTab:t,inputMessage:i,messages:r,chatList:l,currentChatId:a,backendStarting:u,chatMessages:v,settings:z,filteredMessages:q,formatMessage:X,sendMessage:re,newChat:D,resetChat:ne,deleteSpecificChat:le,switchChat:ce,editChatName:Ae,getChatPreview:g,refreshChatList:y,reloadSystem:j,systemReloading:p,reloadNeeded:f,setReloadNeeded:H,openTerminalInNewTab:ie,attachedFiles:w,handleFileAttachment:fe,removeAttachment:Z,getFileIcon:O,activeWorkflowId:x,showWorkflowApproval:_,openFullWorkflowView:oe,onWorkflowCancelled:te,connectWebSocket:Y,handleWebSocketEvent:we,showKnowledgeDialog:L,currentChatContext:A,chatFileAssociations:ae,showKnowledgeManagement:W,onKnowledgeDecisionsApplied:K,onChatCompiled:F,showCommandDialog:se,pendingCommand:be,onCommandApproved:de,onCommandDenied:me,onCommandCommented:Re,currentResearchSession:k,researchResults:h,showResearchBrowser:P}}},nb={class:"flex h-full bg-white overflow-hidden"},ob={key:0,class:"flex-1 overflow-y-auto p-4",style:{"max-height":"calc(100vh - 300px)"}},lb={class:"space-y-2 mb-6"},ib=["onClick"],ab={class:"flex items-center justify-between"},rb={class:"text-sm text-blueGray-700 truncate"},cb={class:"flex items-center space-x-1"},db=["onClick"],ub=["onClick"],fb={class:"grid grid-cols-2 gap-2 pt-4 border-t border-blueGray-200"},mb=["disabled"],pb=["disabled"],gb={class:"space-y-3"},vb={class:"flex items-center"},hb={class:"flex items-center"},bb={class:"flex items-center"},yb={class:"flex items-center"},wb={class:"flex items-center"},kb={class:"flex items-center"},_b={class:"flex items-center"},xb={class:"mb-4"},Cb=["disabled"],Sb={key:0,class:"mb-4 p-3 bg-yellow-100 border border-yellow-300 rounded-lg"},Tb={class:"flex-1 flex h-full overflow-hidden"},Eb={class:"flex-1 flex flex-col h-full"},Ib={class:"flex border-b border-blueGray-200 bg-white flex-shrink-0"},Pb={key:0,class:"flex-1 flex flex-col h-full"},Rb={class:"flex-1 overflow-y-auto p-6 space-y-4",ref:"chatMessages",role:"log",style:{"max-height":"calc(100vh - 350px)","min-height":"400px"}},Db=["data-type","innerHTML"],Mb={class:"text-xs mt-2 opacity-70"},Ab={class:"border-t border-blueGray-200 p-4 bg-white flex-shrink-0"},Ub={key:0,class:"mb-3 flex flex-wrap gap-2"},Lb={class:"file-icon"},Ob={class:"file-name"},Fb=["onClick"],Nb={class:"flex items-end space-x-4"},Vb={class:"flex-1"},jb={class:"flex flex-col gap-2"},Bb={class:"btn btn-secondary p-2",title:"Attach file"},Kb=["disabled"],Wb={key:1,class:"flex-1 flex flex-col h-full"},Hb={key:2,class:"flex-1 flex flex-col h-full"},qb={key:3,class:"flex-1 flex flex-col h-full"},Gb={class:"flex-1 p-4"},$b={class:"modal-header"},zb={class:"modal-content"};function Jb(s,e,o,t,i,r){const l=Je("KnowledgePersistenceDialog"),a=Je("CommandPermissionDialog"),u=Je("TerminalWindow"),p=Je("ComputerDesktopViewer"),f=Je("ResearchBrowser"),v=Je("TerminalSidebar"),w=Je("WorkflowProgressWidget"),k=Je("WorkflowApproval");return c(),d("div",nb,[Oe(l,{visible:t.showKnowledgeDialog,"chat-id":t.currentChatId,"chat-context":t.currentChatContext,onClose:e[0]||(e[0]=h=>t.showKnowledgeDialog=!1),onDecisionsApplied:t.onKnowledgeDecisionsApplied,onChatCompiled:t.onChatCompiled},null,8,["visible","chat-id","chat-context","onDecisionsApplied","onChatCompiled"]),Oe(a,{show:t.showCommandDialog,command:t.pendingCommand.command,purpose:t.pendingCommand.purpose,"risk-level":t.pendingCommand.riskLevel,"chat-id":t.currentChatId,"original-message":t.pendingCommand.originalMessage,onApproved:t.onCommandApproved,onDenied:t.onCommandDenied,onCommented:t.onCommandCommented,onClose:e[1]||(e[1]=h=>t.showCommandDialog=!1)},null,8,["show","command","purpose","risk-level","chat-id","original-message","onApproved","onDenied","onCommented"]),n("div",{class:G(["w-80 bg-blueGray-100 border-r border-blueGray-200 flex flex-col h-full overflow-hidden transition-all duration-300 flex-shrink-0",{"w-12":t.sidebarCollapsed}])},[n("button",{class:"p-3 border-b border-blueGray-200 text-blueGray-600 hover:bg-blueGray-200 transition-colors flex-shrink-0",onClick:e[2]||(e[2]=h=>t.sidebarCollapsed=!t.sidebarCollapsed),"aria-label":"Collapse"},[n("i",{class:G(t.sidebarCollapsed?"fas fa-chevron-right":"fas fa-chevron-left")},null,2)]),t.sidebarCollapsed?C("",!0):(c(),d("div",ob,[e[50]||(e[50]=n("h3",{class:"text-lg font-semibold text-blueGray-700 mb-4"},"Chat History",-1)),n("div",lb,[(c(!0),d(pe,null,ye(t.chatList,h=>(c(),d("div",{key:h.chatId,class:G(["p-3 rounded-lg cursor-pointer transition-all duration-150",t.currentChatId===h.chatId?"bg-indigo-100 border border-indigo-200":"bg-white hover:bg-blueGray-50 border border-blueGray-200"]),onClick:P=>t.switchChat(h.chatId),tabindex:"0",onKeyup:[e[3]||(e[3]=ve(P=>P.target.click(),["enter"])),e[4]||(e[4]=ve(P=>P.target.click(),["space"]))]},[n("div",ab,[n("span",rb,m(h.name||t.getChatPreview(h.chatId)||`Chat ${h.chatId?h.chatId.slice(0,8):"Unknown"}...`),1),n("div",cb,[n("button",{class:"text-blueGray-400 hover:text-blueGray-600 p-1",onClick:ze(P=>t.editChatName(h.chatId),["stop"]),title:"Edit Name"},e[35]||(e[35]=[n("i",{class:"fas fa-edit text-xs"},null,-1)]),8,db),n("button",{class:"text-red-400 hover:text-red-600 p-1",onClick:ze(P=>t.deleteSpecificChat(h.chatId),["stop"]),title:"Delete"},e[36]||(e[36]=[n("i",{class:"fas fa-trash text-xs"},null,-1)]),8,ub)])])],42,ib))),128)),n("div",fb,[n("button",{class:"btn btn-primary text-xs",onClick:e[5]||(e[5]=(...h)=>t.newChat&&t.newChat(...h)),"aria-label":"Add"},e[37]||(e[37]=[n("i",{class:"fas fa-plus mr-1"},null,-1),U(" New ",-1)])),n("button",{class:"btn btn-secondary text-xs",onClick:e[6]||(e[6]=(...h)=>t.resetChat&&t.resetChat(...h)),disabled:!t.currentChatId,"aria-label":"Reset"},e[38]||(e[38]=[n("i",{class:"fas fa-redo mr-1"},null,-1),U(" Reset ",-1)]),8,mb),n("button",{class:"btn btn-danger text-xs",onClick:e[7]||(e[7]=(...h)=>t.deleteSpecificChat&&t.deleteSpecificChat(...h)),disabled:!t.currentChatId,"aria-label":"Delete"},e[39]||(e[39]=[n("i",{class:"fas fa-trash mr-1"},null,-1),U(" Delete ",-1)]),8,pb),n("button",{class:"btn btn-outline text-xs",onClick:e[8]||(e[8]=(...h)=>t.refreshChatList&&t.refreshChatList(...h)),"aria-label":"Refresh"},e[40]||(e[40]=[n("i",{class:"fas fa-sync mr-1"},null,-1),U(" Refresh ",-1)]))])]),e[51]||(e[51]=n("h3",{class:"text-lg font-semibold text-blueGray-700 mb-4 mt-6"},"Message Display",-1)),n("div",gb,[n("label",vb,[B(n("input",{type:"checkbox","onUpdate:modelValue":e[9]||(e[9]=h=>t.settings.message_display.show_thoughts=h),class:"mr-2"},null,512),[[Ne,t.settings.message_display.show_thoughts]]),e[41]||(e[41]=n("span",{class:"text-sm text-blueGray-600"},"Show Thoughts",-1))]),n("label",hb,[B(n("input",{type:"checkbox","onUpdate:modelValue":e[10]||(e[10]=h=>t.settings.message_display.show_json=h),class:"mr-2"},null,512),[[Ne,t.settings.message_display.show_json]]),e[42]||(e[42]=n("span",{class:"text-sm text-blueGray-600"},"Show JSON Output",-1))]),n("label",bb,[B(n("input",{type:"checkbox","onUpdate:modelValue":e[11]||(e[11]=h=>t.settings.message_display.show_utility=h),class:"mr-2"},null,512),[[Ne,t.settings.message_display.show_utility]]),e[43]||(e[43]=n("span",{class:"text-sm text-blueGray-600"},"Show Utility Messages",-1))]),n("label",yb,[B(n("input",{type:"checkbox","onUpdate:modelValue":e[12]||(e[12]=h=>t.settings.message_display.show_planning=h),class:"mr-2"},null,512),[[Ne,t.settings.message_display.show_planning]]),e[44]||(e[44]=n("span",{class:"text-sm text-blueGray-600"},"Show Planning Messages",-1))]),n("label",wb,[B(n("input",{type:"checkbox","onUpdate:modelValue":e[13]||(e[13]=h=>t.settings.message_display.show_debug=h),class:"mr-2"},null,512),[[Ne,t.settings.message_display.show_debug]]),e[45]||(e[45]=n("span",{class:"text-sm text-blueGray-600"},"Show Debug Messages",-1))]),n("label",kb,[B(n("input",{type:"checkbox","onUpdate:modelValue":e[14]||(e[14]=h=>t.settings.message_display.show_sources=h),class:"mr-2"},null,512),[[Ne,t.settings.message_display.show_sources]]),e[46]||(e[46]=n("span",{class:"text-sm text-blueGray-600"},"Show Sources",-1))]),n("label",_b,[B(n("input",{type:"checkbox","onUpdate:modelValue":e[15]||(e[15]=h=>t.settings.chat.auto_scroll=h),class:"mr-2"},null,512),[[Ne,t.settings.chat.auto_scroll]]),e[47]||(e[47]=n("span",{class:"text-sm text-blueGray-600"},"Autoscroll",-1))])]),e[52]||(e[52]=n("h3",{class:"text-lg font-semibold text-blueGray-700 mb-4 mt-6"},"Backend Control",-1)),n("div",xb,[n("button",{class:"btn btn-primary w-full",onClick:e[16]||(e[16]=(...h)=>t.reloadSystem&&t.reloadSystem(...h)),disabled:t.systemReloading,"aria-label":"Refresh"},[e[48]||(e[48]=n("i",{class:"fas fa-sync mr-2"},null,-1)),U(" "+m(t.systemReloading?"Reloading...":"Reload System"),1)],8,Cb)]),t.reloadNeeded?(c(),d("div",Sb,[e[49]||(e[49]=n("div",{class:"flex items-center"},[n("i",{class:"fas fa-exclamation-triangle text-yellow-600 mr-2"}),n("span",{class:"text-sm text-yellow-800"},"System reload recommended")],-1)),n("button",{onClick:e[17]||(e[17]=(...h)=>t.reloadSystem&&t.reloadSystem(...h)),class:"mt-2 text-xs bg-yellow-600 text-white px-3 py-1 rounded hover:bg-yellow-700","aria-label":"Reload now"}," Reload Now ")])):C("",!0)]))],2),n("div",Tb,[n("div",Eb,[n("div",Ib,[n("button",{onClick:e[18]||(e[18]=h=>t.activeTab="chat"),class:G(["px-6 py-3 text-sm font-medium transition-colors",t.activeTab==="chat"?"border-b-2 border-indigo-500 text-indigo-600 bg-indigo-50":"text-blueGray-600 hover:text-blueGray-800 hover:bg-blueGray-50"]),"aria-label":"Action button"},e[53]||(e[53]=[n("i",{class:"fas fa-comments mr-2"},null,-1),U(" Chat ",-1)]),2),n("button",{onClick:e[19]||(e[19]=h=>t.activeTab="terminal"),class:G(["px-6 py-3 text-sm font-medium transition-colors",t.activeTab==="terminal"?"border-b-2 border-indigo-500 text-indigo-600 bg-indigo-50":"text-blueGray-600 hover:text-blueGray-800 hover:bg-blueGray-50"]),"aria-label":"Action button"},e[54]||(e[54]=[n("i",{class:"fas fa-terminal mr-2"},null,-1),U(" Terminal ",-1)]),2),n("button",{onClick:e[20]||(e[20]=h=>t.activeTab="computer"),class:G(["px-6 py-3 text-sm font-medium transition-colors",t.activeTab==="computer"?"border-b-2 border-indigo-500 text-indigo-600 bg-indigo-50":"text-blueGray-600 hover:text-blueGray-800 hover:bg-blueGray-50"]),"aria-label":"Computer desktop viewer"},e[55]||(e[55]=[n("i",{class:"fas fa-desktop mr-2"},null,-1),U(" Computer ",-1)]),2),n("button",{onClick:e[21]||(e[21]=h=>t.activeTab="browser"),class:G(["px-6 py-3 text-sm font-medium transition-colors",t.activeTab==="browser"?"border-b-2 border-indigo-500 text-indigo-600 bg-indigo-50":"text-blueGray-600 hover:text-blueGray-800 hover:bg-blueGray-50"]),"aria-label":"Browser automation viewer"},e[56]||(e[56]=[n("i",{class:"fas fa-globe mr-2"},null,-1),U(" Browser ",-1)]),2)]),t.activeTab==="chat"?(c(),d("div",Pb,[n("div",Rb,[(c(!0),d(pe,null,ye(t.filteredMessages,(h,P)=>(c(),d("div",{key:h.id||h.timestamp||`msg-${P}`,class:G(["flex",h.sender==="user"?"justify-end":"justify-start"])},[n("div",{class:G(["max-w-3xl rounded-lg p-4 shadow-sm",h.sender==="user"?"bg-indigo-500 text-white":"bg-white border border-blueGray-200 text-blueGray-700"])},[n("div",{class:"message-content","data-type":h.type,innerHTML:t.formatMessage(h.text,h.type)},null,8,Db),n("div",Mb,m(h.timestamp),1)],2)],2))),128))],512),n("div",Ab,[t.attachedFiles.length>0?(c(),d("div",Ub,[(c(!0),d(pe,null,ye(t.attachedFiles,(h,P)=>(c(),d("div",{key:h.name||h.id||`file-${P}`,class:"attached-file-chip"},[n("span",Lb,m(t.getFileIcon(h)),1),n("span",Ob,m(h.name),1),n("button",{onClick:x=>t.removeAttachment(P),class:"remove-btn","aria-label":""},"",8,Fb)]))),128))])):C("",!0),n("div",Nb,[n("div",Vb,[B(n("textarea",{"onUpdate:modelValue":e[22]||(e[22]=h=>t.inputMessage=h),onKeydown:e[23]||(e[23]=ve(ze((...h)=>t.sendMessage&&t.sendMessage(...h),["exact","prevent"]),["enter"])),placeholder:"Type your message or goal for AutoBot...",rows:"3",class:"w-full px-4 py-3 border border-blueGray-300 rounded-lg resize-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"},null,544),[[he,t.inputMessage]])]),n("div",jb,[n("label",Bb,[e[57]||(e[57]=n("i",{class:"fas fa-paperclip"},null,-1)),n("input",{type:"file",onChange:e[24]||(e[24]=(...h)=>t.handleFileAttachment&&t.handleFileAttachment(...h)),multiple:"",style:{display:"none"}},null,32)]),n("button",{onClick:e[25]||(e[25]=(...h)=>t.showKnowledgeManagement&&t.showKnowledgeManagement(...h)),class:"btn btn-secondary p-2",title:"Manage Knowledge"},e[58]||(e[58]=[n("i",{class:"fas fa-brain"},null,-1)])),n("button",{onClick:e[26]||(e[26]=(...h)=>t.sendMessage&&t.sendMessage(...h)),disabled:!t.inputMessage.trim()&&t.attachedFiles.length===0,class:"btn btn-primary px-6 py-3 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Send message"},e[59]||(e[59]=[n("i",{class:"fas fa-paper-plane mr-2"},null,-1),U(" Send ",-1)]),8,Kb)])])])])):t.activeTab==="terminal"?(c(),d("div",Wb,[(c(),$s(u,{key:t.currentChatId,"session-id":t.currentChatId,"chat-context":!0,class:"flex-1"},null,8,["session-id"]))])):t.activeTab==="computer"?(c(),d("div",Hb,[e[60]||(e[60]=hs('<div class="p-4 bg-blue-50 border-b border-blue-200" data-v-55077e34><div class="flex items-center justify-between" data-v-55077e34><div class="flex items-center space-x-3" data-v-55077e34><i class="fas fa-desktop text-blue-600" data-v-55077e34></i><div data-v-55077e34><h3 class="text-lg font-semibold text-blue-800" data-v-55077e34>AutoBot Computer View</h3><p class="text-sm text-blue-600" data-v-55077e34>Live Kali Linux desktop streaming for system automation</p></div></div><div class="text-sm text-blue-600" data-v-55077e34><i class="fas fa-broadcast-tower mr-1" data-v-55077e34></i> System Desktop Access </div></div></div>',1)),Oe(p,{class:"flex-1"})])):t.activeTab==="browser"?(c(),d("div",qb,[e[61]||(e[61]=hs('<div class="p-4 bg-green-50 border-b border-green-200" data-v-55077e34><div class="flex items-center justify-between" data-v-55077e34><div class="flex items-center space-x-3" data-v-55077e34><i class="fas fa-globe text-green-600" data-v-55077e34></i><div data-v-55077e34><h3 class="text-lg font-semibold text-green-800" data-v-55077e34>AutoBot Browser View</h3><p class="text-sm text-green-600" data-v-55077e34>Live Playwright browser automation and web scraping</p></div></div><div class="text-sm text-green-600" data-v-55077e34><i class="fas fa-broadcast-tower mr-1" data-v-55077e34></i> Live Browser Streaming Active </div></div></div>',1)),n("div",Gb,[Oe(f,{"session-id":t.currentResearchSession,"research-data":t.researchResults,class:"flex-1"},null,8,["session-id","research-data"])])])):C("",!0)])]),t.showTerminalSidebar?(c(),$s(v,{key:0,collapsed:t.terminalSidebarCollapsed,"onUpdate:collapsed":e[27]||(e[27]=h=>t.terminalSidebarCollapsed=h),onOpenNewTab:t.openTerminalInNewTab},null,8,["collapsed","onOpenNewTab"])):C("",!0),t.activeWorkflowId?(c(),$s(w,{key:1,"workflow-id":t.activeWorkflowId,onOpenFullView:t.openFullWorkflowView,onWorkflowCancelled:t.onWorkflowCancelled},null,8,["workflow-id","onOpenFullView","onWorkflowCancelled"])):C("",!0),t.showWorkflowApproval?(c(),d("div",{key:2,class:"workflow-modal-overlay",onClick:e[32]||(e[32]=h=>t.showWorkflowApproval=!1),tabindex:"0",onKeyup:[e[33]||(e[33]=ve(h=>h.target.click(),["enter"])),e[34]||(e[34]=ve(h=>h.target.click(),["space"]))]},[n("div",{class:"workflow-modal",onClick:e[29]||(e[29]=ze(()=>{},["stop"])),tabindex:"0",onKeyup:[e[30]||(e[30]=ve(h=>h.target.click(),["enter"])),e[31]||(e[31]=ve(h=>h.target.click(),["space"]))]},[n("div",$b,[e[63]||(e[63]=n("h2",null,"Workflow Management",-1)),n("button",{onClick:e[28]||(e[28]=h=>t.showWorkflowApproval=!1),class:"close-btn","aria-label":"Close"},e[62]||(e[62]=[n("i",{class:"fas fa-times"},null,-1)]))]),n("div",zb,[Oe(k)])],32)],32)):C("",!0)])}const Yb=Xe(sb,[["render",Jb],["__scopeId","data-v-55077e34"]]),Qb={name:"VoiceInterface",setup(){const s=b(!1),e=b(!1),o=b(!1),t=b(""),i=b(""),r=b([]),l=b({stt_language:"en-US",speech_rate:1,pitch:1,auto_listen:!1});let a=null,u=null;const p=()=>{"webkitSpeechRecognition"in window?a=new webkitSpeechRecognition:"SpeechRecognition"in window&&(a=new SpeechRecognition),a&&(a.continuous=!0,a.interimResults=!0,a.lang=l.value.stt_language,a.onstart=()=>{s.value=!0,i.value="Listening..."},a.onresult=P=>{let x="",_="";for(let S=P.resultIndex;S<P.results.length;S++){const L=P.results[S][0].transcript;P.results[S].isFinal?x+=L:_+=L}t.value=x+_,x&&w(x,P.results[P.results.length-1][0].confidence)},a.onerror=P=>{console.error("Speech recognition error:",P.error),i.value=`Error: ${P.error}`,s.value=!1},a.onend=()=>{s.value=!1,t.value&&!i.value.includes("Error")&&(i.value="Processing...")})},f=()=>{"speechSynthesis"in window&&(u=window.speechSynthesis)},v=()=>{if(!a){i.value="Speech recognition not supported in this browser";return}s.value?(a.stop(),i.value="Stopped listening"):(a.lang=l.value.stt_language,a.start(),t.value="",i.value="")},w=async(P,x)=>{e.value=!0;try{r.value.unshift({text:P,confidence:x,timestamp:new Date().toLocaleTimeString()}),r.value.length>10&&(r.value=r.value.slice(0,10));const _=await Ie.post("/api/voice/listen",{text:P,confidence:x});_.response&&(await k(_.response),i.value="Response completed"),l.value.auto_listen&&!s.value&&setTimeout(()=>{a&&!s.value&&a.start()},1e3)}catch(_){console.error("Error processing voice command:",_),i.value="Error processing command"}finally{e.value=!1,t.value=""}},k=async P=>new Promise((x,_)=>{if(!u){_(new Error("Speech synthesis not supported"));return}o.value=!0;const S=new SpeechSynthesisUtterance(P);S.rate=l.value.speech_rate,S.pitch=l.value.pitch,S.lang=l.value.stt_language,S.onend=()=>{o.value=!1,x()},S.onerror=L=>{o.value=!1,_(L)},u.speak(S)}),h=async()=>{const P="Hello! This is a test of the text-to-speech system. Your voice interface is working correctly.";try{await k(P),i.value="Voice test completed"}catch(x){i.value="Voice test failed",console.error("TTS test error:",x)}};return it(()=>{p(),f();const P=localStorage.getItem("voice_settings");if(P)try{l.value={...l.value,...JSON.parse(P)}}catch(_){console.error("Error loading voice settings:",_)}const x=localStorage.getItem("voice_history");if(x)try{r.value=JSON.parse(x)}catch(_){console.error("Error loading voice history:",_)}}),ut(()=>{a&&s.value&&a.stop(),u&&u.cancel(),localStorage.setItem("voice_settings",JSON.stringify(l.value)),localStorage.setItem("voice_history",JSON.stringify(r.value))}),{isListening:s,isProcessing:e,isSpeaking:o,currentTranscription:t,statusMessage:i,voiceHistory:r,settings:l,toggleListening:v,testTTS:h}}},Zb={class:"voice-interface"},Xb={class:"voice-container"},ey={class:"voice-visualization"},ty={class:"waveform-container"},sy={class:"status-icon"},ny={key:0},oy={key:1},ly={key:2},iy={key:3},ay={class:"voice-controls"},ry=["disabled"],cy=["disabled"],dy={class:"voice-settings glass-card"},uy={class:"setting-group"},fy={class:"setting-group"},my={style:{color:"#374151","font-weight":"500"}},py={class:"setting-group"},gy={style:{color:"#374151","font-weight":"500"}},vy={class:"setting-group"},hy={class:"voice-history glass-card"},by={class:"history-list"},yy={class:"command-time"},wy={class:"command-text"},ky={class:"command-confidence"},_y={key:0,class:"voice-status-display"},xy={key:0,class:"transcription"},Cy={key:1,class:"status-message"};function Sy(s,e,o,t,i,r){return c(),d("div",Zb,[n("div",Xb,[n("div",ey,[n("div",ty,[(c(),d(pe,null,ye(20,l=>n("div",{key:l,class:G(["wave-bar",{active:t.isListening}]),style:ct({animationDelay:`${l*.1}s`})},null,6)),64))]),n("div",{class:G(["voice-status-circle",{listening:t.isListening,processing:t.isProcessing,speaking:t.isSpeaking}])},[n("div",sy,[!t.isListening&&!t.isProcessing&&!t.isSpeaking?(c(),d("span",ny,"")):t.isListening?(c(),d("span",oy,"")):t.isProcessing?(c(),d("span",ly,"")):t.isSpeaking?(c(),d("span",iy,"")):C("",!0)])],2)]),n("div",ay,[n("button",{class:"voice-btn primary",onClick:e[0]||(e[0]=(...l)=>t.toggleListening&&t.toggleListening(...l)),disabled:t.isProcessing,"aria-label":"{{ islistening ? 'stop listening' : 'start listening' }}"},m(t.isListening?"Stop Listening":"Start Listening"),9,ry),n("button",{class:"voice-btn secondary",onClick:e[1]||(e[1]=(...l)=>t.testTTS&&t.testTTS(...l)),disabled:t.isListening||t.isProcessing,"aria-label":"Test voice"}," Test Voice ",8,cy)]),n("div",dy,[e[11]||(e[11]=n("h3",null,"Voice Configuration",-1)),n("div",uy,[e[7]||(e[7]=n("label",null,"Speech Recognition Language",-1)),B(n("select",{"onUpdate:modelValue":e[2]||(e[2]=l=>t.settings.stt_language=l)},e[6]||(e[6]=[hs('<option value="en-US" data-v-291ce396>English (US)</option><option value="en-GB" data-v-291ce396>English (UK)</option><option value="es-ES" data-v-291ce396>Spanish</option><option value="fr-FR" data-v-291ce396>French</option><option value="de-DE" data-v-291ce396>German</option>',5)]),512),[[Ze,t.settings.stt_language]])]),n("div",fy,[e[8]||(e[8]=n("label",null,"Voice Speed",-1)),B(n("input",{type:"range",min:"0.5",max:"2",step:"0.1","onUpdate:modelValue":e[3]||(e[3]=l=>t.settings.speech_rate=l),class:"voice-slider"},null,512),[[he,t.settings.speech_rate]]),n("span",my,m(t.settings.speech_rate)+"x",1)]),n("div",py,[e[9]||(e[9]=n("label",null,"Voice Pitch",-1)),B(n("input",{type:"range",min:"0.5",max:"2",step:"0.1","onUpdate:modelValue":e[4]||(e[4]=l=>t.settings.pitch=l),class:"voice-slider"},null,512),[[he,t.settings.pitch]]),n("span",gy,m(t.settings.pitch)+"x",1)]),n("div",vy,[e[10]||(e[10]=n("label",null,"Auto-Listen After Response",-1)),B(n("input",{type:"checkbox","onUpdate:modelValue":e[5]||(e[5]=l=>t.settings.auto_listen=l)},null,512),[[Ne,t.settings.auto_listen]])])]),n("div",hy,[e[12]||(e[12]=n("h3",null,"Recent Voice Commands",-1)),n("div",by,[(c(!0),d(pe,null,ye(t.voiceHistory,(l,a)=>(c(),d("div",{key:a,class:"history-item"},[n("div",yy,m(l.timestamp),1),n("div",wy,m(l.text),1),n("div",ky,m(Math.round(l.confidence*100))+"%",1)]))),128))])]),t.currentTranscription||t.statusMessage?(c(),d("div",_y,[t.currentTranscription?(c(),d("div",xy,[e[13]||(e[13]=n("strong",null,"Transcription:",-1)),U(" "+m(t.currentTranscription),1)])):C("",!0),t.statusMessage?(c(),d("div",Cy,m(t.statusMessage),1)):C("",!0)])):C("",!0)])])}const Ty=Xe(Qb,[["render",Sy],["__scopeId","data-v-291ce396"]]),Ey={name:"KnowledgeManager",setup(){const s=b("search"),e=[{id:"search",label:"Search"},{id:"categories",label:"Categories"},{id:"entries",label:"Knowledge Entries"},{id:"system",label:"System Knowledge"},{id:"prompts",label:"System Prompts"},{id:"templates",label:"Templates"},{id:"manage",label:"Manage"},{id:"stats",label:"Statistics"}],o=b(""),t=b([]),i=b(!1),r=b(!1),l=b(""),a=b([]),u=b([]),p=b(""),f=b(!1),v=b(!1),w=b(!1),k=b(!1),h=b({title:"",content:"",source:"",collection:"default",tags:[],links:[]}),P=b(""),x=b({url:"",title:""}),_=b(!1),S=b(null),L=b([]),A=b([{id:1,name:"Research Article",icon:"",category:"research",description:"Template for documenting research findings and analysis",fields:["title","author","summary","key_findings","methodology","conclusions"],contentTemplate:`# {{title}}

**Author:** {{author}}
**Date:** {{date}}

## Summary
{{summary}}

## Key Findings
{{key_findings}}

## Methodology
{{methodology}}

## Conclusions
{{conclusions}}

## References
{{references}}`},{id:2,name:"Meeting Notes",icon:"",category:"business",description:"Template for capturing meeting discussions and action items",fields:["meeting_title","date","attendees","agenda","discussion","action_items","next_meeting"],contentTemplate:`# {{meeting_title}}

**Date:** {{date}}
**Attendees:** {{attendees}}

## Agenda
{{agenda}}

## Discussion Points
{{discussion}}

## Action Items
{{action_items}}

## Next Meeting
{{next_meeting}}`},{id:3,name:"Bug Report",icon:"",category:"development",description:"Template for documenting software bugs and issues",fields:["bug_title","severity","steps_to_reproduce","expected_behavior","actual_behavior","environment","screenshots"],contentTemplate:`# Bug: {{bug_title}}

**Severity:** {{severity}}
**Environment:** {{environment}}

## Steps to Reproduce
{{steps_to_reproduce}}

## Expected Behavior
{{expected_behavior}}

## Actual Behavior
{{actual_behavior}}

## Screenshots/Evidence
{{screenshots}}`},{id:4,name:"Learning Notes",icon:"",category:"personal",description:"Template for documenting learning and study materials",fields:["topic","source","key_concepts","examples","questions","related_topics"],contentTemplate:`# Learning: {{topic}}

**Source:** {{source}}
**Date:** {{date}}

## Key Concepts
{{key_concepts}}

## Examples
{{examples}}

## Questions for Further Study
{{questions}}

## Related Topics
{{related_topics}}`}]),ae=b(!1),se=b(!1),be=b({name:"",icon:"",category:"general",description:"",fields:[{name:"title",type:"text",placeholder:"Enter title"},{name:"content",type:"textarea",placeholder:"Enter main content"}],contentTemplate:`# {{title}}

{{content}}`}),z=b("text"),q=b(""),X=b(""),Ee=b(""),Pe=b(""),ee=b("fetch"),xe=b(!1),fe=b(""),Z=b(""),O=b(!1),M=b(!1),J=b(""),W=b(""),K=b(null),F=b(null),de=b(!1),me=b(""),Re=b(""),re=b({backend:{api_endpoint:"http://localhost:8001"}}),D=()=>{const T=localStorage.getItem("chat_settings");if(T)try{re.value=JSON.parse(T)}catch(Q){console.error("Error loading settings:",Q)}},ne=async()=>{if(o.value.trim()){i.value=!0,r.value=!0,l.value=o.value;try{const T=await Ie.searchKnowledge(o.value);t.value=T.results||[]}catch(T){console.error("Search error:",T),t.value=[]}finally{i.value=!1}}},le=async()=>{xe.value=!0,fe.value="";try{let T={},Q="";if(z.value==="text"){if(!q.value.trim()){fe.value="Please enter some text content.",Z.value="error";return}Q="/api/knowledge/add_text",T={text:q.value,title:X.value,source:Ee.value||"Manual Entry"}}else if(z.value==="url"){if(!Pe.value.trim()){fe.value="Please enter a URL.",Z.value="error";return}Q="/api/knowledge/add_url",T={url:Pe.value,method:ee.value}}else if(z.value==="file"){if(!S.value){fe.value="Please select a file.",Z.value="error";return}const Le=await Ie.addFileToKnowledge(S.value);fe.value=Le.message||"File added successfully!",Z.value="success",S.value=null,await ce();return}let De;z.value==="text"?De=await Ie.addTextToKnowledge(q.value,X.value,Ee.value):z.value==="url"&&(De=await Ie.addUrlToKnowledge(Pe.value,ee.value)),fe.value=De.message||"Content added successfully!",Z.value="success",await ce(),z.value==="text"?(q.value="",X.value="",Ee.value=""):z.value==="url"&&(Pe.value="")}catch(T){console.error("Add content error:",T),fe.value="Error adding content. Please try again.",Z.value="error"}finally{xe.value=!1}},ce=async()=>{try{f.value=!0;const Q=await(await Ie.get("/api/knowledge_base/entries")).json();a.value=Q.entries||[],u.value=a.value}catch(T){console.error("Error loading knowledge entries:",T);try{const Q=await Ie.searchKnowledge("",100);a.value=Q.results||[],u.value=a.value}catch(Q){console.error("Fallback search also failed:",Q),a.value=[],u.value=[]}}finally{f.value=!1}},Ae=()=>{if(!p.value.trim()){u.value=a.value;return}const T=p.value.toLowerCase();u.value=a.value.filter(Q=>{const De=(Q.content||"").toLowerCase(),Le=(Q.metadata?.source||"").toLowerCase(),qe=(Q.metadata?.tags||[]).join(" ").toLowerCase(),Bt=(Q.collection||"").toLowerCase();return De.includes(T)||Le.includes(T)||qe.includes(T)||Bt.includes(T)})},g=()=>{ce()},y=async()=>{try{const T=await fetch("http://localhost:8001/api/files/list");if(T.ok){const Q=await T.json();L.value=Q.files||[]}}catch(T){console.error("Error loading files:",T),L.value=[]}},I=async T=>{const Q=T.target.files[0];if(Q){try{const De=new FormData;De.append("file",Q);const Le=await fetch("http://localhost:8001/api/files/upload",{method:"POST",body:De});if(Le.ok){const qe=await Le.json();if(S.value={name:Q.name,path:qe.path},h.value.source=Q.name,await j(qe.path||Q.name),!h.value.collection||h.value.collection==="default"){const Bt=Q.name.split(".").pop().toLowerCase();Bt==="pdf"?h.value.collection="documents":["md","txt"].includes(Bt)?h.value.collection="text-files":["json","xml"].includes(Bt)&&(h.value.collection="data-files")}}else{const qe=await Le.text();console.error("Upload failed:",Le.status,qe),ot(`Upload failed: ${Le.statusText}`)}}catch(De){console.error("Error uploading file:",De),ot("Error uploading file: "+De.message)}T.target.value=""}},V=async T=>{S.value=T,h.value.source=T.name,_.value=!1,await j(T.path||T.name)},j=async T=>{try{const Q=await fetch(`http://localhost:8001/api/files/view/${encodeURIComponent(T)}`);if(Q.ok){const De=Q.headers.get("content-type");if(De&&(De.includes("text")||De.includes("application/json"))){const Le=await Q.text();if(h.value.content=Le,!h.value.title){const Bt=T.split("/").pop().replace(/\.[^/.]+$/,"");h.value.title=Bt.replace(/[_-]/g," ").replace(/\b\w/g,ya=>ya.toUpperCase())}Qe(`Successfully extracted ${Le.length} characters from ${T}`)}else if(De&&De.includes("pdf"))try{const Le=await fetch(`http://localhost:8001/api/files/extract-text/${encodeURIComponent(T)}`);if(Le.ok){const qe=await Le.json();h.value.content=qe.text||"",Qe(`Successfully extracted ${qe.text?.length||0} characters from PDF`)}else ot("Could not extract text from PDF file")}catch(Le){console.error("PDF extraction error:",Le),ot("PDF text extraction is not available")}else ot(`Unsupported file type: ${De}. Please use text files, JSON, or PDFs.`)}else console.error("Failed to fetch file:",Q.status,Q.statusText),ot(`Failed to access file: ${Q.statusText}`)}catch(Q){console.error("Error extracting file content:",Q),ot("Error extracting file content: "+Q.message)}},H=T=>{const Q=T.name.split(".").pop().toLowerCase();return{txt:"",pdf:"",doc:"",docx:"",md:"",json:"",xml:"",csv:"",py:"",js:"",html:"",css:"",img:"",png:"",jpg:"",jpeg:"",gif:""}[Q]||""},ie=T=>{if(!T)return"0 B";const Q=["B","KB","MB","GB"],De=Math.floor(Math.log(T)/Math.log(1024));return Math.round(T/Math.pow(1024,De)*100)/100+" "+Q[De]},oe=T=>T.title||T.metadata?.title||T.metadata?.source||"Untitled Entry",te=T=>{const Q=T.content||"";return Q.length>150?Q.substring(0,150)+"...":Q},Y=T=>{if(!T)return"Unknown";try{return new Date(T).toLocaleDateString()}catch{return"Unknown"}},we=T=>{if(T.metadata?.source)try{return new URL(T.metadata.source),T.metadata.source.startsWith("http://")||T.metadata.source.startsWith("https://")}catch{}return T.content?/https?:\/\/[^\s]+/.test(T.content):T.metadata?.type==="url_reference"||T.content?.startsWith("URL Reference:")||T.metadata?.url},E=async T=>{if(confirm("Crawl and extract content from this URL? This will replace the current content."))try{let Q=null;if(T.metadata?.source)try{new URL(T.metadata.source),(T.metadata.source.startsWith("http://")||T.metadata.source.startsWith("https://"))&&(Q=T.metadata.source)}catch{}if(Q||(Q=R(T.content)),!Q&&T.metadata?.url&&(Q=T.metadata.url),!Q){ot("No URL found to crawl");return}const De=await fetch("http://localhost:8001/api/knowledge/crawl_url",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({entry_id:T.id,url:Q})});if(!De.ok){const qe=await De.json();throw new Error(qe.detail||"Failed to crawl URL")}const Le=await De.json();Qe(`URL content crawled successfully! Extracted ${Le.content_length} characters.`),await ce()}catch(Q){console.error("Error crawling URL:",Q),ot("Failed to crawl URL: "+Q.message)}},R=T=>{const Q=/https?:\/\/[^\s]+/,De=T?.match(Q);return De?De[0]:null},$=T=>{h.value={...T,title:T.title||T.metadata?.title||"",source:T.metadata?.source||"",collection:T.collection||"default",tags:T.metadata?.tags||[],links:T.metadata?.links||[],created_at:T.metadata?.created_at},k.value=!0},ge=T=>{h.value={...T,source:T.metadata?.source||"",collection:T.collection||"default",tags:T.metadata?.tags||[],links:T.metadata?.links||[]},P.value=h.value.tags.join(", "),k.value=!1,w.value=!0},_e=T=>{h.value={content:T.content,source:(T.metadata?.source||"")+" (Copy)",collection:T.collection||"default",tags:[...T.metadata?.tags||[]],links:[...T.metadata?.links||[]]},P.value=h.value.tags.join(", "),v.value=!0},Ue=async T=>{if(confirm("Are you sure you want to delete this entry? This action cannot be undone."))try{await Ie.delete(`/api/knowledge_base/entries/${T}`),await ce(),Qe("Entry deleted successfully")}catch(Q){console.error("Error deleting entry:",Q),ot("Failed to delete entry: "+Q.message)}},ue=T=>{if(!T)return!1;try{return new URL(T),T.startsWith("http://")||T.startsWith("https://")}catch{return!1}},Ce=b(!1),Fe=async()=>{if(confirm("This will replace the current content with crawled content from the URL. Continue?")){Ce.value=!0;try{const T=await fetch("http://localhost:8001/api/knowledge/crawl_url",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({entry_id:h.value.id,url:h.value.source})});if(!T.ok){const De=await T.json();throw new Error(De.detail||"Failed to crawl URL")}const Q=await T.json();h.value.content=Q.content||Q.extracted_content||"",Qe(`Content crawled successfully! Extracted ${Q.content_length||h.value.content.length} characters.`)}catch(T){console.error("Error crawling URL in modal:",T),ot("Failed to crawl URL: "+T.message)}finally{Ce.value=!1}}},Ve=async()=>{try{f.value=!0;let T=[...h.value.tags||[]];if(h.value.content){const Le=h.value.content.toLowerCase(),qe=[];(Le.includes("debian")||Le.includes("ubuntu"))&&qe.push("debian","linux","operating-system"),Le.includes("windows")&&qe.push("windows","operating-system"),(Le.includes("macos")||Le.includes("mac os"))&&qe.push("macos","operating-system"),Le.includes("python")&&qe.push("python","programming"),(Le.includes("javascript")||Le.includes("node"))&&qe.push("javascript","programming"),Le.includes("docker")&&qe.push("docker","containerization"),Le.includes("kubernetes")&&qe.push("kubernetes","orchestration"),(Le.includes("manual")||Le.includes("guide")||Le.includes("tutorial"))&&qe.push("manual","documentation"),T=[...new Set([...T,...qe])]}const Q={type:h.value.title||h.value.source||"Manual Entry",content:h.value.content,source:h.value.source,title:h.value.title,collection:h.value.collection||"default",metadata:{source:h.value.source,tags:T,links:h.value.links,title:h.value.title,...S.value&&{file_path:S.value.path||S.value.name,file_name:S.value.name,resource_type:"knowledge",content_extracted:!0,content_length:h.value.content?.length||0}}};let De;if(w.value?De=await fetch(`http://localhost:8001/api/knowledge_base/entries/${h.value.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Q)}):De=await fetch("http://localhost:8001/api/knowledge_base/entries",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Q)}),!De.ok){const Le=await De.text();throw console.error("API Response:",De.status,De.statusText,Le),new Error(`Failed to ${w.value?"update":"create"} entry: ${De.status} ${De.statusText}`)}if(!w.value&&ue(h.value.source)&&!h.value.content){const Le=await De.json();if(Le.id)try{const qe=await fetch("http://localhost:8001/api/knowledge/crawl_url",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({entry_id:Le.id,url:h.value.source})});if(qe.ok){const Bt=await qe.json();Qe(`Entry created and URL content crawled! Extracted ${Bt.content_length} characters.`)}else Qe("Entry created successfully, but URL crawling failed.")}catch{Qe("Entry created successfully, but URL crawling failed.")}}else Qe(w.value?"Entry updated successfully":"Entry created successfully");await ce(),Ye()}catch(T){console.error("Error saving entry:",T),ot("Failed to save entry: "+T.message)}finally{f.value=!1}},Ye=()=>{v.value=!1,w.value=!1,k.value=!1,h.value={content:"",source:"",collection:"default",tags:[],links:[]},P.value="",x.value={url:"",title:""}},Mt=()=>{const T=P.value.split(",").map(Q=>Q.trim()).filter(Q=>Q.length>0);h.value.tags=[...new Set(T)]},st=T=>{h.value.tags=h.value.tags.filter(Q=>Q!==T),P.value=h.value.tags.join(", ")},rt=()=>{if(!x.value.url.trim())return;const T={url:x.value.url.trim(),title:x.value.title.trim()||x.value.url.trim()};h.value.links||(h.value.links=[]),h.value.links.some(De=>De.url===T.url)||h.value.links.push(T),x.value={url:"",title:""}},wt=T=>{h.value.links.splice(T,1)},Qe=T=>{},ot=T=>{console.error("Error:",T)},Bn=T=>{h.value={title:"",content:T.contentTemplate,source:"",collection:T.category||"default",tags:[T.name.toLowerCase().replace(/\s+/g,"_")],links:[]},P.value=h.value.tags.join(", "),v.value=!0},Kn=T=>{be.value={...T,fields:T.fields.map(Q=>typeof Q=="string"?{name:Q,type:"text",placeholder:`Enter ${Q}`}:{...Q})},se.value=!0},an=T=>{confirm("Are you sure you want to delete this template? This action cannot be undone.")&&(A.value=A.value.filter(Q=>Q.id!==T))},Wn=async()=>{O.value=!0,J.value="";try{await Ie.downloadFile("/api/knowledge/export/download",`knowledge_base_export_${new Date().toISOString().split("T")[0]}.json`),J.value="Knowledge base exported successfully!",W.value="success"}catch(T){console.error("Export error:",T),J.value="Error exporting knowledge base.",W.value="error"}finally{O.value=!1}},Hn=async()=>{if(confirm("Are you sure you want to cleanup old entries? This action cannot be undone.")){M.value=!0,J.value="";try{const T=await Ie.cleanupKnowledge();J.value=T.message||"Cleanup completed successfully!",W.value="success"}catch(T){console.error("Cleanup error:",T),J.value="Error cleaning up knowledge base.",W.value="error"}finally{M.value=!1}}},rn=async()=>{de.value=!0,me.value="";try{K.value=await Ie.getKnowledgeStats(),F.value=await Ie.getDetailedKnowledgeStats(),me.value="Statistics loaded successfully!",Re.value="success"}catch(T){console.error("Stats loading error:",T),me.value="Error loading statistics.",Re.value="error"}finally{de.value=!1}},bs=b([]),He=b(!1),Us=async()=>{try{He.value=!0;const Q=await(await Ie.get("/api/knowledge_base/categories")).json();bs.value=Q.categories||[]}catch(T){console.error("Error loading categories:",T),bs.value=[]}finally{He.value=!1}},qn=()=>{Us()},Gn=T=>{s.value="entries",p.value=T,Ae()},cn=T=>{},ys=b([]),N=b(!1),ke=b(!1),et=async()=>{try{N.value=!0;const Q=await(await Ie.get("/api/knowledge_base/system_knowledge/documentation")).json();ys.value=Q.documentation||[]}catch(T){console.error("Error loading system knowledge:",T),ys.value=[]}finally{N.value=!1}},It=()=>{et()},At=async()=>{try{ke.value=!0;const T=await fetch("http://localhost:8001/api/knowledge_base/system_knowledge/import_documentation",{method:"POST",headers:{"Content-Type":"application/json"}});if(!T.ok)throw new Error("Failed to import documentation");const Q=await T.json();Qe(`Documentation imported successfully! Imported ${Q.count||0} documents.`),await et()}catch(T){console.error("Error importing documentation:",T),ot("Failed to import documentation: "+T.message)}finally{ke.value=!1}},jt=T=>({guide:"",api:"",tutorial:"",reference:"",configuration:"",documentation:""})[T]||"",Qt=T=>{},cs=T=>{if(T.immutable){ot("This document is immutable and cannot be edited");return}},aa=T=>{},ra=T=>{const Q=T.content||T.description||"";return Q.length>200?Q.substring(0,200)+"...":Q},ca=T=>T<1024?`${T} chars`:T<1024*1024?`${Math.round(T/1024)} KB`:`${Math.round(T/(1024*1024))} MB`,$n=b([]),zn=b(!1),Jn=b(!1),dn=async()=>{try{zn.value=!0;const Q=await(await Ie.get("/api/knowledge_base/system_knowledge/prompts")).json();$n.value=Q.prompts||[]}catch(T){console.error("Error loading system prompts:",T),$n.value=[]}finally{zn.value=!1}},da=()=>{dn()},ua=async()=>{try{Jn.value=!0;const T=await fetch("http://localhost:8001/api/knowledge_base/system_knowledge/import_prompts",{method:"POST",headers:{"Content-Type":"application/json"}});if(!T.ok)throw new Error("Failed to import prompts");const Q=await T.json();Qe(`Prompts imported successfully! Imported ${Q.count||0} prompts.`),await dn()}catch(T){console.error("Error importing prompts:",T),ot("Failed to import prompts: "+T.message)}finally{Jn.value=!1}},fa=T=>({agent:"",chat:"",system:"",tool:"",analysis:"",creative:""})[T]||"",ma=T=>{},pa=T=>{},ga=T=>{if(T.immutable){ot("This prompt is immutable and cannot be edited");return}},va=T=>{},ha=()=>{},ba=T=>{const Q=T||"";return Q.length>100?Q.substring(0,100)+"...":Q};yt(_,T=>{T&&y()}),it(async()=>{D(),await Yn()});const Yn=async()=>{try{switch(s.value){case"search":break;case"categories":await Us();break;case"entries":await ce();break;case"system":await et();break;case"prompts":await dn();break;case"stats":await rn();break;default:await ce();break}}catch(T){console.error("Error loading tab data:",T)}};return yt(s,async(T,Q)=>{T!==Q&&await Yn()}),{activeTab:s,tabs:e,searchQuery:o,searchResults:t,searching:i,searchPerformed:r,lastSearchQuery:l,performSearch:ne,knowledgeEntries:a,filteredKnowledgeEntries:u,entriesSearchQuery:p,loading:f,showCreateModal:v,showEditModal:w,showViewModal:k,currentEntry:h,tagsInput:P,newLink:x,loadKnowledgeEntries:ce,loadDataForActiveTab:Yn,filterEntries:Ae,refreshEntries:g,getEntryTitle:oe,getEntryPreview:te,formatDate:Y,viewEntry:$,editEntry:ge,duplicateEntry:_e,deleteEntry:Ue,saveEntry:Ve,closeModals:Ye,updateTags:Mt,removeTag:st,addLink:rt,removeLink:wt,showSuccess:Qe,showError:ot,isUrlEntry:we,crawlUrl:E,extractUrlFromContent:R,isUrlSource:ue,crawlCurrentEntry:Fe,crawlingInModal:Ce,showFileSelector:_,selectedFile:S,availableFiles:L,handleFileUpload:I,selectFileForKnowledge:V,getFileIcon:H,formatFileSize:ie,addContentType:z,textContent:q,textTitle:X,textSource:Ee,urlContent:Pe,urlMethod:ee,adding:xe,addMessage:fe,addMessageType:Z,addContent:le,exporting:O,cleaning:M,manageMessage:J,manageMessageType:W,exportKnowledgeBase:Wn,cleanupKnowledgeBase:Hn,stats:K,detailedStats:F,loadingStats:de,statsMessage:me,statsMessageType:Re,loadStats:rn,formatFileSize:ie,knowledgeTemplates:A,showCreateTemplateModal:ae,showEditTemplateModal:se,currentTemplate:be,useTemplate:Bn,editTemplate:Kn,deleteTemplate:an,categories:bs,loadingCategories:He,loadCategories:Us,refreshCategories:qn,browseCategory:Gn,editCategory:cn,systemKnowledge:ys,loadingSystemKnowledge:N,importingDocs:ke,loadSystemKnowledge:et,refreshSystemKnowledge:It,importSystemDocs:At,getDocTypeIcon:jt,viewSystemDoc:Qt,editSystemDoc:cs,exportSystemDoc:aa,getDocPreview:ra,formatContentSize:ca,systemPrompts:$n,loadingSystemPrompts:zn,importingPrompts:Jn,loadSystemPrompts:dn,refreshSystemPrompts:da,importSystemPrompts:ua,getPromptIcon:fa,useSystemPrompt:ma,viewSystemPrompt:pa,editSystemPrompt:ga,duplicateSystemPrompt:va,createSystemPrompt:ha,getPromptPreview:ba}}},Iy={class:"knowledge-manager"},Py={class:"tabs"},Ry=["onClick"],Dy={key:0,class:"tab-content"},My={class:"search-form"},Ay=["disabled"],Uy={key:0,class:"search-results"},Ly={class:"result-score"},Oy={class:"result-content"},Fy={key:0,class:"result-metadata"},Ny={key:1,class:"no-results"},Vy={key:1,class:"tab-content"},jy={class:"categories-header"},By={key:0,class:"loading-message"},Ky={key:1,class:"categories-grid"},Wy={class:"category-icon"},Hy={class:"category-description"},qy={class:"category-stats"},Gy={class:"stat-item"},$y={key:0,class:"stat-item"},zy={class:"category-actions"},Jy=["onClick"],Yy=["onClick"],Qy={key:2,class:"no-categories"},Zy={key:2,class:"tab-content"},Xy={class:"system-knowledge-header"},e1={class:"header-actions"},t1=["disabled"],s1={key:0,class:"loading-message"},n1={key:1,class:"system-knowledge-list"},o1={class:"doc-header"},l1={class:"doc-title"},i1={class:"doc-type-icon"},a1={class:"doc-badges"},r1={class:"badge doc-type"},c1={class:"doc-actions"},d1=["onClick"],u1=["onClick","disabled"],f1=["onClick"],m1={class:"doc-preview"},p1={class:"doc-meta"},g1={key:0,class:"doc-source"},v1={key:1,class:"doc-version"},h1={key:2,class:"doc-updated"},b1={key:3,class:"doc-size"},y1={key:2,class:"no-system-knowledge"},w1={class:"empty-state"},k1=["disabled"],_1={key:3,class:"tab-content"},x1={class:"system-prompts-header"},C1={class:"header-actions"},S1=["disabled"],T1={key:0,class:"loading-message"},E1={key:1,class:"system-prompts-grid"},I1={class:"prompt-header"},P1={class:"prompt-title"},R1={class:"prompt-icon"},D1={class:"prompt-actions"},M1=["onClick"],A1=["onClick"],U1=["onClick","disabled"],L1=["onClick"],O1={class:"prompt-description"},F1={class:"prompt-preview"},N1={class:"prompt-meta"},V1={key:0,class:"prompt-tags"},j1={key:0,class:"more-tags"},B1={class:"prompt-info"},K1={key:0,class:"prompt-category"},W1={key:1,class:"prompt-version"},H1={key:2,class:"prompt-usage"},q1={key:2,class:"no-system-prompts"},G1={class:"empty-state"},$1=["disabled"],z1={key:4,class:"tab-content"},J1={class:"templates-header"},Y1={class:"templates-grid"},Q1=["onClick"],Z1={class:"template-icon"},X1={class:"template-fields"},ew={key:0,class:"more-fields"},tw=["onClick"],sw=["onClick"],nw={key:5,class:"tab-content"},ow={class:"entries-header"},lw={class:"entries-content"},iw={class:"search-bar"},aw={key:0,class:"entries-stats"},rw={key:1,class:"entries-list"},cw={class:"entry-header"},dw={class:"entry-title"},uw={key:0,class:"entry-tags"},fw={class:"entry-actions"},mw=["onClick"],pw=["onClick"],gw=["onClick"],vw=["onClick"],hw=["onClick"],bw={class:"entry-preview"},yw={class:"entry-meta"},ww={key:0,class:"entry-source"},kw={key:1,class:"entry-date"},_w={key:2,class:"entry-collection"},xw={key:3,class:"entry-links"},Cw={key:2,class:"no-entries"},Sw={class:"empty-state"},Tw={class:"modal-header"},Ew={key:0},Iw={key:1},Pw={key:2},Rw={class:"modal-body"},Dw={class:"form-group"},Mw={class:"form-row"},Aw={class:"form-group"},Uw={class:"source-input-group"},Lw={class:"file-upload-btn",title:"Upload new file"},Ow={key:0,class:"url-hint"},Fw={key:1,class:"file-hint"},Nw={class:"form-group"},Vw={class:"form-group"},jw=["placeholder","required"],Bw={key:0,class:"auto-crawl-hint"},Kw={class:"form-group"},Ww={key:0,class:"tags-preview"},Hw=["onClick"],qw={class:"form-group"},Gw={class:"links-section"},$w={class:"link-input-group"},zw={key:0,class:"links-list"},Jw=["href"],Yw=["onClick"],Qw={class:"modal-actions"},Zw=["disabled"],Xw={key:0},e0={key:1},t0={type:"submit",class:"save-btn","aria-label":"{{ showcreatemodal ? 'create entry' : 'save changes' }}"},s0={key:1,class:"entry-view"},n0={class:"view-section"},o0={class:"content-display"},l0={class:"view-meta"},i0={key:0,class:"meta-item"},a0={key:1,class:"meta-item"},r0={key:2,class:"meta-item"},c0={class:"tags-display"},d0={key:3,class:"meta-item"},u0={key:0,class:"view-section"},f0={class:"links-display"},m0=["href"],p0={class:"modal-actions"},g0={key:7,class:"tab-content"},v0={class:"manage-actions"},h0=["disabled"],b0=["disabled"],y0={key:8,class:"tab-content"},w0=["disabled"],k0={key:0,class:"stats-grid"},_0={class:"stat-card"},x0={class:"stat-value"},C0={class:"stat-card"},S0={class:"stat-value"},T0={class:"stat-card"},E0={class:"stat-value"},I0={class:"stat-card"},P0={class:"stat-value"},R0={key:1,class:"detailed-stats"},D0={class:"modal-header"},M0={class:"modal-body"},A0={class:"file-list-container"},U0={key:0,class:"loading-files"},L0={key:1,class:"file-list"},O0=["onClick"],F0={class:"file-icon"},N0={class:"file-name"},V0={class:"file-size"};function j0(s,e,o,t,i,r){return c(),d("div",Iy,[n("div",Py,[(c(!0),d(pe,null,ye(t.tabs,l=>(c(),d("button",{key:l.id,class:G(["tab-button",{active:t.activeTab===l.id}]),onClick:a=>t.activeTab=l.id,"aria-label":"{{ tab.label }}"},m(l.label),11,Ry))),128))]),t.activeTab==="search"?(c(),d("div",Dy,[e[60]||(e[60]=n("h3",null,"Search Knowledge Base",-1)),n("div",My,[B(n("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>t.searchQuery=l),type:"text",placeholder:"Enter search query...",onKeyup:e[1]||(e[1]=ve((...l)=>t.performSearch&&t.performSearch(...l),["enter"]))},null,544),[[he,t.searchQuery]]),n("button",{onClick:e[2]||(e[2]=(...l)=>t.performSearch&&t.performSearch(...l)),disabled:t.searching,"aria-label":"{{ searching ? 'searching...' : 'search' }}"},m(t.searching?"Searching...":"Search"),9,Ay)]),t.searchResults.length>0?(c(),d("div",Uy,[n("h4",null,"Search Results ("+m(t.searchResults.length)+")",1),(c(!0),d(pe,null,ye(t.searchResults,(l,a)=>(c(),d("div",{key:l.id||`result-${a}`,class:"search-result"},[n("div",Ly,"Score: "+m(l.score?.toFixed(3)||"N/A"),1),n("div",Oy,m(l.content||l.text||"No content"),1),l.metadata?(c(),d("div",Fy,[(c(!0),d(pe,null,ye(l.metadata,(u,p)=>(c(),d("span",{key:p},[n("strong",null,m(p)+":",1),U(" "+m(u),1)]))),128))])):C("",!0)]))),128))])):t.searchPerformed&&!t.searching?(c(),d("div",Ny,' No results found for "'+m(t.lastSearchQuery)+'" ',1)):C("",!0)])):C("",!0),t.activeTab==="categories"?(c(),d("div",Vy,[n("div",jy,[e[61]||(e[61]=n("h3",null,"Knowledge Categories",-1)),n("button",{onClick:e[3]||(e[3]=(...l)=>t.refreshCategories&&t.refreshCategories(...l)),class:"refresh-btn","aria-label":"Refresh"},"Refresh")]),t.loadingCategories?(c(),d("div",By," Loading categories... ")):t.categories.length>0?(c(),d("div",Ky,[(c(!0),d(pe,null,ye(t.categories,l=>(c(),d("div",{key:l.name,class:"category-card"},[n("div",Wy,m(l.icon||""),1),n("h4",null,m(l.name),1),n("p",Hy,m(l.description||"No description available"),1),n("div",qy,[n("span",Gy,[e[62]||(e[62]=n("span",{class:"icon"},"",-1)),U(" "+m(l.count||0)+" entries ",1)]),l.last_updated?(c(),d("span",$y,[e[63]||(e[63]=n("span",{class:"icon"},"",-1)),U(" "+m(t.formatDate(l.last_updated)),1)])):C("",!0)]),n("div",zy,[n("button",{onClick:a=>t.browseCategory(l.name),class:"browse-btn","aria-label":"Browse"},"Browse",8,Jy),n("button",{onClick:a=>t.editCategory(l),class:"edit-btn","aria-label":"Edit"},"Edit",8,Yy)])]))),128))])):(c(),d("div",Qy,e[64]||(e[64]=[n("div",{class:"empty-state"},[n("span",{class:"icon large"},""),n("h4",null,"No categories found"),n("p",null,"Categories will appear here as you add knowledge entries with different collections.")],-1)])))])):C("",!0),t.activeTab==="system"?(c(),d("div",Zy,[n("div",Xy,[e[65]||(e[65]=n("h3",null,"System Knowledge & Documentation",-1)),n("div",e1,[n("button",{onClick:e[4]||(e[4]=(...l)=>t.refreshSystemKnowledge&&t.refreshSystemKnowledge(...l)),class:"refresh-btn","aria-label":"Refresh"},"Refresh"),n("button",{onClick:e[5]||(e[5]=(...l)=>t.importSystemDocs&&t.importSystemDocs(...l)),class:"import-btn",disabled:t.importingDocs,"aria-label":"{{ importingdocs ? 'importing...' : 'import documentation' }}"},m(t.importingDocs?"Importing...":"Import Documentation"),9,t1)])]),t.loadingSystemKnowledge?(c(),d("div",s1," Loading system knowledge... ")):t.systemKnowledge.length>0?(c(),d("div",n1,[(c(!0),d(pe,null,ye(t.systemKnowledge,l=>(c(),d("div",{key:l.id,class:"system-doc-item"},[n("div",o1,[n("div",l1,[n("span",i1,m(t.getDocTypeIcon(l.type)),1),n("h4",null,m(l.title||l.name),1),n("div",a1,[n("span",r1,m(l.type||"documentation"),1),n("span",{class:G(["badge doc-status",l.status])},m(l.status||"active"),3)])]),n("div",c1,[n("button",{onClick:a=>t.viewSystemDoc(l),class:"view-btn",title:"View"},"",8,d1),n("button",{onClick:a=>t.editSystemDoc(l),class:"edit-btn",title:"Edit",disabled:l.immutable},"",8,u1),n("button",{onClick:a=>t.exportSystemDoc(l),class:"export-btn",title:"Export"},"",8,f1)])]),n("div",m1,[n("p",null,m(t.getDocPreview(l)),1)]),n("div",p1,[l.source?(c(),d("span",g1,[e[66]||(e[66]=n("span",{class:"icon"},"",-1)),U(" "+m(l.source),1)])):C("",!0),l.version?(c(),d("span",v1,[e[67]||(e[67]=n("span",{class:"icon"},"",-1)),U(" v"+m(l.version),1)])):C("",!0),l.updated_at?(c(),d("span",h1,[e[68]||(e[68]=n("span",{class:"icon"},"",-1)),U(" "+m(t.formatDate(l.updated_at)),1)])):C("",!0),l.content?(c(),d("span",b1,[e[69]||(e[69]=n("span",{class:"icon"},"",-1)),U(" "+m(t.formatContentSize(l.content.length)),1)])):C("",!0)])]))),128))])):(c(),d("div",y1,[n("div",w1,[e[70]||(e[70]=n("span",{class:"icon large"},"",-1)),e[71]||(e[71]=n("h4",null,"No system documentation found",-1)),e[72]||(e[72]=n("p",null,"System documentation will appear here after import or creation.",-1)),n("button",{onClick:e[6]||(e[6]=(...l)=>t.importSystemDocs&&t.importSystemDocs(...l)),class:"import-btn primary",disabled:t.importingDocs,"aria-label":"{{ importingdocs ? 'importing...' : 'import system documentation' }}"},m(t.importingDocs?"Importing...":"Import System Documentation"),9,k1)])]))])):C("",!0),t.activeTab==="prompts"?(c(),d("div",_1,[n("div",x1,[e[73]||(e[73]=n("h3",null,"System Prompts & Templates",-1)),n("div",C1,[n("button",{onClick:e[7]||(e[7]=(...l)=>t.refreshSystemPrompts&&t.refreshSystemPrompts(...l)),class:"refresh-btn","aria-label":"Refresh"},"Refresh"),n("button",{onClick:e[8]||(e[8]=(...l)=>t.createSystemPrompt&&t.createSystemPrompt(...l)),class:"create-btn","aria-label":"+ create prompt"},"+ Create Prompt"),n("button",{onClick:e[9]||(e[9]=(...l)=>t.importSystemPrompts&&t.importSystemPrompts(...l)),class:"import-btn",disabled:t.importingPrompts,"aria-label":"{{ importingprompts ? 'importing...' : 'import prompts' }}"},m(t.importingPrompts?"Importing...":"Import Prompts"),9,S1)])]),t.loadingSystemPrompts?(c(),d("div",T1," Loading system prompts... ")):t.systemPrompts.length>0?(c(),d("div",E1,[(c(!0),d(pe,null,ye(t.systemPrompts,l=>(c(),d("div",{key:l.id,class:"prompt-card"},[n("div",I1,[n("div",P1,[n("span",R1,m(t.getPromptIcon(l.category)),1),n("h4",null,m(l.name||l.title),1)]),n("div",D1,[n("button",{onClick:a=>t.useSystemPrompt(l),class:"use-btn",title:"Use Prompt"},"",8,M1),n("button",{onClick:a=>t.viewSystemPrompt(l),class:"view-btn",title:"View"},"",8,A1),n("button",{onClick:a=>t.editSystemPrompt(l),class:"edit-btn",title:"Edit",disabled:l.immutable},"",8,U1),n("button",{onClick:a=>t.duplicateSystemPrompt(l),class:"duplicate-btn",title:"Duplicate"},"",8,L1)])]),n("div",O1,[n("p",null,m(l.description||"No description available"),1)]),n("div",F1,[n("code",null,m(t.getPromptPreview(l.template||l.content)),1)]),n("div",N1,[l.tags&&l.tags.length>0?(c(),d("div",V1,[(c(!0),d(pe,null,ye(l.tags.slice(0,3),a=>(c(),d("span",{key:a,class:"tag"},m(a),1))),128)),l.tags.length>3?(c(),d("span",j1,"+"+m(l.tags.length-3)+" more",1)):C("",!0)])):C("",!0),n("div",B1,[l.category?(c(),d("span",K1,[e[74]||(e[74]=n("span",{class:"icon"},"",-1)),U(" "+m(l.category),1)])):C("",!0),l.version?(c(),d("span",W1,[e[75]||(e[75]=n("span",{class:"icon"},"",-1)),U(" v"+m(l.version),1)])):C("",!0),l.usage_count!==void 0?(c(),d("span",H1,[e[76]||(e[76]=n("span",{class:"icon"},"",-1)),U(" "+m(l.usage_count)+" uses ",1)])):C("",!0)])])]))),128))])):(c(),d("div",q1,[n("div",G1,[e[77]||(e[77]=n("span",{class:"icon large"},"",-1)),e[78]||(e[78]=n("h4",null,"No system prompts found",-1)),e[79]||(e[79]=n("p",null,"System prompts and templates will appear here after import or creation.",-1)),n("button",{onClick:e[10]||(e[10]=(...l)=>t.importSystemPrompts&&t.importSystemPrompts(...l)),class:"import-btn primary",disabled:t.importingPrompts,"aria-label":"{{ importingprompts ? 'importing...' : 'import system prompts' }}"},m(t.importingPrompts?"Importing...":"Import System Prompts"),9,$1)])]))])):C("",!0),t.activeTab==="templates"?(c(),d("div",z1,[n("div",J1,[e[81]||(e[81]=n("h3",null,"Knowledge Entry Templates",-1)),n("button",{onClick:e[11]||(e[11]=l=>t.showCreateTemplateModal=!0),class:"create-btn","aria-label":"Button"},e[80]||(e[80]=[n("span",{class:"icon"},"",-1),U(" Create Template ",-1)]))]),n("div",Y1,[(c(!0),d(pe,null,ye(t.knowledgeTemplates,l=>(c(),d("div",{key:l.id,class:"template-card",onClick:a=>t.useTemplate(l),tabindex:"0",onKeyup:[e[15]||(e[15]=ve(a=>a.target.click(),["enter"])),e[16]||(e[16]=ve(a=>a.target.click(),["space"]))]},[n("div",Z1,m(l.icon),1),n("h4",null,m(l.name),1),n("p",null,m(l.description),1),n("div",X1,[(c(!0),d(pe,null,ye(l.fields.slice(0,3),a=>(c(),d("span",{key:a,class:"field-tag"},m(typeof a=="string"?a:a.name),1))),128)),l.fields.length>3?(c(),d("span",ew,"+"+m(l.fields.length-3)+" more",1)):C("",!0)]),n("div",{class:"template-actions",onClick:e[12]||(e[12]=ze(()=>{},["stop"])),tabindex:"0",onKeyup:[e[13]||(e[13]=ve(a=>a.target.click(),["enter"])),e[14]||(e[14]=ve(a=>a.target.click(),["space"]))]},[n("button",{onClick:a=>t.editTemplate(l),class:"edit-template-btn",title:"Edit Template"},"",8,tw),n("button",{onClick:a=>t.deleteTemplate(l.id),class:"delete-template-btn",title:"Delete Template"},"",8,sw)],32)],40,Q1))),128)),n("div",{class:"template-card add-template",onClick:e[17]||(e[17]=l=>t.showCreateTemplateModal=!0),tabindex:"0",onKeyup:[e[18]||(e[18]=ve(l=>l.target.click(),["enter"])),e[19]||(e[19]=ve(l=>l.target.click(),["space"]))]},e[82]||(e[82]=[n("div",{class:"template-icon"},"",-1),n("h4",null,"Create Custom Template",-1),n("p",null,"Design your own knowledge entry template",-1)]),32)])])):C("",!0),t.activeTab==="entries"?(c(),d("div",nw,[n("div",ow,[e[84]||(e[84]=n("h3",null,"Knowledge Entries",-1)),n("button",{onClick:e[20]||(e[20]=l=>t.showCreateModal=!0),class:"create-btn","aria-label":"Button"},e[83]||(e[83]=[n("span",{class:"icon"},"+",-1),U(" Add New Entry ",-1)]))]),n("div",lw,[n("div",iw,[B(n("input",{type:"text","onUpdate:modelValue":e[21]||(e[21]=l=>t.entriesSearchQuery=l),placeholder:"Search entries by content, source, or tags...",class:"search-input"},null,512),[[he,t.entriesSearchQuery]]),n("button",{onClick:e[22]||(e[22]=(...l)=>t.filterEntries&&t.filterEntries(...l)),class:"search-btn","aria-label":"Search"},"Search"),n("button",{onClick:e[23]||(e[23]=(...l)=>t.refreshEntries&&t.refreshEntries(...l)),class:"refresh-btn","aria-label":"Refresh"},"Refresh")]),t.knowledgeEntries.length>0?(c(),d("div",aw,[n("span",null,m(t.filteredKnowledgeEntries.length)+" of "+m(t.knowledgeEntries.length)+" entries",1)])):C("",!0),t.knowledgeEntries.length>0?(c(),d("div",rw,[(c(!0),d(pe,null,ye(t.filteredKnowledgeEntries,l=>(c(),d("div",{key:l.id,class:"entry-item"},[n("div",cw,[n("div",dw,[n("h4",null,m(t.getEntryTitle(l)),1),l.metadata&&l.metadata.tags?(c(),d("div",uw,[(c(!0),d(pe,null,ye(l.metadata.tags,a=>(c(),d("span",{key:a,class:"tag"},m(a),1))),128))])):C("",!0)]),n("div",fw,[n("button",{onClick:a=>t.viewEntry(l),class:"view-btn",title:"View Details"},e[85]||(e[85]=[n("span",{class:"icon"},"",-1)]),8,mw),n("button",{onClick:a=>t.editEntry(l),class:"edit-btn",title:"Edit"},e[86]||(e[86]=[n("span",{class:"icon"},"",-1)]),8,pw),t.isUrlEntry(l)?(c(),d("button",{key:0,onClick:a=>t.crawlUrl(l),class:"crawl-btn",title:"Crawl URL Content"},e[87]||(e[87]=[n("span",{class:"icon"},"",-1)]),8,gw)):C("",!0),n("button",{onClick:a=>t.duplicateEntry(l),class:"duplicate-btn",title:"Duplicate"},e[88]||(e[88]=[n("span",{class:"icon"},"",-1)]),8,vw),n("button",{onClick:a=>t.deleteEntry(l.id),class:"delete-btn",title:"Delete"},e[89]||(e[89]=[n("span",{class:"icon"},"",-1)]),8,hw)])]),n("div",bw,[n("p",null,m(t.getEntryPreview(l)),1)]),n("div",yw,[l.metadata&&l.metadata.source?(c(),d("span",ww,[e[90]||(e[90]=n("span",{class:"icon"},"",-1)),U(" "+m(l.metadata.source),1)])):C("",!0),l.metadata&&l.metadata.created_at?(c(),d("span",kw,[e[91]||(e[91]=n("span",{class:"icon"},"",-1)),U(" "+m(t.formatDate(l.metadata.created_at)),1)])):C("",!0),l.collection?(c(),d("span",_w,[e[92]||(e[92]=n("span",{class:"icon"},"",-1)),U(" "+m(l.collection),1)])):C("",!0),l.metadata&&l.metadata.links&&l.metadata.links.length>0?(c(),d("span",xw,[e[93]||(e[93]=n("span",{class:"icon"},"",-1)),U(" "+m(l.metadata.links.length)+" links ",1)])):C("",!0)])]))),128))])):(c(),d("div",Cw,[n("div",Sw,[e[94]||(e[94]=n("span",{class:"icon large"},"",-1)),e[95]||(e[95]=n("h4",null,"No knowledge entries found",-1)),e[96]||(e[96]=n("p",null,"Start by adding your first knowledge entry or uploading documents.",-1)),n("button",{onClick:e[24]||(e[24]=l=>t.showCreateModal=!0),class:"create-btn primary","aria-label":"Add your first entry"}," Add Your First Entry ")])]))])])):C("",!0),t.showCreateModal||t.showEditModal||t.showViewModal?(c(),d("div",{key:6,class:"modal-overlay",onClick:e[45]||(e[45]=(...l)=>t.closeModals&&t.closeModals(...l)),tabindex:"0",onKeyup:[e[46]||(e[46]=ve(l=>l.target.click(),["enter"])),e[47]||(e[47]=ve(l=>l.target.click(),["space"]))]},[n("div",{class:"modal",onClick:e[42]||(e[42]=ze(()=>{},["stop"])),tabindex:"0",onKeyup:[e[43]||(e[43]=ve(l=>l.target.click(),["enter"])),e[44]||(e[44]=ve(l=>l.target.click(),["space"]))]},[n("div",Tw,[t.showCreateModal?(c(),d("h3",Ew,"Create New Entry")):t.showEditModal?(c(),d("h3",Iw,"Edit Entry")):(c(),d("h3",Pw,"View Entry")),n("button",{onClick:e[25]||(e[25]=(...l)=>t.closeModals&&t.closeModals(...l)),class:"close-btn","aria-label":""},"")]),n("div",Rw,[t.showCreateModal||t.showEditModal?(c(),d("form",{key:0,onSubmit:e[39]||(e[39]=ze((...l)=>t.saveEntry&&t.saveEntry(...l),["prevent"]))},[n("div",Dw,[e[97]||(e[97]=n("label",{for:"entry-title"},"Title/Subject",-1)),B(n("input",{type:"text",id:"entry-title","onUpdate:modelValue":e[26]||(e[26]=l=>t.currentEntry.title=l),placeholder:"Enter a descriptive title for this entry"},null,512),[[he,t.currentEntry.title]])]),n("div",Mw,[n("div",Aw,[e[99]||(e[99]=n("label",{for:"entry-source"},"Source",-1)),n("div",Uw,[B(n("input",{type:"text",id:"entry-source","onUpdate:modelValue":e[27]||(e[27]=l=>t.currentEntry.source=l),placeholder:"Document name, URL, or source reference"},null,512),[[he,t.currentEntry.source]]),n("button",{type:"button",onClick:e[28]||(e[28]=l=>t.showFileSelector=!0),class:"file-select-btn",title:"Select from files"},"  "),n("label",Lw,[e[98]||(e[98]=U("  ",-1)),n("input",{type:"file",onChange:e[29]||(e[29]=(...l)=>t.handleFileUpload&&t.handleFileUpload(...l)),style:{display:"none"}},null,32)])]),t.isUrlSource(t.currentEntry.source)?(c(),d("small",Ow,"  URL detected - you can leave content empty to auto-crawl ")):C("",!0),t.selectedFile?(c(),d("small",Fw,"  Selected file: "+m(t.selectedFile.name),1)):C("",!0)]),n("div",Nw,[e[100]||(e[100]=n("label",{for:"entry-collection"},"Collection",-1)),B(n("input",{type:"text",id:"entry-collection","onUpdate:modelValue":e[30]||(e[30]=l=>t.currentEntry.collection=l),placeholder:"Collection name"},null,512),[[he,t.currentEntry.collection]])])]),n("div",Vw,[e[101]||(e[101]=n("label",{for:"entry-content"},"Content",-1)),B(n("textarea",{id:"entry-content","onUpdate:modelValue":e[31]||(e[31]=l=>t.currentEntry.content=l),rows:"8",placeholder:t.isUrlSource(t.currentEntry.source)?"Leave empty to auto-crawl from URL, or enter content manually":"Enter the knowledge content...",required:!t.isUrlSource(t.currentEntry.source)},null,8,jw),[[he,t.currentEntry.content]]),t.isUrlSource(t.currentEntry.source)&&!t.currentEntry.content?(c(),d("small",Bw,"  Content will be automatically crawled from the URL when you save ")):C("",!0)]),n("div",Kw,[e[102]||(e[102]=n("label",{for:"entry-tags"},"Tags",-1)),B(n("input",{type:"text",id:"entry-tags","onUpdate:modelValue":e[32]||(e[32]=l=>t.tagsInput=l),placeholder:"Enter tags separated by commas",onInput:e[33]||(e[33]=(...l)=>t.updateTags&&t.updateTags(...l))},null,544),[[he,t.tagsInput]]),t.currentEntry.tags&&t.currentEntry.tags.length>0?(c(),d("div",Ww,[(c(!0),d(pe,null,ye(t.currentEntry.tags,l=>(c(),d("span",{key:l,class:"tag"},[U(m(l)+" ",1),n("button",{type:"button",onClick:a=>t.removeTag(l),class:"tag-remove","aria-label":""},"",8,Hw)]))),128))])):C("",!0)]),n("div",qw,[e[104]||(e[104]=n("label",null,"Links",-1)),n("div",Gw,[n("div",$w,[B(n("input",{type:"url","onUpdate:modelValue":e[34]||(e[34]=l=>t.newLink.url=l),placeholder:"https://example.com"},null,512),[[he,t.newLink.url]]),B(n("input",{type:"text","onUpdate:modelValue":e[35]||(e[35]=l=>t.newLink.title=l),placeholder:"Link title (optional)"},null,512),[[he,t.newLink.title]]),n("button",{type:"button",onClick:e[36]||(e[36]=(...l)=>t.addLink&&t.addLink(...l)),class:"add-link-btn","aria-label":"Button"},e[103]||(e[103]=[n("span",{class:"icon"},"",-1),U(" Add ",-1)]))]),t.currentEntry.links&&t.currentEntry.links.length>0?(c(),d("div",zw,[(c(!0),d(pe,null,ye(t.currentEntry.links,(l,a)=>(c(),d("div",{key:l.url||l.href||`link-${a}`,class:"link-item"},[n("a",{href:l.url,target:"_blank",class:"link-url"},m(l.title||l.url),9,Jw),n("button",{type:"button",onClick:u=>t.removeLink(a),class:"remove-btn","aria-label":""},"",8,Yw)]))),128))])):C("",!0)])]),n("div",Qw,[n("button",{type:"button",onClick:e[37]||(e[37]=(...l)=>t.closeModals&&t.closeModals(...l)),class:"cancel-btn","aria-label":"Cancel"},"Cancel"),t.showEditModal&&t.isUrlSource(t.currentEntry.source)?(c(),d("button",{key:0,type:"button",onClick:e[38]||(e[38]=(...l)=>t.crawlCurrentEntry&&t.crawlCurrentEntry(...l)),class:"crawl-btn-modal",disabled:t.crawlingInModal,"aria-label":"Button"},[t.crawlingInModal?(c(),d("span",Xw," Crawling...")):(c(),d("span",e0," Re-crawl URL"))],8,Zw)):C("",!0),n("button",t0,m(t.showCreateModal?"Create Entry":"Save Changes"),1)])],32)):(c(),d("div",s0,[n("div",n0,[e[105]||(e[105]=n("h4",null,"Content",-1)),n("div",o0,m(t.currentEntry.content),1)]),n("div",l0,[t.currentEntry.source?(c(),d("div",i0,[e[106]||(e[106]=n("strong",null,"Source:",-1)),U(" "+m(t.currentEntry.source),1)])):C("",!0),t.currentEntry.collection?(c(),d("div",a0,[e[107]||(e[107]=n("strong",null,"Collection:",-1)),U(" "+m(t.currentEntry.collection),1)])):C("",!0),t.currentEntry.tags&&t.currentEntry.tags.length>0?(c(),d("div",r0,[e[108]||(e[108]=n("strong",null,"Tags:",-1)),n("div",c0,[(c(!0),d(pe,null,ye(t.currentEntry.tags,l=>(c(),d("span",{key:l,class:"tag"},m(l),1))),128))])])):C("",!0),t.currentEntry.created_at?(c(),d("div",d0,[e[109]||(e[109]=n("strong",null,"Created:",-1)),U(" "+m(t.formatDate(t.currentEntry.created_at)),1)])):C("",!0)]),t.currentEntry.links&&t.currentEntry.links.length>0?(c(),d("div",u0,[e[111]||(e[111]=n("h4",null,"Links",-1)),n("div",f0,[(c(!0),d(pe,null,ye(t.currentEntry.links,l=>(c(),d("div",{key:l.url,class:"link-display"},[e[110]||(e[110]=n("span",{class:"icon"},"",-1)),n("a",{href:l.url,target:"_blank"},m(l.title||l.url),9,m0)]))),128))])])):C("",!0),n("div",p0,[n("button",{onClick:e[40]||(e[40]=l=>t.editEntry(t.currentEntry)),class:"edit-btn","aria-label":"Edit entry"},"Edit Entry"),n("button",{onClick:e[41]||(e[41]=(...l)=>t.closeModals&&t.closeModals(...l)),class:"close-btn","aria-label":"Close"},"Close")])]))])],32)],32)):C("",!0),t.activeTab==="manage"?(c(),d("div",g0,[e[112]||(e[112]=n("h3",null,"Manage Knowledge Base",-1)),n("div",v0,[n("button",{onClick:e[48]||(e[48]=(...l)=>t.exportKnowledgeBase&&t.exportKnowledgeBase(...l)),disabled:t.exporting,"aria-label":"{{ exporting ? 'exporting...' : 'export knowledge base' }}"},m(t.exporting?"Exporting...":"Export Knowledge Base"),9,h0),n("button",{onClick:e[49]||(e[49]=(...l)=>t.cleanupKnowledgeBase&&t.cleanupKnowledgeBase(...l)),disabled:t.cleaning,class:"warning","aria-label":"{{ cleaning ? 'cleaning...' : 'cleanup old entries' }}"},m(t.cleaning?"Cleaning...":"Cleanup Old Entries"),9,b0)]),t.manageMessage?(c(),d("div",{key:0,class:G(["message",t.manageMessageType])},m(t.manageMessage),3)):C("",!0)])):C("",!0),t.activeTab==="stats"?(c(),d("div",y0,[e[122]||(e[122]=n("h3",null,"Knowledge Base Statistics",-1)),n("button",{onClick:e[50]||(e[50]=(...l)=>t.loadStats&&t.loadStats(...l)),disabled:t.loadingStats,class:"refresh-button","aria-label":"{{ loadingstats ? 'loading...' : 'refresh statistics' }}"},m(t.loadingStats?"Loading...":"Refresh Statistics"),9,w0),t.stats?(c(),d("div",k0,[n("div",_0,[e[113]||(e[113]=n("h4",null,"Total Facts",-1)),n("div",x0,m(t.stats.total_facts||0),1),e[114]||(e[114]=n("div",{class:"stat-description"},"Stored knowledge entries",-1))]),n("div",C0,[e[115]||(e[115]=n("h4",null,"Total Documents",-1)),n("div",S0,m(t.stats.total_documents||0),1),e[116]||(e[116]=n("div",{class:"stat-description"},"Document entries",-1))]),n("div",T0,[e[117]||(e[117]=n("h4",null,"Total Vectors",-1)),n("div",E0,m(t.stats.total_vectors||0),1),e[118]||(e[118]=n("div",{class:"stat-description"},"Vector embeddings",-1))]),n("div",I0,[e[119]||(e[119]=n("h4",null,"Database Size",-1)),n("div",P0,m(t.formatFileSize(t.stats.db_size||0)),1),e[120]||(e[120]=n("div",{class:"stat-description"},"Storage used",-1))])])):C("",!0),t.detailedStats?(c(),d("div",R0,[e[121]||(e[121]=n("h4",null,"Detailed Statistics",-1)),n("pre",null,m(JSON.stringify(t.detailedStats,null,2)),1)])):C("",!0),t.statsMessage?(c(),d("div",{key:2,class:G(["message",t.statsMessageType])},m(t.statsMessage),3)):C("",!0)])):C("",!0),t.showFileSelector?(c(),d("div",{key:9,class:"modal-overlay",onClick:e[57]||(e[57]=l=>t.showFileSelector=!1),tabindex:"0",onKeyup:[e[58]||(e[58]=ve(l=>l.target.click(),["enter"])),e[59]||(e[59]=ve(l=>l.target.click(),["space"]))]},[n("div",{class:"modal file-selector-modal",onClick:e[54]||(e[54]=ze(()=>{},["stop"])),tabindex:"0",onKeyup:[e[55]||(e[55]=ve(l=>l.target.click(),["enter"])),e[56]||(e[56]=ve(l=>l.target.click(),["space"]))]},[n("div",D0,[e[123]||(e[123]=n("h3",null,"Select File",-1)),n("button",{onClick:e[51]||(e[51]=l=>t.showFileSelector=!1),class:"close-btn","aria-label":""},"")]),n("div",M0,[n("div",A0,[t.availableFiles.length===0?(c(),d("div",U0," Loading files... ")):(c(),d("div",L0,[(c(!0),d(pe,null,ye(t.availableFiles,l=>(c(),d("div",{key:l.name,class:"file-item",onClick:a=>t.selectFileForKnowledge(l),tabindex:"0",onKeyup:[e[52]||(e[52]=ve(a=>a.target.click(),["enter"])),e[53]||(e[53]=ve(a=>a.target.click(),["space"]))]},[n("span",F0,m(t.getFileIcon(l)),1),n("span",N0,m(l.name),1),n("span",V0,m(t.formatFileSize(l.size)),1)],40,O0))),128))]))])])],32)],32)):C("",!0)])}const B0=Xe(Ey,[["render",j0],["__scopeId","data-v-44534660"]]);class K0{constructor(){this.defaultSettings={message_display:{show_thoughts:!0,show_json:!1,show_utility:!1,show_planning:!0,show_debug:!1},chat:{auto_scroll:!0,max_messages:100,default_welcome_message:"Hello! How can I assist you today?"},backend:{use_phi2:!1,api_endpoint:"http://localhost:8001",ollama_endpoint:"http://localhost:11434",ollama_model:"deepseek-r1:14b",streaming:!1},ui:{theme:"light",font_size:"medium"}},this.settings=rs({...this.defaultSettings}),this.initialized=!1,this.loadSettings()}async loadSettings(){try{const e=localStorage.getItem("chat_settings");if(e){const o=JSON.parse(e),t=this.mergeDeep(this.defaultSettings,o);Object.assign(this.settings,t)}try{const o=await Ie.getSettings();if(o){const t=this.mergeDeep(this.settings,o);Object.assign(this.settings,t),localStorage.setItem("chat_settings",JSON.stringify(this.settings))}}catch(o){console.warn("Could not load settings from backend, using localStorage/defaults:",o.message)}this.initialized=!0}catch(e){console.error("Error loading settings:",e),Object.assign(this.settings,this.defaultSettings),this.initialized=!0}}async saveSettings(){try{localStorage.setItem("chat_settings",JSON.stringify(this.settings)),await Ie.saveSettings(this.settings)}catch(e){throw console.error(" Error saving settings:",e),e}}saveSettingsToLocalStorage(e){try{localStorage.setItem("chat_settings",JSON.stringify(e))}catch(o){console.error("Error saving settings to localStorage:",o)}}async saveBackendSettings(){try{await Ie.saveBackendSettings(this.settings.backend)}catch(e){throw console.error("Error saving backend settings:",e),e}}async fetchBackendSettings(){try{const e=await Ie.getBackendSettings();Object.assign(this.settings.backend,e),await this.saveSettings()}catch(e){throw console.error("Error loading backend settings:",e),e}}async getSettings(){return this.initialized||await this.loadSettings(),this.settings}getSettingsSync(){return this.settings}async updateSetting(e,o){this.setNestedProperty(this.settings,e,o),await this.saveSettings()}async resetToDefaults(){this.settings={...this.defaultSettings},await this.saveSettings()}mergeDeep(e,o){const t={...e};for(const i in o)o[i]&&typeof o[i]=="object"&&!Array.isArray(o[i])?t[i]=this.mergeDeep(e[i]||{},o[i]):t[i]=o[i];return t}setNestedProperty(e,o,t){const i=o.split(".");let r=e;for(let l=0;l<i.length-1;l++)i[l]in r||(r[i[l]]={}),r=r[i[l]];r[i[i.length-1]]=t}getNestedProperty(e,o){return o.split(".").reduce((t,i)=>t?.[i],e)}async getDeveloperConfig(){try{return(await Ie.get("/api/developer/config")).data||{}}catch(e){return console.error("Failed to get developer config:",e),{enabled:!1,enhanced_errors:!0,endpoint_suggestions:!0,debug_logging:!1}}}async updateDeveloperConfig(e){try{return await Ie.post("/api/developer/config",e),!0}catch(o){return console.error("Failed to update developer config:",o),!1}}async getApiEndpoints(){try{return(await Ie.get("/api/developer/endpoints")).data||{}}catch(e){return console.error("Failed to get API endpoints:",e),{}}}async getSystemInfo(){try{return(await Ie.get("/api/developer/system-info")).data||{}}catch(e){return console.error("Failed to get system info:",e),{}}}}const gn=new K0,W0={name:"SettingsPanel",setup(){const s=[{id:"chat",label:"Chat"},{id:"backend",label:"Backend"},{id:"ui",label:"UI"},{id:"security",label:"Security"},{id:"logging",label:"Logging"},{id:"knowledgeBase",label:"Knowledge Base"},{id:"voiceInterface",label:"Voice Interface"},{id:"prompts",label:"System Prompts"},{id:"developer",label:"Developer"}],e=b("backend"),o=b("memory"),t=()=>({message_display:{show_thoughts:!0,show_json:!1,show_utility:!1,show_planning:!0,show_debug:!1},chat:{auto_scroll:!0,max_messages:100,message_retention_days:30},backend:{api_endpoint:"http://localhost:8001",server_host:"0.0.0.0",server_port:8001,chat_data_dir:"",chat_history_file:"",knowledge_base_db:"",reliability_stats_file:"",audit_log_file:"",cors_origins:[],timeout:60,max_retries:3,streaming:!1,llm:{provider_type:"local",local:{provider:"ollama",providers:{ollama:{endpoint:"http://localhost:11434/api/generate",models:[],selected_model:""},lmstudio:{endpoint:"http://localhost:1234/v1/chat/completions",models:[],selected_model:""}}},cloud:{provider:"openai",providers:{openai:{api_key:"",endpoint:"",models:[],selected_model:""},anthropic:{api_key:"",endpoint:"",models:[],selected_model:""}}},embedding:{provider:"ollama",providers:{ollama:{endpoint:"http://localhost:11434/api/embeddings",models:[],selected_model:"nomic-embed-text"},openai:{api_key:"",endpoint:"https://api.openai.com/v1/embeddings",models:["text-embedding-ada-002","text-embedding-3-small","text-embedding-3-large"],selected_model:"text-embedding-ada-002"}}}}},ui:{theme:"light",font_size:"medium",language:"en",animations:!0,developer_mode:!1},security:{enable_encryption:!1,session_timeout_minutes:30},logging:{log_level:"info",log_to_file:!1,log_file_path:""},knowledge_base:{enabled:!0,update_frequency_days:7},voice_interface:{enabled:!1,voice:"default",speech_rate:1},memory:{long_term:{enabled:!0,retention_days:30},short_term:{enabled:!0,duration_minutes:30},vector_storage:{enabled:!0,update_frequency_days:7},chromadb:{enabled:!0,path:"",collection_name:""},redis:{enabled:!1,host:"localhost",port:6379}},prompts:{list:[],selectedPrompt:null,editedContent:"",defaults:{}},developer:{enabled:!1,enhanced_errors:!0,endpoint_suggestions:!0,debug_logging:!1}}),i=b(t()),r=b(!1),l=b(null),a=b({llm:{connected:!1,current_model:null},embedding:{connected:!1,current_model:null}}),u=b(!1),p=b(""),f=b(""),v=Se({get(){return i.value.backend.cors_origins.join(", ")},set(W){i.value.backend.cors_origins=W.split(",").map(K=>K.trim()).filter(K=>K)}}),w=async()=>{try{const W=await fetch("http://localhost:8001/api/system/health");if(W.ok){const K=await W.json();a.value={llm:{connected:K.llm_status||!1,current_model:K.current_model||null},embedding:{connected:K.embedding_status||!1,current_model:K.current_embedding_model||null}}}}catch(W){console.error("Error checking health status:",W)}};let k,h;it(async()=>{await x(),r.value=!0,await se(),await J(),await w(),k=setInterval(w,1e4),h=setInterval(_,15e3)}),ut(()=>{k&&clearInterval(k),h&&clearInterval(h)});const P=(W,K)=>{const F={...W};for(const de in K)K.hasOwnProperty(de)&&(typeof K[de]=="object"&&K[de]!==null&&!Array.isArray(K[de])?F[de]=P(W[de]||{},K[de]):F[de]=K[de]);return F},x=async()=>{try{const K=await(await Ie.get("/api/settings/config")).json();i.value=P(t(),K),await _(),localStorage.setItem("chat_settings",JSON.stringify(i.value))}catch(W){console.error("Error loading settings from backend:",W);const K=localStorage.getItem("chat_settings");if(K)try{const F=JSON.parse(K);i.value=P(t(),F)}catch(F){console.error("Error parsing saved settings:",F),i.value=t()}else i.value=t()}await L()},_=async()=>{try{const K=await(await Ie.get("/api/llm/status/comprehensive")).json(),de=await(await Ie.get("/api/agent-config/agents")).json();if(console.log("Syncing settings with agent config:",{llmStatus:K,agentConfig:de.agents}),K&&i.value.backend&&i.value.backend.llm){if(i.value.backend.llm.provider_type=K.provider_type||"local",K.active_provider){const me=K.active_provider;me.type==="local"?(i.value.backend.llm.local.provider=me.name||"ollama",me.model&&i.value.backend.llm.local.providers[me.name]&&(i.value.backend.llm.local.providers[me.name].selected_model=me.model)):me.type==="cloud"&&(i.value.backend.llm.cloud.provider=me.name||"openai",me.model&&i.value.backend.llm.cloud.providers[me.name]&&(i.value.backend.llm.cloud.providers[me.name].selected_model=me.model))}K.settings&&(i.value.backend.streaming=K.settings.streaming||!1,i.value.backend.timeout=K.settings.timeout||60,i.value.backend.max_retries=K.settings.max_retries||3)}console.log("Settings synced with agent config:",{provider_type:i.value.backend.llm.provider_type,local_provider:i.value.backend.llm.local.provider,streaming:i.value.backend.streaming})}catch(W){console.error("Error syncing settings with agent config:",W)}},S=async()=>{u.value=!0,p.value="",f.value="";try{const W=JSON.parse(JSON.stringify(i.value));delete W.prompts;const F=await(await Ie.post("/api/settings/config",W)).json();await x(),p.value="Settings saved successfully!",f.value="success",setTimeout(()=>{p.value="",f.value=""},3e3)}catch(W){console.error("Error saving settings to backend:",W),p.value=`Error saving settings: ${W.message}`,f.value="error",setTimeout(()=>{p.value="",f.value=""},5e3)}finally{u.value=!1}};yt(i,()=>{r.value&&localStorage.setItem("chat_settings",JSON.stringify(i.value))},{deep:!0});const L=async()=>{try{const W=await Ie.getPrompts();i.value.prompts.list=W.prompts||[],i.value.prompts.defaults=W.defaults||{}}catch(W){console.error("Error loading prompts from backend:",W)}},A=W=>{i.value.prompts.selectedPrompt=W,i.value.prompts.editedContent=W.content||""},ae=async()=>{if(i.value.prompts.selectedPrompt)try{const W=i.value.prompts.selectedPrompt.id,K=await Ie.savePrompt(W,i.value.prompts.editedContent),F=i.value.prompts.list.findIndex(de=>de.id===W);F!==-1&&(i.value.prompts.list[F]=K),i.value.prompts.selectedPrompt=null,i.value.prompts.editedContent=""}catch(W){console.error("Error saving prompt to backend:",W)}},se=async()=>{try{const K=await(await fetch("http://localhost:8001/api/llm/models")).json();if(i.value.backend.llm.provider_type==="local"){const F=i.value.backend.llm.local.provider;if(F==="ollama"){let de=[];K.models&&Array.isArray(K.models)?K.models.length>0&&typeof K.models[0]=="object"?de=K.models.filter(Re=>Re.available!==!1&&(!Re.type||Re.type==="ollama")).map(Re=>Re.name||Re.id||Re):de=K.models:Array.isArray(K)&&(de=K.map(Re=>typeof Re=="string"?Re:Re.name||Re.id||Re)),i.value.backend.llm.local.providers.ollama.models=de,de.length===0&&(console.warn("No Ollama models found. Raw API response:",K),K.error&&console.error("API Error:",K.error)),!i.value.backend.llm.local.providers.ollama.selected_model&&de.length>0&&(i.value.backend.llm.local.providers.ollama.selected_model=de[0]);const me=i.value.backend.llm.local.providers.ollama.selected_model;me&&!de.includes(me)&&(i.value.backend.llm.local.providers.ollama.selected_model=de[0]||"")}else if(F==="lmstudio"){let de=[];K.models&&Array.isArray(K.models)?de=K.models.filter(me=>me.available&&me.type==="lmstudio").map(me=>me.name||me.id):K.data&&Array.isArray(K.data)?de=K.data.map(me=>me.id||me.name):Array.isArray(K)&&(de=K.map(me=>me.id||me.name)),i.value.backend.llm.local.providers.lmstudio.models=de,!i.value.backend.llm.local.providers.lmstudio.selected_model&&de.length>0&&(i.value.backend.llm.local.providers.lmstudio.selected_model=de[0])}}}catch(W){if(console.error("Error loading models:",W),i.value.backend.llm.provider_type==="local"){const K=i.value.backend.llm.local.provider;K==="ollama"?i.value.backend.llm.local.providers.ollama.models=[]:K==="lmstudio"&&(i.value.backend.llm.local.providers.lmstudio.models=[])}}},be=async W=>{try{const K=await Ie.revertPrompt(W),F=i.value.prompts.list.findIndex(de=>de.id===W);F!==-1&&(i.value.prompts.list[F]=K),i.value.prompts.selectedPrompt&&i.value.prompts.selectedPrompt.id===W&&(i.value.prompts.selectedPrompt=K,i.value.prompts.editedContent=K.content||"")}catch(K){console.error("Error reverting prompt to default:",K)}},z=async()=>{await se(),await Ee()},q=async()=>{await se(),await Ee()},X=async()=>{await Ee()},Ee=async()=>{try{const W=i.value.backend.llm.provider_type,K={provider_type:W,streaming:i.value.backend.streaming};if(W==="local"){const me=i.value.backend.llm.local.provider,Re=i.value.backend.llm.local.providers[me];K.local_provider=me,K.local_model=Re.selected_model,K.local_endpoint=Re.endpoint}else{const me=i.value.backend.llm.cloud.provider,Re=i.value.backend.llm.cloud.providers[me];K.cloud_provider=me,K.cloud_model=Re.selected_model,K.cloud_api_key=Re.api_key,K.cloud_endpoint=Re.endpoint}const de=await(await Ie.post("/api/llm/provider",K)).json();await w()}catch(W){console.error("Error notifying backend of provider change:",W)}},Pe=()=>{if(!i.value.backend?.llm)return"Not configured";if((i.value.backend.llm.provider_type||"local")==="local"){const K=i.value.backend.llm.local?.provider||"ollama",F=i.value.backend.llm.local?.providers?.[K]?.selected_model,de=i.value.backend.llm.local?.providers?.[K]?.endpoint;if(F){const me=de?` @ ${de}`:"";return`${K.charAt(0).toUpperCase()+K.slice(1)} - ${F}${me}`}else return`${K.charAt(0).toUpperCase()+K.slice(1)} - Not selected`}else{const K=i.value.backend.llm.cloud?.provider||"openai",F=i.value.backend.llm.cloud?.providers?.[K]?.selected_model;return F?`${K.charAt(0).toUpperCase()+K.slice(1)} - ${F}`:`${K.charAt(0).toUpperCase()+K.slice(1)} - Not selected`}},ee=async()=>{try{await gn.updateDeveloperConfig(i.value.developer),i.value.developer.enabled&&await xe()}catch(W){console.error("Error updating developer config:",W)}},xe=async()=>{try{const W=await gn.getSystemInfo(),K=await gn.getApiEndpoints();l.value={...W,total_endpoints:K.total_endpoints,available_routers:K.routers}}catch(W){console.error("Error loading developer info:",W)}},fe=async()=>{try{const W=await gn.getApiEndpoints();alert(`Found ${W.total_endpoints} API endpoints across ${W.routers?.length||0} routers. Check console for details.`)}catch(W){console.error("Error showing API endpoints:",W)}},Z=()=>{if(!i.value.backend?.llm?.embedding)return"Not configured";const W=i.value.backend.llm.embedding.provider||"ollama",K=i.value.backend.llm.embedding.providers?.[W],F=K?.selected_model;if(F){const de=K?.endpoint?` @ ${K.endpoint}`:"";return`${W.charAt(0).toUpperCase()+W.slice(1)} - ${F}${de}`}else return`${W.charAt(0).toUpperCase()+W.slice(1)} - Not selected`},O=async()=>{await J(),await M()},M=async()=>{try{const W=i.value.backend.llm.embedding.provider,K=i.value.backend.llm.embedding.providers[W],F={provider:W,model:K.selected_model,endpoint:K.endpoint};W==="openai"&&(F.api_key=K.api_key);const me=await(await Ie.post("/api/llm/embedding",F)).json();await w()}catch(W){console.error("Error notifying backend of embedding change:",W)}},J=async()=>{try{if(i.value.backend.llm.embedding.provider==="ollama"){const F=await(await fetch("http://localhost:8001/api/llm/embedding/models")).json();F.models&&Array.isArray(F.models)&&(i.value.backend.llm.embedding.providers.ollama.models=F.models,!i.value.backend.llm.embedding.providers.ollama.selected_model&&F.models.length>0&&(i.value.backend.llm.embedding.providers.ollama.selected_model=F.models[0]))}}catch(W){console.error("Error loading embedding models:",W),i.value.backend.llm.embedding.provider==="ollama"&&(i.value.backend.llm.embedding.providers.ollama.models=[])}};return{settings:i,saveSettings:S,loadModels:se,loadPrompts:L,tabs:s,activeTab:e,activeBackendSubTab:o,corsOriginsString:v,selectPrompt:A,savePrompt:ae,revertPromptToDefault:be,isSettingsLoaded:r,onProviderTypeChange:z,onLocalProviderChange:q,onCloudProviderChange:X,notifyBackendOfProviderChange:Ee,getCurrentLLMDisplay:Pe,getCurrentLLMConfig:Pe,getCurrentEmbeddingConfig:Z,onEmbeddingProviderChange:O,notifyBackendOfEmbeddingChange:M,loadEmbeddingModels:J,healthStatus:a,checkHealthStatus:w,developerInfo:l,updateDeveloperConfig:ee,loadDeveloperInfo:xe,showApiEndpoints:fe,isSaving:u,saveMessage:p,saveMessageType:f}}},H0={class:"settings-panel"},q0={class:"settings-tabs"},G0=["onClick"],$0={class:"settings-content"},z0={key:0,class:"settings-section"},J0={class:"setting-item"},Y0={class:"setting-item"},Q0={class:"setting-item"},Z0={key:1,class:"settings-section"},X0={class:"sub-tabs"},ek={key:0,class:"sub-tab-content"},tk={class:"setting-item"},sk={class:"setting-item"},nk={class:"setting-item"},ok={class:"setting-item"},lk={class:"setting-item"},ik={class:"setting-item"},ak={class:"setting-item"},rk={class:"setting-item"},ck={class:"setting-item"},dk={key:1,class:"sub-tab-content"},uk={class:"setting-item"},fk={class:"llm-status-display"},mk={class:"status-line"},pk={key:0,class:"status-line"},gk={class:"status-value"},vk={class:"status-line"},hk={class:"status-value"},bk={class:"setting-item"},yk={key:0},wk={class:"setting-item"},kk={key:0},_k={class:"setting-item"},xk={class:"setting-item"},Ck=["value"],Sk={key:1},Tk={class:"setting-item"},Ek={class:"setting-item"},Ik=["value"],Pk={key:1},Rk={class:"setting-item"},Dk={key:0},Mk={class:"setting-item"},Ak={class:"setting-item"},Uk={class:"setting-item"},Lk=["value"],Ok={key:1},Fk={class:"setting-item"},Nk={class:"setting-item"},Vk={class:"setting-item"},jk=["value"],Bk={class:"setting-item"},Kk={class:"setting-item"},Wk={class:"setting-item"},Hk={class:"settings-actions"},qk={key:2,class:"sub-tab-content"},Gk={class:"setting-item"},$k={class:"embedding-status-display"},zk={class:"status-line"},Jk={key:0,class:"status-line"},Yk={class:"status-value"},Qk={class:"status-line"},Zk={class:"status-value"},Xk={class:"setting-item"},e_={key:0},t_={class:"setting-item"},s_={class:"setting-item"},n_=["value"],o_={key:1},l_={class:"setting-item"},i_={class:"setting-item"},a_={class:"setting-item"},r_=["value"],c_={class:"settings-actions"},d_={key:3,class:"sub-tab-content"},u_={key:0,class:"setting-item"},f_={key:1,class:"setting-item"},m_=["disabled"],p_={key:2,class:"setting-item"},g_={key:3,class:"setting-item"},v_=["disabled"],h_={key:4,class:"setting-item"},b_={key:5,class:"setting-item"},y_=["disabled"],w_={key:6,class:"setting-item"},k_={key:7,class:"setting-item"},__=["disabled"],x_={key:8,class:"setting-item"},C_=["disabled"],S_={key:9,class:"setting-item"},T_={key:10,class:"setting-item"},E_=["disabled"],I_={key:11,class:"setting-item"},P_=["disabled"],R_={key:2,class:"settings-section"},D_={class:"setting-item"},M_={class:"setting-item"},A_={class:"setting-item"},U_={class:"setting-item"},L_={class:"setting-item"},O_={key:3,class:"settings-section"},F_={class:"setting-item"},N_={class:"setting-item"},V_={key:4,class:"settings-section"},j_={class:"setting-item"},B_={class:"setting-item"},K_={class:"setting-item"},W_=["disabled"],H_={key:5,class:"settings-section"},q_={class:"setting-item"},G_={class:"setting-item"},$_=["disabled"],z_={key:6,class:"settings-section"},J_={class:"setting-item"},Y_={class:"setting-item"},Q_=["disabled"],Z_={class:"setting-item"},X_=["disabled"],ex={key:7,class:"settings-section"},tx={class:"setting-item"},sx={key:0},nx={class:"setting-item"},ox={class:"setting-item"},lx={class:"setting-item"},ix={key:0,class:"developer-info"},ax={class:"info-item"},rx={class:"info-item"},cx={class:"settings-actions"},dx={key:8,class:"settings-section"},ux={class:"prompts-container"},fx={class:"prompts-list"},mx=["onClick"],px={class:"prompt-name"},gx={class:"prompt-type"},vx={key:0,class:"no-prompts"},hx={key:0,class:"prompt-editor"},bx={class:"editor-actions"},yx={class:"setting-item"},wx={class:"settings-actions"},kx=["disabled"];function _x(s,e,o,t,i,r){return c(),d("div",H0,[e[193]||(e[193]=n("h2",null,"Settings",-1)),n("div",q0,[(c(!0),d(pe,null,ye(t.tabs,l=>(c(),d("button",{key:l.id,class:G({active:t.activeTab===l.id}),onClick:a=>t.activeTab=l.id,"aria-label":"{{ tab.label }}"},m(l.label),11,G0))),128))]),n("div",$0,[t.activeTab==="chat"&&t.settings.chat?(c(),d("div",z0,[e[99]||(e[99]=n("h3",null,"Chat Settings",-1)),n("div",J0,[e[96]||(e[96]=n("label",null,"Auto Scroll to Bottom",-1)),B(n("input",{type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=l=>t.settings.chat.auto_scroll=l)},null,512),[[Ne,t.settings.chat.auto_scroll]])]),n("div",Y0,[e[97]||(e[97]=n("label",null,"Max Messages",-1)),B(n("input",{type:"number","onUpdate:modelValue":e[1]||(e[1]=l=>t.settings.chat.max_messages=l),min:"10",max:"1000"},null,512),[[he,t.settings.chat.max_messages]])]),n("div",Q0,[e[98]||(e[98]=n("label",null,"Message Retention (Days)",-1)),B(n("input",{type:"number","onUpdate:modelValue":e[2]||(e[2]=l=>t.settings.chat.message_retention_days=l),min:"1",max:"365"},null,512),[[he,t.settings.chat.message_retention_days]])])])):C("",!0),t.activeTab==="backend"&&t.isSettingsLoaded?(c(),d("div",Z0,[n("div",X0,[n("button",{class:G({active:t.activeBackendSubTab==="general"}),onClick:e[3]||(e[3]=l=>t.activeBackendSubTab="general"),"aria-label":"General"}," General ",2),n("button",{class:G({active:t.activeBackendSubTab==="llm"}),onClick:e[4]||(e[4]=l=>t.activeBackendSubTab="llm"),"aria-label":"Llm"}," LLM ",2),n("button",{class:G({active:t.activeBackendSubTab==="embedding"}),onClick:e[5]||(e[5]=l=>t.activeBackendSubTab="embedding"),"aria-label":"Embedding"}," Embedding ",2),n("button",{class:G({active:t.activeBackendSubTab==="memory"}),onClick:e[6]||(e[6]=l=>t.activeBackendSubTab="memory"),"aria-label":"Memory"}," Memory ",2)]),t.activeBackendSubTab==="general"?(c(),d("div",ek,[e[109]||(e[109]=n("h3",null,"Backend General Settings",-1)),n("div",tk,[e[100]||(e[100]=n("label",null,"API Endpoint",-1)),B(n("input",{type:"text","onUpdate:modelValue":e[7]||(e[7]=l=>t.settings.backend.api_endpoint=l)},null,512),[[he,t.settings.backend.api_endpoint]])]),n("div",sk,[e[101]||(e[101]=n("label",null,"Server Host",-1)),B(n("input",{type:"text","onUpdate:modelValue":e[8]||(e[8]=l=>t.settings.backend.server_host=l)},null,512),[[he,t.settings.backend.server_host]])]),n("div",nk,[e[102]||(e[102]=n("label",null,"Server Port",-1)),B(n("input",{type:"number","onUpdate:modelValue":e[9]||(e[9]=l=>t.settings.backend.server_port=l),min:"1",max:"65535"},null,512),[[he,t.settings.backend.server_port]])]),n("div",ok,[e[103]||(e[103]=n("label",null,"Chat Data Directory",-1)),B(n("input",{type:"text","onUpdate:modelValue":e[10]||(e[10]=l=>t.settings.backend.chat_data_dir=l)},null,512),[[he,t.settings.backend.chat_data_dir]])]),n("div",lk,[e[104]||(e[104]=n("label",null,"Chat History File",-1)),B(n("input",{type:"text","onUpdate:modelValue":e[11]||(e[11]=l=>t.settings.backend.chat_history_file=l),placeholder:"data/chat_history.json"},null,512),[[he,t.settings.backend.chat_history_file]])]),n("div",ik,[e[105]||(e[105]=n("label",null,"Knowledge Base DB",-1)),B(n("input",{type:"text","onUpdate:modelValue":e[12]||(e[12]=l=>t.settings.backend.knowledge_base_db=l),placeholder:"data/knowledge_base.db"},null,512),[[he,t.settings.backend.knowledge_base_db]])]),n("div",ak,[e[106]||(e[106]=n("label",null,"Reliability Stats File",-1)),B(n("input",{type:"text","onUpdate:modelValue":e[13]||(e[13]=l=>t.settings.backend.reliability_stats_file=l),placeholder:"data/reliability_stats.json"},null,512),[[he,t.settings.backend.reliability_stats_file]])]),n("div",rk,[e[107]||(e[107]=n("label",null,"Audit Log File",-1)),B(n("input",{type:"text","onUpdate:modelValue":e[14]||(e[14]=l=>t.settings.backend.audit_log_file=l),placeholder:"data/audit.log"},null,512),[[he,t.settings.backend.audit_log_file]])]),n("div",ck,[e[108]||(e[108]=n("label",null,"CORS Origins (comma separated)",-1)),B(n("input",{type:"text","onUpdate:modelValue":e[15]||(e[15]=l=>t.corsOriginsString=l)},null,512),[[he,t.corsOriginsString]])])])):C("",!0),t.activeBackendSubTab==="llm"?(c(),d("div",dk,[e[133]||(e[133]=n("h3",null,"LLM Settings",-1)),n("div",uk,[e[113]||(e[113]=n("label",null,"Current LLM Status",-1)),n("div",fk,[n("div",mk,[e[110]||(e[110]=n("span",{class:"status-label"},"Connection:",-1)),n("span",{class:G(["status-value",t.healthStatus.llm.connected?"connected":"disconnected"])},m(t.healthStatus.llm.connected?"Connected":"Disconnected"),3)]),t.healthStatus.llm.connected&&t.healthStatus.llm.current_model?(c(),d("div",pk,[e[111]||(e[111]=n("span",{class:"status-label"},"Active Model:",-1)),n("span",gk,m(t.healthStatus.llm.current_model),1)])):C("",!0),n("div",vk,[e[112]||(e[112]=n("span",{class:"status-label"},"Configured:",-1)),n("span",hk,m(t.getCurrentLLMConfig()),1)])])]),n("div",bk,[e[115]||(e[115]=n("label",null,"Provider Type",-1)),B(n("select",{"onUpdate:modelValue":e[16]||(e[16]=l=>t.settings.backend.llm.provider_type=l),onChange:e[17]||(e[17]=(...l)=>t.onProviderTypeChange&&t.onProviderTypeChange(...l))},e[114]||(e[114]=[n("option",{value:"local"},"Local LLM",-1),n("option",{value:"cloud"},"Cloud LLM",-1)]),544),[[Ze,t.settings.backend.llm.provider_type]])]),t.settings.backend.llm.provider_type==="local"?(c(),d("div",yk,[n("div",wk,[e[117]||(e[117]=n("label",null,"Local Provider",-1)),B(n("select",{"onUpdate:modelValue":e[18]||(e[18]=l=>t.settings.backend.llm.local.provider=l),onChange:e[19]||(e[19]=(...l)=>t.onLocalProviderChange&&t.onLocalProviderChange(...l))},e[116]||(e[116]=[n("option",{value:"ollama"},"Ollama",-1),n("option",{value:"lmstudio"},"LM Studio",-1)]),544),[[Ze,t.settings.backend.llm.local.provider]])]),t.settings.backend.llm.local.provider==="ollama"?(c(),d("div",kk,[n("div",_k,[e[118]||(e[118]=n("label",null,"Ollama Endpoint",-1)),B(n("input",{type:"text","onUpdate:modelValue":e[20]||(e[20]=l=>t.settings.backend.llm.local.providers.ollama.endpoint=l)},null,512),[[he,t.settings.backend.llm.local.providers.ollama.endpoint]])]),n("div",xk,[e[119]||(e[119]=n("label",null,"Model",-1)),B(n("select",{"onUpdate:modelValue":e[21]||(e[21]=l=>t.settings.backend.llm.local.providers.ollama.selected_model=l),onChange:e[22]||(e[22]=(...l)=>t.notifyBackendOfProviderChange&&t.notifyBackendOfProviderChange(...l))},[(c(!0),d(pe,null,ye(t.settings.backend.llm.local.providers.ollama.models,l=>(c(),d("option",{key:l,value:l},m(l),9,Ck))),128))],544),[[Ze,t.settings.backend.llm.local.providers.ollama.selected_model]])])])):t.settings.backend.llm.local.provider==="lmstudio"?(c(),d("div",Sk,[n("div",Tk,[e[120]||(e[120]=n("label",null,"LM Studio Endpoint",-1)),B(n("input",{type:"text","onUpdate:modelValue":e[23]||(e[23]=l=>t.settings.backend.llm.local.providers.lmstudio.endpoint=l)},null,512),[[he,t.settings.backend.llm.local.providers.lmstudio.endpoint]])]),n("div",Ek,[e[121]||(e[121]=n("label",null,"Model",-1)),B(n("select",{"onUpdate:modelValue":e[24]||(e[24]=l=>t.settings.backend.llm.local.providers.lmstudio.selected_model=l),onChange:e[25]||(e[25]=(...l)=>t.notifyBackendOfProviderChange&&t.notifyBackendOfProviderChange(...l))},[(c(!0),d(pe,null,ye(t.settings.backend.llm.local.providers.lmstudio.models,l=>(c(),d("option",{key:l,value:l},m(l),9,Ik))),128))],544),[[Ze,t.settings.backend.llm.local.providers.lmstudio.selected_model]])])])):C("",!0)])):t.settings.backend.llm.provider_type==="cloud"?(c(),d("div",Pk,[n("div",Rk,[e[123]||(e[123]=n("label",null,"Cloud Provider",-1)),B(n("select",{"onUpdate:modelValue":e[26]||(e[26]=l=>t.settings.backend.llm.cloud.provider=l),onChange:e[27]||(e[27]=(...l)=>t.onCloudProviderChange&&t.onCloudProviderChange(...l))},e[122]||(e[122]=[n("option",{value:"openai"},"OpenAI",-1),n("option",{value:"anthropic"},"Anthropic",-1)]),544),[[Ze,t.settings.backend.llm.cloud.provider]])]),t.settings.backend.llm.cloud.provider==="openai"?(c(),d("div",Dk,[n("div",Mk,[e[124]||(e[124]=n("label",null,"API Key",-1)),B(n("input",{type:"password","onUpdate:modelValue":e[28]||(e[28]=l=>t.settings.backend.llm.cloud.providers.openai.api_key=l),placeholder:"Enter API Key"},null,512),[[he,t.settings.backend.llm.cloud.providers.openai.api_key]])]),n("div",Ak,[e[125]||(e[125]=n("label",null,"Endpoint",-1)),B(n("input",{type:"text","onUpdate:modelValue":e[29]||(e[29]=l=>t.settings.backend.llm.cloud.providers.openai.endpoint=l)},null,512),[[he,t.settings.backend.llm.cloud.providers.openai.endpoint]])]),n("div",Uk,[e[126]||(e[126]=n("label",null,"Model",-1)),B(n("select",{"onUpdate:modelValue":e[30]||(e[30]=l=>t.settings.backend.llm.cloud.providers.openai.selected_model=l),onChange:e[31]||(e[31]=(...l)=>t.notifyBackendOfProviderChange&&t.notifyBackendOfProviderChange(...l))},[(c(!0),d(pe,null,ye(t.settings.backend.llm.cloud.providers.openai.models,l=>(c(),d("option",{key:l,value:l},m(l),9,Lk))),128))],544),[[Ze,t.settings.backend.llm.cloud.providers.openai.selected_model]])])])):t.settings.backend.llm.cloud.provider==="anthropic"?(c(),d("div",Ok,[n("div",Fk,[e[127]||(e[127]=n("label",null,"API Key",-1)),B(n("input",{type:"password","onUpdate:modelValue":e[32]||(e[32]=l=>t.settings.backend.llm.cloud.providers.anthropic.api_key=l),placeholder:"Enter API Key"},null,512),[[he,t.settings.backend.llm.cloud.providers.anthropic.api_key]])]),n("div",Nk,[e[128]||(e[128]=n("label",null,"Endpoint",-1)),B(n("input",{type:"text","onUpdate:modelValue":e[33]||(e[33]=l=>t.settings.backend.llm.cloud.providers.anthropic.endpoint=l)},null,512),[[he,t.settings.backend.llm.cloud.providers.anthropic.endpoint]])]),n("div",Vk,[e[129]||(e[129]=n("label",null,"Model",-1)),B(n("select",{"onUpdate:modelValue":e[34]||(e[34]=l=>t.settings.backend.llm.cloud.providers.anthropic.selected_model=l),onChange:e[35]||(e[35]=(...l)=>t.notifyBackendOfProviderChange&&t.notifyBackendOfProviderChange(...l))},[(c(!0),d(pe,null,ye(t.settings.backend.llm.cloud.providers.anthropic.models,l=>(c(),d("option",{key:l,value:l},m(l),9,jk))),128))],544),[[Ze,t.settings.backend.llm.cloud.providers.anthropic.selected_model]])])])):C("",!0)])):C("",!0),n("div",Bk,[e[130]||(e[130]=n("label",null,"Timeout (seconds)",-1)),B(n("input",{type:"number","onUpdate:modelValue":e[36]||(e[36]=l=>t.settings.backend.timeout=l),min:"10",max:"300"},null,512),[[he,t.settings.backend.timeout]])]),n("div",Kk,[e[131]||(e[131]=n("label",null,"Max Retries",-1)),B(n("input",{type:"number","onUpdate:modelValue":e[37]||(e[37]=l=>t.settings.backend.max_retries=l),min:"1",max:"10"},null,512),[[he,t.settings.backend.max_retries]])]),n("div",Wk,[e[132]||(e[132]=n("label",null,"Enable Streaming",-1)),B(n("input",{type:"checkbox","onUpdate:modelValue":e[38]||(e[38]=l=>t.settings.backend.streaming=l),onChange:e[39]||(e[39]=(...l)=>t.notifyBackendOfProviderChange&&t.notifyBackendOfProviderChange(...l))},null,544),[[Ne,t.settings.backend.streaming]])]),n("div",Hk,[n("button",{onClick:e[40]||(e[40]=(...l)=>t.loadModels&&t.loadModels(...l)),"aria-label":"Refresh models"},"Refresh Models")])])):C("",!0),t.activeBackendSubTab==="embedding"?(c(),d("div",qk,[e[145]||(e[145]=n("h3",null,"Embedding Model Settings",-1)),n("div",Gk,[e[137]||(e[137]=n("label",null,"Current Embedding Model Status",-1)),n("div",$k,[n("div",zk,[e[134]||(e[134]=n("span",{class:"status-label"},"Connection:",-1)),n("span",{class:G(["status-value",t.healthStatus.embedding?.connected?"connected":"disconnected"])},m(t.healthStatus.embedding?.connected?"Connected":"Disconnected"),3)]),t.healthStatus.embedding?.connected&&t.healthStatus.embedding?.current_model?(c(),d("div",Jk,[e[135]||(e[135]=n("span",{class:"status-label"},"Active Model:",-1)),n("span",Yk,m(t.healthStatus.embedding.current_model),1)])):C("",!0),n("div",Qk,[e[136]||(e[136]=n("span",{class:"status-label"},"Configured:",-1)),n("span",Zk,m(t.getCurrentEmbeddingConfig()),1)])])]),n("div",Xk,[e[139]||(e[139]=n("label",null,"Embedding Provider",-1)),B(n("select",{"onUpdate:modelValue":e[41]||(e[41]=l=>t.settings.backend.llm.embedding.provider=l),onChange:e[42]||(e[42]=(...l)=>t.onEmbeddingProviderChange&&t.onEmbeddingProviderChange(...l))},e[138]||(e[138]=[n("option",{value:"ollama"},"Ollama",-1),n("option",{value:"openai"},"OpenAI",-1)]),544),[[Ze,t.settings.backend.llm.embedding.provider]])]),t.settings.backend.llm.embedding.provider==="ollama"?(c(),d("div",e_,[n("div",t_,[e[140]||(e[140]=n("label",null,"Ollama Endpoint",-1)),B(n("input",{type:"text","onUpdate:modelValue":e[43]||(e[43]=l=>t.settings.backend.llm.embedding.providers.ollama.endpoint=l)},null,512),[[he,t.settings.backend.llm.embedding.providers.ollama.endpoint]])]),n("div",s_,[e[141]||(e[141]=n("label",null,"Embedding Model",-1)),B(n("select",{"onUpdate:modelValue":e[44]||(e[44]=l=>t.settings.backend.llm.embedding.providers.ollama.selected_model=l),onChange:e[45]||(e[45]=(...l)=>t.notifyBackendOfEmbeddingChange&&t.notifyBackendOfEmbeddingChange(...l))},[(c(!0),d(pe,null,ye(t.settings.backend.llm.embedding.providers.ollama.models,l=>(c(),d("option",{key:l,value:l},m(l),9,n_))),128))],544),[[Ze,t.settings.backend.llm.embedding.providers.ollama.selected_model]])])])):t.settings.backend.llm.embedding.provider==="openai"?(c(),d("div",o_,[n("div",l_,[e[142]||(e[142]=n("label",null,"API Key",-1)),B(n("input",{type:"password","onUpdate:modelValue":e[46]||(e[46]=l=>t.settings.backend.llm.embedding.providers.openai.api_key=l),placeholder:"Enter API Key"},null,512),[[he,t.settings.backend.llm.embedding.providers.openai.api_key]])]),n("div",i_,[e[143]||(e[143]=n("label",null,"Endpoint",-1)),B(n("input",{type:"text","onUpdate:modelValue":e[47]||(e[47]=l=>t.settings.backend.llm.embedding.providers.openai.endpoint=l)},null,512),[[he,t.settings.backend.llm.embedding.providers.openai.endpoint]])]),n("div",a_,[e[144]||(e[144]=n("label",null,"Embedding Model",-1)),B(n("select",{"onUpdate:modelValue":e[48]||(e[48]=l=>t.settings.backend.llm.embedding.providers.openai.selected_model=l),onChange:e[49]||(e[49]=(...l)=>t.notifyBackendOfEmbeddingChange&&t.notifyBackendOfEmbeddingChange(...l))},[(c(!0),d(pe,null,ye(t.settings.backend.llm.embedding.providers.openai.models,l=>(c(),d("option",{key:l,value:l},m(l),9,r_))),128))],544),[[Ze,t.settings.backend.llm.embedding.providers.openai.selected_model]])])])):C("",!0),n("div",c_,[n("button",{onClick:e[50]||(e[50]=(...l)=>t.loadEmbeddingModels&&t.loadEmbeddingModels(...l)),"aria-label":"Refresh embedding models"},"Refresh Embedding Models")])])):C("",!0),t.activeBackendSubTab==="memory"?(c(),d("div",d_,[e[158]||(e[158]=n("h3",null,"Memory Settings",-1)),t.settings.memory&&t.settings.memory.long_term?(c(),d("div",u_,[e[146]||(e[146]=n("label",null,"Enable Long-Term Memory",-1)),B(n("input",{type:"checkbox","onUpdate:modelValue":e[51]||(e[51]=l=>t.settings.memory.long_term.enabled=l)},null,512),[[Ne,t.settings.memory.long_term.enabled]])])):C("",!0),t.settings.memory&&t.settings.memory.long_term?(c(),d("div",f_,[e[147]||(e[147]=n("label",null,"Long-Term Memory Retention (Days)",-1)),B(n("input",{type:"number","onUpdate:modelValue":e[52]||(e[52]=l=>t.settings.memory.long_term.retention_days=l),min:"1",max:"365",disabled:!t.settings.memory.long_term.enabled},null,8,m_),[[he,t.settings.memory.long_term.retention_days]])])):C("",!0),t.settings.memory&&t.settings.memory.short_term?(c(),d("div",p_,[e[148]||(e[148]=n("label",null,"Enable Short-Term Memory",-1)),B(n("input",{type:"checkbox","onUpdate:modelValue":e[53]||(e[53]=l=>t.settings.memory.short_term.enabled=l)},null,512),[[Ne,t.settings.memory.short_term.enabled]])])):C("",!0),t.settings.memory&&t.settings.memory.short_term?(c(),d("div",g_,[e[149]||(e[149]=n("label",null,"Short-Term Memory Duration (Minutes)",-1)),B(n("input",{type:"number","onUpdate:modelValue":e[54]||(e[54]=l=>t.settings.memory.short_term.duration_minutes=l),min:"1",max:"1440",disabled:!t.settings.memory.short_term.enabled},null,8,v_),[[he,t.settings.memory.short_term.duration_minutes]])])):C("",!0),t.settings.memory&&t.settings.memory.vector_storage?(c(),d("div",h_,[e[150]||(e[150]=n("label",null,"Enable Vector Storage",-1)),B(n("input",{type:"checkbox","onUpdate:modelValue":e[55]||(e[55]=l=>t.settings.memory.vector_storage.enabled=l)},null,512),[[Ne,t.settings.memory.vector_storage.enabled]])])):C("",!0),t.settings.memory&&t.settings.memory.vector_storage?(c(),d("div",b_,[e[151]||(e[151]=n("label",null,"Vector Storage Update Frequency (Days)",-1)),B(n("input",{type:"number","onUpdate:modelValue":e[56]||(e[56]=l=>t.settings.memory.vector_storage.update_frequency_days=l),min:"1",max:"30",disabled:!t.settings.memory.vector_storage.enabled},null,8,y_),[[he,t.settings.memory.vector_storage.update_frequency_days]])])):C("",!0),t.settings.memory&&t.settings.memory.chromadb?(c(),d("div",w_,[e[152]||(e[152]=n("label",null,"Enable ChromaDB",-1)),B(n("input",{type:"checkbox","onUpdate:modelValue":e[57]||(e[57]=l=>t.settings.memory.chromadb.enabled=l)},null,512),[[Ne,t.settings.memory.chromadb.enabled]])])):C("",!0),t.settings.memory&&t.settings.memory.chromadb?(c(),d("div",k_,[e[153]||(e[153]=n("label",null,"ChromaDB Path",-1)),B(n("input",{type:"text","onUpdate:modelValue":e[58]||(e[58]=l=>t.settings.memory.chromadb.path=l),disabled:!t.settings.memory.chromadb.enabled,placeholder:"data/chromadb/chroma.sqlite3"},null,8,__),[[he,t.settings.memory.chromadb.path]])])):C("",!0),t.settings.memory&&t.settings.memory.chromadb?(c(),d("div",x_,[e[154]||(e[154]=n("label",null,"ChromaDB Collection Name",-1)),B(n("input",{type:"text","onUpdate:modelValue":e[59]||(e[59]=l=>t.settings.memory.chromadb.collection_name=l),disabled:!t.settings.memory.chromadb.enabled,placeholder:"autobot_memory"},null,8,C_),[[he,t.settings.memory.chromadb.collection_name]])])):C("",!0),t.settings.memory&&t.settings.memory.redis?(c(),d("div",S_,[e[155]||(e[155]=n("label",null,"Enable Redis for Chat History",-1)),B(n("input",{type:"checkbox","onUpdate:modelValue":e[60]||(e[60]=l=>t.settings.memory.redis.enabled=l)},null,512),[[Ne,t.settings.memory.redis.enabled]])])):C("",!0),t.settings.memory&&t.settings.memory.redis?(c(),d("div",T_,[e[156]||(e[156]=n("label",{class:"with-description"},[U("Redis Host "),n("span",{class:"description"},"Redis is used for storing and retrieving chat history efficiently, providing faster access compared to file-based storage.")],-1)),B(n("input",{type:"text","onUpdate:modelValue":e[61]||(e[61]=l=>t.settings.memory.redis.host=l),disabled:!t.settings.memory.redis.enabled,placeholder:"localhost"},null,8,E_),[[he,t.settings.memory.redis.host]])])):C("",!0),t.settings.memory&&t.settings.memory.redis?(c(),d("div",I_,[e[157]||(e[157]=n("label",null,"Redis Port",-1)),B(n("input",{type:"number","onUpdate:modelValue":e[62]||(e[62]=l=>t.settings.memory.redis.port=l),min:"1",max:"65535",disabled:!t.settings.memory.redis.enabled,placeholder:"6379"},null,8,P_),[[he,t.settings.memory.redis.port]])])):C("",!0)])):C("",!0)])):C("",!0),t.activeTab==="ui"&&t.isSettingsLoaded?(c(),d("div",R_,[e[167]||(e[167]=n("h3",null,"UI Settings",-1)),n("div",D_,[e[160]||(e[160]=n("label",null,"Theme",-1)),B(n("select",{"onUpdate:modelValue":e[63]||(e[63]=l=>t.settings.ui.theme=l)},e[159]||(e[159]=[n("option",{value:"light"},"Light",-1),n("option",{value:"dark"},"Dark",-1)]),512),[[Ze,t.settings.ui.theme]])]),n("div",M_,[e[162]||(e[162]=n("label",null,"Font Size",-1)),B(n("select",{"onUpdate:modelValue":e[64]||(e[64]=l=>t.settings.ui.font_size=l)},e[161]||(e[161]=[n("option",{value:"small"},"Small",-1),n("option",{value:"medium"},"Medium",-1),n("option",{value:"large"},"Large",-1)]),512),[[Ze,t.settings.ui.font_size]])]),n("div",A_,[e[164]||(e[164]=n("label",null,"Language",-1)),B(n("select",{"onUpdate:modelValue":e[65]||(e[65]=l=>t.settings.ui.language=l)},e[163]||(e[163]=[n("option",{value:"en"},"English",-1),n("option",{value:"es"},"Spanish",-1),n("option",{value:"fr"},"French",-1),n("option",{value:"de"},"German",-1)]),512),[[Ze,t.settings.ui.language]])]),n("div",U_,[e[165]||(e[165]=n("label",null,"Enable Animations",-1)),B(n("input",{type:"checkbox","onUpdate:modelValue":e[66]||(e[66]=l=>t.settings.ui.animations=l)},null,512),[[Ne,t.settings.ui.animations]])]),n("div",L_,[e[166]||(e[166]=n("label",null,"Vue Developer Mode",-1)),B(n("input",{type:"checkbox","onUpdate:modelValue":e[67]||(e[67]=l=>t.settings.ui.developer_mode=l)},null,512),[[Ne,t.settings.ui.developer_mode]])])])):C("",!0),t.activeTab==="security"&&t.isSettingsLoaded?(c(),d("div",O_,[e[170]||(e[170]=n("h3",null,"Security Settings",-1)),n("div",F_,[e[168]||(e[168]=n("label",null,"Enable Encryption",-1)),B(n("input",{type:"checkbox","onUpdate:modelValue":e[68]||(e[68]=l=>t.settings.security.enable_encryption=l)},null,512),[[Ne,t.settings.security.enable_encryption]])]),n("div",N_,[e[169]||(e[169]=n("label",null,"Session Timeout (Minutes)",-1)),B(n("input",{type:"number","onUpdate:modelValue":e[69]||(e[69]=l=>t.settings.security.session_timeout_minutes=l),min:"1",max:"1440"},null,512),[[he,t.settings.security.session_timeout_minutes]])])])):C("",!0),t.activeTab==="logging"&&t.isSettingsLoaded?(c(),d("div",V_,[e[175]||(e[175]=n("h3",null,"Logging Settings",-1)),n("div",j_,[e[172]||(e[172]=n("label",null,"Log Level",-1)),B(n("select",{"onUpdate:modelValue":e[70]||(e[70]=l=>t.settings.logging.log_level=l)},e[171]||(e[171]=[n("option",{value:"debug"},"Debug",-1),n("option",{value:"info"},"Info",-1),n("option",{value:"warning"},"Warning",-1),n("option",{value:"error"},"Error",-1)]),512),[[Ze,t.settings.logging.log_level]])]),n("div",B_,[e[173]||(e[173]=n("label",null,"Log to File",-1)),B(n("input",{type:"checkbox","onUpdate:modelValue":e[71]||(e[71]=l=>t.settings.logging.log_to_file=l)},null,512),[[Ne,t.settings.logging.log_to_file]])]),n("div",K_,[e[174]||(e[174]=n("label",null,"Log File Path",-1)),B(n("input",{type:"text","onUpdate:modelValue":e[72]||(e[72]=l=>t.settings.logging.log_file_path=l),disabled:!t.settings.logging.log_to_file},null,8,W_),[[he,t.settings.logging.log_file_path]])])])):C("",!0),t.activeTab==="knowledgeBase"&&t.isSettingsLoaded?(c(),d("div",H_,[e[178]||(e[178]=n("h3",null,"Knowledge Base",-1)),n("div",q_,[e[176]||(e[176]=n("label",null,"Enable Knowledge Base",-1)),B(n("input",{type:"checkbox","onUpdate:modelValue":e[73]||(e[73]=l=>t.settings.knowledge_base.enabled=l)},null,512),[[Ne,t.settings.knowledge_base.enabled]])]),n("div",G_,[e[177]||(e[177]=n("label",null,"Update Frequency (Days)",-1)),B(n("input",{type:"number","onUpdate:modelValue":e[74]||(e[74]=l=>t.settings.knowledge_base.update_frequency_days=l),min:"1",max:"30",disabled:!t.settings.knowledge_base.enabled},null,8,$_),[[he,t.settings.knowledge_base.update_frequency_days]])])])):C("",!0),t.activeTab==="voiceInterface"&&t.isSettingsLoaded?(c(),d("div",z_,[e[183]||(e[183]=n("h3",null,"Voice Interface",-1)),n("div",J_,[e[179]||(e[179]=n("label",null,"Enable Voice Interface",-1)),B(n("input",{type:"checkbox","onUpdate:modelValue":e[75]||(e[75]=l=>t.settings.voice_interface.enabled=l)},null,512),[[Ne,t.settings.voice_interface.enabled]])]),n("div",Y_,[e[181]||(e[181]=n("label",null,"Voice",-1)),B(n("select",{"onUpdate:modelValue":e[76]||(e[76]=l=>t.settings.voice_interface.voice=l),disabled:!t.settings.voice_interface.enabled},e[180]||(e[180]=[n("option",{value:"default"},"Default",-1),n("option",{value:"male1"},"Male 1",-1),n("option",{value:"female1"},"Female 1",-1)]),8,Q_),[[Ze,t.settings.voice_interface.voice]])]),n("div",Z_,[e[182]||(e[182]=n("label",null,"Speech Rate",-1)),B(n("input",{type:"number","onUpdate:modelValue":e[77]||(e[77]=l=>t.settings.voice_interface.speech_rate=l),min:"0.5",max:"2.0",step:"0.1",disabled:!t.settings.voice_interface.enabled},null,8,X_),[[he,t.settings.voice_interface.speech_rate]])])])):C("",!0),t.activeTab==="developer"&&t.isSettingsLoaded?(c(),d("div",ex,[e[191]||(e[191]=n("h3",null,"Developer Mode",-1)),n("div",tx,[e[184]||(e[184]=n("label",null,"Enable Developer Mode",-1)),B(n("input",{type:"checkbox","onUpdate:modelValue":e[78]||(e[78]=l=>t.settings.developer.enabled=l),onChange:e[79]||(e[79]=(...l)=>t.updateDeveloperConfig&&t.updateDeveloperConfig(...l))},null,544),[[Ne,t.settings.developer.enabled]])]),t.settings.developer.enabled?(c(),d("div",sx,[n("div",nx,[e[185]||(e[185]=n("label",null,"Enhanced Error Messages",-1)),B(n("input",{type:"checkbox","onUpdate:modelValue":e[80]||(e[80]=l=>t.settings.developer.enhanced_errors=l),onChange:e[81]||(e[81]=(...l)=>t.updateDeveloperConfig&&t.updateDeveloperConfig(...l))},null,544),[[Ne,t.settings.developer.enhanced_errors]])]),n("div",ox,[e[186]||(e[186]=n("label",null,"API Endpoint Suggestions",-1)),B(n("input",{type:"checkbox","onUpdate:modelValue":e[82]||(e[82]=l=>t.settings.developer.endpoint_suggestions=l),onChange:e[83]||(e[83]=(...l)=>t.updateDeveloperConfig&&t.updateDeveloperConfig(...l))},null,544),[[Ne,t.settings.developer.endpoint_suggestions]])]),n("div",lx,[e[187]||(e[187]=n("label",null,"Debug Logging",-1)),B(n("input",{type:"checkbox","onUpdate:modelValue":e[84]||(e[84]=l=>t.settings.developer.debug_logging=l),onChange:e[85]||(e[85]=(...l)=>t.updateDeveloperConfig&&t.updateDeveloperConfig(...l))},null,544),[[Ne,t.settings.developer.debug_logging]])]),t.developerInfo?(c(),d("div",ix,[e[190]||(e[190]=n("h4",null,"System Information",-1)),n("div",ax,[e[188]||(e[188]=n("strong",null,"Available API Endpoints:",-1)),U(" "+m(t.developerInfo.total_endpoints||0),1)]),n("div",rx,[e[189]||(e[189]=n("strong",null,"Active Routers:",-1)),U(" "+m((t.developerInfo.available_routers||[]).join(", ")),1)]),n("div",cx,[n("button",{onClick:e[86]||(e[86]=(...l)=>t.loadDeveloperInfo&&t.loadDeveloperInfo(...l)),"aria-label":"Refresh system info"},"Refresh System Info"),n("button",{onClick:e[87]||(e[87]=(...l)=>t.showApiEndpoints&&t.showApiEndpoints(...l)),"aria-label":"View api endpoints"},"View API Endpoints")])])):C("",!0)])):C("",!0)])):C("",!0),t.activeTab==="prompts"&&t.isSettingsLoaded?(c(),d("div",dx,[e[192]||(e[192]=n("h3",null,"System Prompts",-1)),n("div",ux,[n("div",fx,[(c(!0),d(pe,null,ye(t.settings.prompts.list,l=>(c(),d("div",{key:l.id,class:G(["prompt-item",{active:t.settings.prompts.selectedPrompt&&t.settings.prompts.selectedPrompt.id===l.id}]),onClick:a=>t.selectPrompt(l),tabindex:"0",onKeyup:[e[88]||(e[88]=ve(a=>a.target.click(),["enter"])),e[89]||(e[89]=ve(a=>a.target.click(),["space"]))]},[n("div",px,m(l.name||l.id),1),n("div",gx,m(l.type||"Unknown Type"),1)],42,mx))),128)),t.settings.prompts.list.length===0?(c(),d("div",vx,"No prompts available. Please check backend connection.")):C("",!0)]),t.settings.prompts.selectedPrompt?(c(),d("div",hx,[n("h4",null,"Editing: "+m(t.settings.prompts.selectedPrompt.name||t.settings.prompts.selectedPrompt.id),1),B(n("textarea",{"onUpdate:modelValue":e[90]||(e[90]=l=>t.settings.prompts.editedContent=l),rows:"10",placeholder:"Edit prompt content here..."},null,512),[[he,t.settings.prompts.editedContent]]),n("div",bx,[n("button",{onClick:e[91]||(e[91]=(...l)=>t.savePrompt&&t.savePrompt(...l)),"aria-label":"Save changes"},"Save Changes"),n("button",{onClick:e[92]||(e[92]=l=>t.revertPromptToDefault(t.settings.prompts.selectedPrompt.id)),"aria-label":"Revert to default"},"Revert to Default"),n("button",{onClick:e[93]||(e[93]=l=>t.settings.prompts.selectedPrompt=null),"aria-label":"Cancel"},"Cancel")])])):C("",!0)]),n("div",yx,[n("button",{class:"control-button small",onClick:e[94]||(e[94]=(...l)=>t.loadPrompts&&t.loadPrompts(...l)),"aria-label":"Load prompts"},"Load Prompts")])])):C("",!0)]),n("div",wx,[n("button",{onClick:e[95]||(e[95]=(...l)=>t.saveSettings&&t.saveSettings(...l)),disabled:t.isSaving,class:"save-button","aria-label":"{{ issaving ? 'saving...' : 'save settings' }}"},m(t.isSaving?"Saving...":"Save Settings"),9,kx),t.saveMessage?(c(),d("div",{key:0,class:G(["save-message",t.saveMessageType])},m(t.saveMessage),3)):C("",!0)])])}const xx=Xe(W0,[["render",_x],["__scopeId","data-v-bbd464cb"]]);class Cx{constructor(){this.apiClient=new na,this.currentChatId=null}setCurrentChatId(e){this.currentChatId=e}async getSecrets(e={}){const o=new URLSearchParams;return e.scope&&o.append("scope",e.scope),(e.chatId||this.currentChatId)&&o.append("chat_id",e.chatId||this.currentChatId),await this.apiClient.get(`/api/secrets/secrets?${o.toString()}`)}async getSecret(e,o={}){const t=new URLSearchParams;return(o.chatId||this.currentChatId)&&t.append("chat_id",o.chatId||this.currentChatId),await this.apiClient.get(`/api/secrets/secrets/${e}?${t.toString()}`)}async createSecret(e){return e.scope==="chat"&&!e.chat_id&&(e.chat_id=this.currentChatId),await this.apiClient.post("/api/secrets/secrets",e)}async updateSecret(e,o,t={}){const i=new URLSearchParams;return(t.chatId||this.currentChatId)&&i.append("chat_id",t.chatId||this.currentChatId),await this.apiClient.put(`/api/secrets/secrets/${e}?${i.toString()}`,o)}async deleteSecret(e,o={}){const t=new URLSearchParams;return(o.chatId||this.currentChatId)&&t.append("chat_id",o.chatId||this.currentChatId),await this.apiClient.delete(`/api/secrets/secrets/${e}?${t.toString()}`)}async transferSecrets(e,o={}){const t=new URLSearchParams;return(o.chatId||this.currentChatId)&&t.append("chat_id",o.chatId||this.currentChatId),await this.apiClient.post(`/api/secrets/secrets/transfer?${t.toString()}`,e)}async getChatCleanupInfo(e){return await this.apiClient.get(`/api/secrets/secrets/chat/${e}/cleanup`)}async deleteChatSecrets(e,o=null){const t=new URLSearchParams;return o&&Array.isArray(o)&&o.forEach(r=>t.append("secret_ids",r)),await this.apiClient.delete(`/api/secrets/secrets/chat/${e}?${t.toString()}`)}async getSecretTypes(){return await this.apiClient.get("/api/secrets/secrets/types")}async getSecretsStats(){return await this.apiClient.get("/api/secrets/secrets/stats")}validateSecretData(e){const o=[];return(!e.name||e.name.trim().length===0)&&o.push("Secret name is required"),e.type||o.push("Secret type is required"),e.scope||o.push("Secret scope is required"),e.scope==="chat"&&!e.chat_id&&!this.currentChatId&&o.push("Chat ID is required for chat-scoped secrets"),(!e.value||e.value.trim().length===0)&&o.push("Secret value is required"),e.expires_at&&new Date(e.expires_at)<=new Date&&o.push("Expiry date must be in the future"),{isValid:o.length===0,errors:o}}formatSecretForDisplay(e){return{...e,type_label:e.type?e.type.replace("_"," ").replace(/\b\w/g,o=>o.toUpperCase()):"",scope_label:e.scope?e.scope.charAt(0).toUpperCase()+e.scope.slice(1):"",created_at_formatted:e.created_at?new Date(e.created_at).toLocaleString():"",expires_at_formatted:e.expires_at?new Date(e.expires_at).toLocaleString():null,updated_at_formatted:e.updated_at?new Date(e.updated_at).toLocaleString():"",is_expired:e.expires_at?new Date(e.expires_at)<new Date:!1,chat_id_short:e.chat_id?e.chat_id.substring(0,8)+"...":null}}groupSecretsByScope(e){return e.reduce((o,t)=>{const i=t.scope||"unknown";return o[i]||(o[i]=[]),o[i].push(t),o},{})}groupSecretsByType(e){return e.reduce((o,t)=>{const i=t.type||"unknown";return o[i]||(o[i]=[]),o[i].push(t),o},{})}filterSecrets(e,o){if(!o||o.trim().length===0)return e;const t=o.toLowerCase().trim();return e.filter(i=>i.name&&i.name.toLowerCase().includes(t)||i.description&&i.description.toLowerCase().includes(t)?!0:i.tags&&Array.isArray(i.tags)?i.tags.some(r=>r.toLowerCase().includes(t)):!!(i.type&&i.type.toLowerCase().includes(t)))}sortSecrets(e,o="created_at",t="desc"){return[...e].sort((i,r)=>{let l=i[o],a=r[o];return o.includes("_at")&&(l=new Date(l),a=new Date(a)),typeof l=="string"&&(l=l.toLowerCase(),a=a.toLowerCase()),t==="desc"?a>l?1:-1:l>a?1:-1})}getExpiredSecrets(e){const o=new Date;return e.filter(t=>t.expires_at&&new Date(t.expires_at)<o)}getSecretsExpiringSoon(e,o=7){const t=new Date,i=new Date(t.getTime()+o*24*60*60*1e3);return e.filter(r=>{if(!r.expires_at)return!1;const l=new Date(r.expires_at);return l>t&&l<=i})}}const Xt=new Cx,Sx={name:"SecretsManager",setup(){const s=b([]),e=b([]),o=b(null),t=b(!1),i=b(!1),r=b(!1),l=b(""),a=b(""),u=b(""),p=b(!1),f=b(!1),v=b(!1),w=b(!1),k=b(!1),h=rs({id:"",name:"",type:"",scope:"",chat_id:"",value:"",description:"",expires_at:"",tags:[]}),P=b(""),x=b(null),_=b(null),S=b(!1),L=Se(()=>{let F=s.value;if(l.value&&(F=F.filter(de=>de.scope===l.value)),a.value&&(F=F.filter(de=>de.type===a.value)),u.value){const de=u.value.toLowerCase();F=F.filter(me=>me.name.toLowerCase().includes(de)||me.description?.toLowerCase().includes(de)||me.tags?.some(Re=>Re.toLowerCase().includes(de)))}return F}),A=async()=>{t.value=!0;try{const F=await Xt.getSecrets({scope:l.value});s.value=F.secrets||[]}catch(F){console.error("Failed to load secrets:",F)}finally{t.value=!1}},ae=async()=>{try{const F=await Xt.getSecretTypes();e.value=F.types||[]}catch(F){console.error("Failed to load secret types:",F)}},se=async()=>{try{const F=await Xt.getSecretsStats();o.value=F}catch(F){console.error("Failed to load secrets stats:",F)}},be=()=>{},z=async F=>{try{const de=await Xt.getSecret(F.id,{chatId:F.chat_id});x.value=de,k.value=!1,v.value=!0}catch(de){console.error("Failed to load secret details:",de),alert("Failed to load secret details")}},q=F=>{h.id=F.id,h.name=F.name,h.type=F.type,h.scope=F.scope,h.chat_id=F.chat_id||"",h.description=F.description||"",h.expires_at=F.expires_at?new Date(F.expires_at).toISOString().slice(0,16):"",h.tags=[...F.tags||[]],P.value=h.tags.join(", "),f.value=!0},X=async F=>{if(confirm(`Are you sure you want to delete "${F.name}"?`))try{await Xt.deleteSecret(F.id,{chatId:F.chat_id}),await A(),await se()}catch(de){console.error("Failed to delete secret:",de),alert("Failed to delete secret")}},Ee=F=>{_.value=F,S.value=!1,w.value=!0},Pe=async()=>{if(S.value){r.value=!0;try{const F={secret_ids:[_.value.id],target_scope:"general"};await Xt.transferSecrets(F,{chatId:_.value.chat_id}),w.value=!1,await A(),await se()}catch(F){console.error("Failed to transfer secret:",F),alert("Failed to transfer secret")}finally{r.value=!1}}},ee=async()=>{i.value=!0;try{const F={name:h.name,type:h.type,scope:h.scope,chat_id:h.scope==="chat"?h.chat_id||M():null,description:h.description,expires_at:h.expires_at?new Date(h.expires_at).toISOString():null,tags:h.tags};f.value?await Xt.updateSecret(h.id,F,{chatId:F.chat_id}):(F.value=h.value,await Xt.createSecret(F)),xe(),await A(),await se()}catch(F){console.error("Failed to save secret:",F),alert("Failed to save secret")}finally{i.value=!1}},xe=()=>{p.value=!1,f.value=!1,v.value=!1,w.value=!1,fe()},fe=()=>{Object.assign(h,{id:"",name:"",type:"",scope:"",chat_id:"",value:"",description:"",expires_at:"",tags:[]}),P.value=""},Z=()=>{h.tags=P.value.split(",").map(F=>F.trim()).filter(F=>F.length>0)},O=()=>{h.scope==="chat"?h.chat_id=M():h.chat_id=""},M=()=>"current-chat-"+Date.now(),J=async()=>{if(x.value?.value)try{await navigator.clipboard.writeText(x.value.value),alert("Secret value copied to clipboard")}catch(F){console.error("Failed to copy to clipboard:",F),alert("Failed to copy to clipboard")}},W=F=>F?new Date(F).toLocaleString():"N/A",K=F=>F?.expires_at?new Date(F.expires_at)<new Date:!1;return it(async()=>{await Promise.all([A(),ae(),se()])}),{secrets:s,secretTypes:e,stats:o,loading:t,saving:i,transferring:r,selectedScope:l,selectedType:a,searchQuery:u,filteredSecrets:L,showCreateModal:p,showEditModal:f,showViewModal:v,showTransferModal:w,showSecretValue:k,secretForm:h,tagsInput:P,viewingSecret:x,transferringSecret:_,transferConfirmed:S,loadSecrets:A,filterSecrets:be,viewSecret:z,editSecret:q,deleteSecret:X,transferSecret:Ee,confirmTransfer:Pe,saveSecret:ee,closeModals:xe,updateTags:Z,onScopeChange:O,copySecretValue:J,formatDate:W,isExpired:K}}},Tx={class:"secrets-manager"},Ex={class:"secrets-header"},Ix={class:"secrets-actions"},Px=["disabled"],Rx={class:"secrets-filters"},Dx={class:"filter-group"},Mx={class:"filter-group"},Ax=["value"],Ux={class:"filter-group"},Lx={key:0,class:"secrets-stats"},Ox={class:"stat-card"},Fx={class:"stat-value"},Nx={class:"stat-card"},Vx={class:"stat-value"},jx={class:"stat-card"},Bx={class:"stat-value"},Kx={key:0,class:"stat-card"},Wx={class:"stat-value expired"},Hx={class:"secrets-list"},qx={key:0,class:"loading-spinner"},Gx={key:1,class:"no-secrets"},$x={key:2,class:"secrets-grid"},zx={class:"secret-header"},Jx={class:"secret-badges"},Yx={class:"secret-info"},Qx={key:0,class:"secret-description"},Zx={class:"secret-metadata"},Xx={key:0},eC={key:1},tC={key:1,class:"secret-tags"},sC={class:"secret-actions"},nC=["onClick"],oC=["onClick"],lC=["onClick"],iC=["onClick"],aC={class:"modal-header"},rC={class:"form-group"},cC={class:"form-group"},dC=["value"],uC={class:"form-group"},fC={key:0,class:"form-group"},mC={key:1,class:"form-group"},pC={class:"form-group"},gC={class:"form-group"},vC={class:"form-group"},hC={class:"modal-actions"},bC=["disabled"],yC={class:"modal-header"},wC={class:"modal-body"},kC={class:"secret-details"},_C={class:"detail-group"},xC={class:"detail-group"},CC={key:0,class:"detail-group"},SC={class:"detail-group"},TC={class:"secret-value-container"},EC=["type","value"],IC={key:1,class:"detail-group"},PC={class:"tags-list"},RC={class:"detail-group"},DC={key:2,class:"detail-group"},MC={class:"modal-actions"},AC={class:"modal-header"},UC={class:"form-group"},LC={class:"modal-actions"},OC=["disabled"];function FC(s,e,o,t,i,r){return c(),d("div",Tx,[n("div",Ex,[e[38]||(e[38]=n("h2",null,"Secrets Management",-1)),n("div",Ix,[n("button",{onClick:e[0]||(e[0]=l=>t.showCreateModal=!0),class:"btn-primary"},e[36]||(e[36]=[n("i",{class:"icon-plus"},null,-1),U(" Add Secret ",-1)])),n("button",{onClick:e[1]||(e[1]=(...l)=>t.loadSecrets&&t.loadSecrets(...l)),class:"btn-secondary",disabled:t.loading},[n("i",{class:G(["icon-refresh",{spinning:t.loading}])},null,2),e[37]||(e[37]=U(" Refresh ",-1))],8,Px)])]),n("div",Rx,[n("div",Dx,[e[40]||(e[40]=n("label",null,"Scope:",-1)),B(n("select",{"onUpdate:modelValue":e[2]||(e[2]=l=>t.selectedScope=l),onChange:e[3]||(e[3]=(...l)=>t.loadSecrets&&t.loadSecrets(...l))},e[39]||(e[39]=[n("option",{value:""},"All Scopes",-1),n("option",{value:"chat"},"Chat-scoped",-1),n("option",{value:"general"},"General",-1)]),544),[[Ze,t.selectedScope]])]),n("div",Mx,[e[42]||(e[42]=n("label",null,"Type:",-1)),B(n("select",{"onUpdate:modelValue":e[4]||(e[4]=l=>t.selectedType=l),onChange:e[5]||(e[5]=(...l)=>t.loadSecrets&&t.loadSecrets(...l))},[e[41]||(e[41]=n("option",{value:""},"All Types",-1)),(c(!0),d(pe,null,ye(t.secretTypes,l=>(c(),d("option",{key:l.value,value:l.value},m(l.label),9,Ax))),128))],544),[[Ze,t.selectedType]])]),n("div",Ux,[B(n("input",{type:"text","onUpdate:modelValue":e[6]||(e[6]=l=>t.searchQuery=l),onInput:e[7]||(e[7]=(...l)=>t.filterSecrets&&t.filterSecrets(...l)),placeholder:"Search secrets...",class:"search-input"},null,544),[[he,t.searchQuery]])])]),t.stats?(c(),d("div",Lx,[n("div",Ox,[e[43]||(e[43]=n("h4",null,"Total Secrets",-1)),n("span",Fx,m(t.stats.total_secrets),1)]),n("div",Nx,[e[44]||(e[44]=n("h4",null,"Chat-scoped",-1)),n("span",Vx,m(t.stats.by_scope?.chat||0),1)]),n("div",jx,[e[45]||(e[45]=n("h4",null,"General",-1)),n("span",Bx,m(t.stats.by_scope?.general||0),1)]),t.stats.expired_count>0?(c(),d("div",Kx,[e[46]||(e[46]=n("h4",null,"Expired",-1)),n("span",Wx,m(t.stats.expired_count),1)])):C("",!0)])):C("",!0),n("div",Hx,[t.loading?(c(),d("div",qx,"Loading secrets...")):t.filteredSecrets.length===0?(c(),d("div",Gx,[e[47]||(e[47]=n("p",null,"No secrets found matching your criteria.",-1)),n("button",{onClick:e[8]||(e[8]=l=>t.showCreateModal=!0),class:"btn-primary"}," Create your first secret ")])):(c(),d("div",$x,[(c(!0),d(pe,null,ye(t.filteredSecrets,l=>(c(),d("div",{key:l.id,class:G(["secret-card",{expired:t.isExpired(l)}])},[n("div",zx,[n("h3",null,m(l.name),1),n("div",Jx,[n("span",{class:G(["badge",`badge-${l.scope}`])},m(l.scope),3),n("span",{class:G(["badge",`badge-${l.type}`])},m(l.type.replace("_"," ")),3)])]),n("div",Yx,[l.description?(c(),d("p",Qx,m(l.description),1)):C("",!0),n("div",Zx,[n("small",null,"Created: "+m(t.formatDate(l.created_at)),1),l.expires_at?(c(),d("small",Xx,"Expires: "+m(t.formatDate(l.expires_at)),1)):C("",!0),l.chat_id?(c(),d("small",eC,"Chat: "+m(l.chat_id.substring(0,8))+"...",1)):C("",!0)]),l.tags&&l.tags.length>0?(c(),d("div",tC,[(c(!0),d(pe,null,ye(l.tags,a=>(c(),d("span",{key:a,class:"tag"},m(a),1))),128))])):C("",!0)]),n("div",sC,[n("button",{onClick:a=>t.viewSecret(l),class:"btn-view",title:"View secret"},e[48]||(e[48]=[n("i",{class:"icon-eye"},null,-1)]),8,nC),n("button",{onClick:a=>t.editSecret(l),class:"btn-edit",title:"Edit secret"},e[49]||(e[49]=[n("i",{class:"icon-edit"},null,-1)]),8,oC),l.scope==="chat"?(c(),d("button",{key:0,onClick:a=>t.transferSecret(l),class:"btn-transfer",title:"Transfer scope"},e[50]||(e[50]=[n("i",{class:"icon-transfer"},null,-1)]),8,lC)):C("",!0),n("button",{onClick:a=>t.deleteSecret(l),class:"btn-delete",title:"Delete secret"},e[51]||(e[51]=[n("i",{class:"icon-trash"},null,-1)]),8,iC)])],2))),128))]))]),t.showCreateModal||t.showEditModal?(c(),d("div",{key:1,class:"modal-overlay",onClick:e[23]||(e[23]=(...l)=>t.closeModals&&t.closeModals(...l))},[n("div",{class:"modal",onClick:e[22]||(e[22]=ze(()=>{},["stop"]))},[n("div",aC,[n("h3",null,m(t.showEditModal?"Edit Secret":"Create New Secret"),1),n("button",{onClick:e[9]||(e[9]=(...l)=>t.closeModals&&t.closeModals(...l)),class:"btn-close"},"")]),n("form",{onSubmit:e[21]||(e[21]=ze((...l)=>t.saveSecret&&t.saveSecret(...l),["prevent"])),class:"modal-body"},[n("div",rC,[e[52]||(e[52]=n("label",null,[U("Name "),n("span",{class:"required"},"*")],-1)),B(n("input",{type:"text","onUpdate:modelValue":e[10]||(e[10]=l=>t.secretForm.name=l),required:"",placeholder:"Enter secret name",class:"form-input"},null,512),[[he,t.secretForm.name]])]),n("div",cC,[e[54]||(e[54]=n("label",null,[U("Type "),n("span",{class:"required"},"*")],-1)),B(n("select",{"onUpdate:modelValue":e[11]||(e[11]=l=>t.secretForm.type=l),required:"",class:"form-input"},[e[53]||(e[53]=n("option",{value:""},"Select type...",-1)),(c(!0),d(pe,null,ye(t.secretTypes,l=>(c(),d("option",{key:l.value,value:l.value},m(l.label),9,dC))),128))],512),[[Ze,t.secretForm.type]])]),n("div",uC,[e[56]||(e[56]=n("label",null,[U("Scope "),n("span",{class:"required"},"*")],-1)),B(n("select",{"onUpdate:modelValue":e[12]||(e[12]=l=>t.secretForm.scope=l),required:"",class:"form-input",onChange:e[13]||(e[13]=(...l)=>t.onScopeChange&&t.onScopeChange(...l))},e[55]||(e[55]=[n("option",{value:""},"Select scope...",-1),n("option",{value:"chat"},"Chat-scoped (current conversation only)",-1),n("option",{value:"general"},"General (all conversations)",-1)]),544),[[Ze,t.secretForm.scope]])]),t.secretForm.scope==="chat"?(c(),d("div",fC,[e[57]||(e[57]=n("label",null,"Chat ID",-1)),B(n("input",{type:"text","onUpdate:modelValue":e[14]||(e[14]=l=>t.secretForm.chat_id=l),placeholder:"Current chat ID (auto-filled)",class:"form-input",readonly:""},null,512),[[he,t.secretForm.chat_id]])])):C("",!0),t.showEditModal?C("",!0):(c(),d("div",mC,[e[58]||(e[58]=n("label",null,[U("Secret Value "),n("span",{class:"required"},"*")],-1)),B(n("textarea",{"onUpdate:modelValue":e[15]||(e[15]=l=>t.secretForm.value=l),required:"",placeholder:"Enter the secret value",class:"form-input",rows:"3"},null,512),[[he,t.secretForm.value]])])),n("div",pC,[e[59]||(e[59]=n("label",null,"Description",-1)),B(n("textarea",{"onUpdate:modelValue":e[16]||(e[16]=l=>t.secretForm.description=l),placeholder:"Optional description",class:"form-input",rows:"2"},null,512),[[he,t.secretForm.description]])]),n("div",gC,[e[60]||(e[60]=n("label",null,"Tags",-1)),B(n("input",{type:"text","onUpdate:modelValue":e[17]||(e[17]=l=>t.tagsInput=l),placeholder:"Comma-separated tags",class:"form-input",onInput:e[18]||(e[18]=(...l)=>t.updateTags&&t.updateTags(...l))},null,544),[[he,t.tagsInput]])]),n("div",vC,[e[61]||(e[61]=n("label",null,"Expiration Date",-1)),B(n("input",{type:"datetime-local","onUpdate:modelValue":e[19]||(e[19]=l=>t.secretForm.expires_at=l),class:"form-input"},null,512),[[he,t.secretForm.expires_at]])]),n("div",hC,[n("button",{type:"button",onClick:e[20]||(e[20]=(...l)=>t.closeModals&&t.closeModals(...l)),class:"btn-secondary"},"Cancel"),n("button",{type:"submit",class:"btn-primary",disabled:t.saving},m(t.saving?"Saving...":t.showEditModal?"Update":"Create"),9,bC)])],32)])])):C("",!0),t.showViewModal?(c(),d("div",{key:2,class:"modal-overlay",onClick:e[29]||(e[29]=l=>t.showViewModal=!1)},[n("div",{class:"modal",onClick:e[28]||(e[28]=ze(()=>{},["stop"]))},[n("div",yC,[n("h3",null,"View Secret: "+m(t.viewingSecret?.name),1),n("button",{onClick:e[24]||(e[24]=l=>t.showViewModal=!1),class:"btn-close"},"")]),n("div",wC,[n("div",kC,[n("div",_C,[e[62]||(e[62]=n("label",null,"Type:",-1)),n("span",null,m(t.viewingSecret?.type?.replace("_"," ")||"N/A"),1)]),n("div",xC,[e[63]||(e[63]=n("label",null,"Scope:",-1)),n("span",null,m(t.viewingSecret?.scope),1)]),t.viewingSecret?.description?(c(),d("div",CC,[e[64]||(e[64]=n("label",null,"Description:",-1)),n("p",null,m(t.viewingSecret.description),1)])):C("",!0),n("div",SC,[e[65]||(e[65]=n("label",null,"Secret Value:",-1)),n("div",TC,[n("input",{type:t.showSecretValue?"text":"password",value:t.viewingSecret?.value||"Loading...",readonly:"",class:"secret-value-input"},null,8,EC),n("button",{type:"button",onClick:e[25]||(e[25]=l=>t.showSecretValue=!t.showSecretValue),class:"btn-toggle-secret"},m(t.showSecretValue?"Hide":"Show"),1)])]),t.viewingSecret?.tags?.length>0?(c(),d("div",IC,[e[66]||(e[66]=n("label",null,"Tags:",-1)),n("div",PC,[(c(!0),d(pe,null,ye(t.viewingSecret.tags,l=>(c(),d("span",{key:l,class:"tag"},m(l),1))),128))])])):C("",!0),n("div",RC,[e[67]||(e[67]=n("label",null,"Created:",-1)),n("span",null,m(t.formatDate(t.viewingSecret?.created_at)),1)]),t.viewingSecret?.expires_at?(c(),d("div",DC,[e[68]||(e[68]=n("label",null,"Expires:",-1)),n("span",{class:G({expired:t.isExpired(t.viewingSecret)})},m(t.formatDate(t.viewingSecret.expires_at)),3)])):C("",!0)])]),n("div",MC,[n("button",{onClick:e[26]||(e[26]=l=>t.showViewModal=!1),class:"btn-secondary"},"Close"),n("button",{onClick:e[27]||(e[27]=(...l)=>t.copySecretValue&&t.copySecretValue(...l)),class:"btn-primary"}," Copy Value ")])])])):C("",!0),t.showTransferModal?(c(),d("div",{key:3,class:"modal-overlay",onClick:e[35]||(e[35]=l=>t.showTransferModal=!1)},[n("div",{class:"modal",onClick:e[34]||(e[34]=ze(()=>{},["stop"]))},[n("div",AC,[n("h3",null,"Transfer Secret: "+m(t.transferringSecret?.name),1),n("button",{onClick:e[30]||(e[30]=l=>t.showTransferModal=!1),class:"btn-close"},"")]),n("form",{onSubmit:e[33]||(e[33]=ze((...l)=>t.confirmTransfer&&t.confirmTransfer(...l),["prevent"])),class:"modal-body"},[e[70]||(e[70]=n("p",null,"This will move the secret from chat-scoped to general scope, making it accessible across all conversations.",-1)),n("div",UC,[n("label",null,[B(n("input",{type:"checkbox","onUpdate:modelValue":e[31]||(e[31]=l=>t.transferConfirmed=l)},null,512),[[Ne,t.transferConfirmed]]),e[69]||(e[69]=U(" I understand this action cannot be undone ",-1))])]),n("div",LC,[n("button",{type:"button",onClick:e[32]||(e[32]=l=>t.showTransferModal=!1),class:"btn-secondary"},"Cancel"),n("button",{type:"submit",class:"btn-primary",disabled:!t.transferConfirmed||t.transferring},m(t.transferring?"Transferring...":"Transfer to General"),9,OC)])],32)])])):C("",!0)])}const NC=Xe(Sx,[["render",FC],["__scopeId","data-v-d648387a"]]),VC={name:"FileBrowser",setup(){const s=b([]),e=b(!1),o=b(null),t=b(null),i=b(null),r=async()=>{try{const _=await fetch("http://localhost:8001/api/files/list");if(_.ok){const S=_.headers.get("content-type");if(S&&S.includes("application/json")){const L=await _.json();s.value=L.files||[]}else console.warn("API endpoint returned non-JSON response, using mock data"),s.value=[{name:"sample.txt",size:1024,type:"file",modified:new Date().toISOString()},{name:"documents",size:0,type:"directory",modified:new Date().toISOString()}]}else console.error("Failed to fetch files:",_.status,_.statusText),s.value=[{name:"sample.txt",size:1024,type:"file",modified:new Date().toISOString()},{name:"documents",size:0,type:"directory",modified:new Date().toISOString()}]}catch(_){console.error("Error fetching files:",_),s.value=[{name:"sample.txt",size:1024,type:"file",modified:new Date().toISOString()},{name:"documents",size:0,type:"directory",modified:new Date().toISOString()}]}},l=()=>{if(t.value)t.value.click();else{const _=document.createElement("input");_.type="file",_.onchange=a,_.click()}},a=async _=>{const S=_.target.files[0];S&&(await u(S),t.value&&(t.value.value=""))},u=async _=>{const S=new FormData;S.append("file",_);try{const A=await fetch("http://localhost:8001/api/files/upload",{method:"POST",headers:{"X-User-Role":"admin"},body:S});if(A.ok){const ae=await A.json();alert(`File ${_.name} uploaded successfully.`),console.log("Upload response:",ae),r()}else{const ae=await A.text();console.error("Upload failed:",A.status,ae),A.status===403?alert("Permission denied. File upload requires admin privileges."):A.status===413?alert("File too large. Maximum size is 50MB."):A.status===400?alert("Invalid file type or file not allowed."):alert(`Failed to upload file: ${A.status} ${A.statusText}`)}}catch(L){console.error("Error uploading file:",L),alert("Error uploading file. Please check your connection and try again.")}},p=async _=>{try{const S=_.name.split(".").pop()?.toLowerCase()||"",L=f(S),A=`http://localhost:8001/api/files/view/${encodeURIComponent(_.path||_.name)}`;if(L==="html"){const ae=await fetch(A);if(ae.ok){const se=await ae.text(),be=new Blob([se],{type:"text/html"}),z=URL.createObjectURL(be);o.value={name:_.name,type:"html",url:z,size:_.size,fileType:S.toUpperCase()}}else throw new Error("Failed to load HTML file")}else if(L==="text"||L==="json"){const ae=await fetch(A);if(ae.ok){const se=await ae.text();o.value={name:_.name,type:L,content:se,size:_.size,fileType:S.toUpperCase()}}else throw new Error("Failed to load text file")}else L==="image"?o.value={name:_.name,type:"image",url:A,size:_.size,fileType:S.toUpperCase()}:L==="pdf"?o.value={name:_.name,type:"pdf",url:A,size:_.size,fileType:S.toUpperCase()}:o.value={name:_.name,type:"other",url:A,size:_.size,fileType:S.toUpperCase()};e.value=!0}catch(S){console.error("Error viewing file:",S),alert(`Error loading ${_.name}: ${S.message}`)}},f=_=>{const S=["jpg","jpeg","png","gif","bmp","svg","webp"],L=["txt","md","js","css","py","java","cpp","c","php","rb","go","rs","vue","jsx","tsx","yaml","yml","xml","csv"],A=["json"],ae=["html","htm"],se=["pdf"];return ae.includes(_)?"html":S.includes(_)?"image":L.includes(_)?"text":A.includes(_)?"json":se.includes(_)?"pdf":"other"},v=()=>{e.value=!1,o.value?.url&&o.value.url.startsWith("blob:")&&URL.revokeObjectURL(o.value.url),o.value=null},w=_=>{try{return JSON.stringify(JSON.parse(_),null,2)}catch{return _}},k=async()=>{if(o.value?.url){const _=document.createElement("a");_.href=o.value.url,_.download=o.value.name,_.click()}},h=async _=>{try{const S=await fetch("http://localhost:8001/api/files/delete",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:_.path})});if(S.ok){const L=S.headers.get("content-type");L&&L.includes("application/json")?(alert(`Deleted ${_.name}.`),r()):(alert(`File ${_.name} would be deleted (API integration pending).`),r())}else alert(`File ${_.name} would be deleted (API integration pending).`),r()}catch(S){console.error("Error deleting file:",S),alert(`File ${_.name} would be deleted (API integration pending).`),r()}},P=_=>_<1024?_+" B":_<1048576?(_/1024).toFixed(1)+" KB":(_/1048576).toFixed(1)+" MB",x=_=>new Date(_*1e3).toLocaleString();return r(),{files:s,showPreview:e,previewFile:o,fileInput:t,visibleFileInput:i,refreshFiles:r,uploadFile:l,handleFileSelected:a,processFileUpload:u,viewFile:p,deleteFile:h,closePreview:v,formatJson:w,downloadPreviewFile:k,formatSize:P,formatDate:x}}},jC={class:"file-browser"},BC={class:"file-actions"},KC={class:"file-upload-section"},WC={class:"modal-header"},HC={class:"modal-body"},qC={key:0,class:"html-preview"},GC=["src"],$C={key:1,class:"image-preview"},zC=["src","alt"],JC={key:2,class:"text-preview"},YC={key:3,class:"json-preview"},QC={key:4,class:"pdf-preview"},ZC=["src"],XC={key:5,class:"file-info"},eS={class:"file-list-container"},tS={class:"file-table"},sS=["onClick"],nS=["onClick"],oS={key:0};function lS(s,e,o,t,i,r){return c(),d("div",jC,[e[19]||(e[19]=n("h2",null,"File Browser",-1)),n("div",BC,[n("button",{onClick:e[0]||(e[0]=(...l)=>t.refreshFiles&&t.refreshFiles(...l)),"aria-label":"Refresh"},"Refresh"),n("button",{onClick:e[1]||(e[1]=(...l)=>t.uploadFile&&t.uploadFile(...l)),"aria-label":"Upload file"},"Upload File"),n("div",KC,[e[12]||(e[12]=n("label",{for:"visible-file-input",class:"file-input-label"}," Or drag & drop files here: ",-1)),n("input",{id:"visible-file-input",ref:"visibleFileInput",type:"file",onChange:e[2]||(e[2]=(...l)=>t.handleFileSelected&&t.handleFileSelected(...l)),class:"visible-file-input","data-testid":"visible-file-upload-input","aria-label":"Visible file upload input"},null,544)]),n("input",{ref:"fileInput",type:"file",style:{display:"none"},onChange:e[3]||(e[3]=(...l)=>t.handleFileSelected&&t.handleFileSelected(...l)),"data-testid":"file-upload-input","aria-label":"File upload input"},null,544)]),t.showPreview?(c(),d("div",{key:0,class:"file-preview-modal",onClick:e[9]||(e[9]=(...l)=>t.closePreview&&t.closePreview(...l)),tabindex:"0",onKeyup:[e[10]||(e[10]=ve(l=>l.target.click(),["enter"])),e[11]||(e[11]=ve(l=>l.target.click(),["space"]))]},[n("div",{class:"modal-content",onClick:e[6]||(e[6]=ze(()=>{},["stop"])),tabindex:"0",onKeyup:[e[7]||(e[7]=ve(l=>l.target.click(),["enter"])),e[8]||(e[8]=ve(l=>l.target.click(),["space"]))]},[n("div",WC,[n("h3",null,m(t.previewFile?.name),1),n("button",{class:"close-btn",onClick:e[4]||(e[4]=(...l)=>t.closePreview&&t.closePreview(...l)),"aria-label":""},"")]),n("div",HC,[t.previewFile?.type==="html"?(c(),d("div",qC,[n("iframe",{src:t.previewFile.url,class:"html-frame",sandbox:"allow-same-origin allow-scripts",title:"HTML Preview"},null,8,GC)])):t.previewFile?.type==="image"?(c(),d("div",$C,[n("img",{src:t.previewFile.url,alt:t.previewFile.name,class:"preview-image"},null,8,zC)])):t.previewFile?.type==="text"?(c(),d("div",JC,[n("pre",null,[n("code",null,m(t.previewFile.content),1)])])):t.previewFile?.type==="json"?(c(),d("div",YC,[n("pre",null,[n("code",null,m(t.formatJson(t.previewFile.content)),1)])])):t.previewFile?.type==="pdf"?(c(),d("div",QC,[n("iframe",{src:t.previewFile.url,class:"pdf-frame",title:"PDF Preview"},null,8,ZC)])):(c(),d("div",XC,[n("p",null,[e[13]||(e[13]=n("strong",null,"File:",-1)),U(" "+m(t.previewFile?.name),1)]),n("p",null,[e[14]||(e[14]=n("strong",null,"Type:",-1)),U(" "+m(t.previewFile?.fileType),1)]),n("p",null,[e[15]||(e[15]=n("strong",null,"Size:",-1)),U(" "+m(t.formatSize(t.previewFile?.size)),1)]),e[16]||(e[16]=n("p",null,"This file type cannot be previewed directly.",-1)),n("button",{onClick:e[5]||(e[5]=(...l)=>t.downloadPreviewFile&&t.downloadPreviewFile(...l)),class:"download-btn","aria-label":"Download file"},"Download File")]))])],32)],32)):C("",!0),n("div",eS,[n("table",tS,[e[18]||(e[18]=n("thead",null,[n("tr",null,[n("th",null,"Name"),n("th",null,"Type"),n("th",null,"Size"),n("th",null,"Last Modified"),n("th",null,"Actions")])],-1)),n("tbody",null,[(c(!0),d(pe,null,ye(t.files,(l,a)=>(c(),d("tr",{key:l.name||l.id||`file-${a}`},[n("td",null,m(l.name),1),n("td",null,m(l.is_dir?"Directory":"File"),1),n("td",null,m(l.is_dir?"-":t.formatSize(l.size)),1),n("td",null,m(t.formatDate(l.last_modified)),1),n("td",null,[l.is_dir?C("",!0):(c(),d("button",{key:0,onClick:u=>t.viewFile(l),"aria-label":"View"},"View",8,sS)),n("button",{onClick:u=>t.deleteFile(l),"aria-label":"Delete"},"Delete",8,nS)])]))),128)),t.files.length===0?(c(),d("tr",oS,e[17]||(e[17]=[n("td",{colspan:"5",class:"no-files"},"No files or directories found.",-1)]))):C("",!0)])])])])}const iS=Xe(VC,[["render",lS],["__scopeId","data-v-5719b1e2"]]),aS={name:"SystemMonitor",setup(){const s=b(!1),e=b("1h"),o=b("all"),t=b(null),i=b(null),r=b({cpu:0,memory:0,gpu:0,npu:0,network:0,networkSpeed:0}),l=b([{name:"Backend API",version:"v1.2.3",status:"online",statusText:"Running"},{name:"LLM Service",version:"v2.1.0",status:"online",statusText:"Connected"},{name:"Redis Cache",version:"v7.0",status:"online",statusText:"Connected"},{name:"Knowledge Base",version:"v1.0.1",status:"online",statusText:"Ready"},{name:"Voice Interface",version:"v1.1.0",status:"online",statusText:"Ready"},{name:"File Manager",version:"v1.0.0",status:"online",statusText:"Active"}]),a=b([{name:"Chat API",endpoints:[{method:"POST",path:"/api/chat",status:"healthy",responseTime:245},{method:"GET",path:"/api/chat/history",status:"healthy",responseTime:123},{method:"POST",path:"/api/chat/reset",status:"healthy",responseTime:89}]},{name:"Voice API",endpoints:[{method:"POST",path:"/api/voice/listen",status:"healthy",responseTime:567},{method:"POST",path:"/api/voice/speak",status:"warning",responseTime:1234}]},{name:"Knowledge API",endpoints:[{method:"POST",path:"/api/knowledge/search",status:"healthy",responseTime:145},{method:"POST",path:"/api/knowledge/add_text",status:"healthy",responseTime:234}]}]),u=b([]),p=b({used:15.7*1024*1024*1024,total:100*1024*1024*1024}),f=b({used:2.4*1024*1024*1024,total:8*1024*1024*1024}),v=b({entries:3847}),w=[{label:"1H",value:"1h"},{label:"6H",value:"6h"},{label:"24H",value:"24h"},{label:"7D",value:"7d"}];let k=[],h=null,P=null;const x=Se(()=>l.value.filter(ee=>ee.status==="online").length),_=Se(()=>l.value.length),S=Se(()=>a.value.reduce((ee,xe)=>ee+xe.endpoints.filter(fe=>fe.status==="healthy").length,0)),L=Se(()=>a.value.reduce((ee,xe)=>ee+xe.endpoints.length,0)),A=Se(()=>o.value==="all"?u.value:u.value.filter(ee=>ee.level===o.value)),ae=ee=>{if(ee===0)return"0 B";const xe=1024,fe=["B","KB","MB","GB","TB"],Z=Math.floor(Math.log(ee)/Math.log(xe));return parseFloat((ee/Math.pow(xe,Z)).toFixed(1))+" "+fe[Z]},se=()=>{r.value.cpu=Math.floor(Math.random()*100),r.value.memory=Math.floor(Math.random()*100),r.value.gpu=Math.floor(Math.random()*100),r.value.npu=Math.floor(Math.random()*100),r.value.network=Math.floor(Math.random()*100),r.value.networkSpeed=Math.floor(Math.random()*1024*1024*100)},be=()=>{const ee=Date.now();k.push({timestamp:ee,cpu:r.value.cpu,memory:r.value.memory,gpu:r.value.gpu,npu:r.value.npu}),k.length>100&&(k=k.slice(-100))},z=()=>{if(!t.value)return;const ee=t.value.getContext("2d"),xe=t.value;if(ee.clearRect(0,0,xe.width,xe.height),k.length<2)return;const fe=40,Z=xe.width-fe*2,O=xe.height-fe*2;ee.strokeStyle="rgba(255, 255, 255, 0.1)",ee.lineWidth=1;for(let J=0;J<=4;J++){const W=fe+O*J/4;ee.beginPath(),ee.moveTo(fe,W),ee.lineTo(Z+fe,W),ee.stroke()}const M=(J,W)=>{ee.strokeStyle=W,ee.lineWidth=2,ee.beginPath(),k.forEach((K,F)=>{const de=fe+Z*F/(k.length-1),me=fe+O-O*K[J]/100;F===0?ee.moveTo(de,me):ee.lineTo(de,me)}),ee.stroke()};M("cpu","#ef4444"),M("memory","#10b981"),M("gpu","#3b82f6"),M("npu","#f59e0b"),ee.fillStyle="var(--blue-gray-800)",ee.font="12px Inter",ee.fillText("CPU",fe+10,fe+20),ee.fillText("Memory",fe+50,fe+20),ee.fillText("GPU",fe+100,fe+20),ee.fillText("NPU",fe+140,fe+20),ee.fillStyle="#ef4444",ee.fillRect(fe-5,fe+10,10,2),ee.fillStyle="#10b981",ee.fillRect(fe+35,fe+10,10,2),ee.fillStyle="#3b82f6",ee.fillRect(fe+85,fe+10,10,2),ee.fillStyle="#f59e0b",ee.fillRect(fe+125,fe+10,10,2)},q=(ee,xe)=>{const fe={id:Date.now()+Math.random(),level:ee,message:xe,timestamp:new Date().toLocaleTimeString()};u.value.unshift(fe),u.value.length>100&&(u.value=u.value.slice(0,100)),mt(()=>{i.value&&(i.value.scrollTop=0)})},X=()=>{u.value=[]},Ee=()=>{const ee=[{level:"info",message:"New chat session started"},{level:"info",message:"Knowledge base updated with new entries"},{level:"warning",message:"High CPU usage detected"},{level:"info",message:"Voice command processed successfully"},{level:"error",message:"Failed to connect to external API"},{level:"info",message:"File upload completed"},{level:"warning",message:"Memory usage approaching limit"},{level:"info",message:"Background task completed"}],xe=Math.random()*1e4+5e3;setTimeout(()=>{const fe=ee[Math.floor(Math.random()*ee.length)];q(fe.level,fe.message),Ee()},xe)},Pe=async()=>{s.value=!0;try{se(),be(),z();try{if((await Ie.get("/api/system/health")).status==="healthy"){const xe=l.value.find(fe=>fe.name==="Backend API");xe&&(xe.status="online",xe.statusText="Running")}}catch(ee){console.warn("Could not fetch system health:",ee)}}finally{setTimeout(()=>{s.value=!1},500)}};return it(()=>{for(let ee=0;ee<20;ee++)se(),be();mt(()=>{z()}),P=setInterval(Pe,5e3),h=setInterval(z,1e3),q("info","System monitor initialized"),q("info","All services checked"),Ee()}),ut(()=>{P&&clearInterval(P),h&&clearInterval(h)}),{isRefreshing:s,selectedTimeframe:e,selectedLogLevel:o,performanceChart:t,logsContainer:i,metrics:r,services:l,apiEndpoints:a,logs:u,storage:p,llmMemory:f,knowledge:v,timeframes:w,onlineServices:x,totalServices:_,healthyEndpoints:S,totalEndpoints:L,filteredLogs:A,formatBytes:ae,clearLogs:X,updateMetrics:Pe}}},rS={class:"system-monitor"},cS={class:"monitor-grid"},dS={class:"metric-card glass-card"},uS={class:"card-header"},fS={class:"metric-content"},mS={class:"metric-item"},pS={class:"metric-bar"},gS={class:"metric-value"},vS={class:"metric-item"},hS={class:"metric-bar"},bS={class:"metric-value"},yS={class:"metric-item"},wS={class:"metric-bar"},kS={class:"metric-value"},_S={class:"metric-item"},xS={class:"metric-bar"},CS={class:"metric-value"},SS={class:"metric-item"},TS={class:"metric-bar"},ES={class:"metric-value"},IS={class:"status-card glass-card"},PS={class:"card-header"},RS={class:"status-summary"},DS={class:"status-content"},MS={class:"service-info"},AS={class:"service-name"},US={class:"service-version"},LS={class:"chart-card glass-card"},OS={class:"card-header"},FS={class:"chart-controls"},NS=["onClick"],VS={class:"chart-content"},jS={ref:"performanceChart",width:"400",height:"200"},BS={class:"api-card glass-card"},KS={class:"card-header"},WS={class:"api-stats"},HS={class:"api-content"},qS={class:"group-name"},GS={class:"endpoint-list"},$S={class:"endpoint-info"},zS={class:"method"},JS={class:"path"},YS={class:"endpoint-metrics"},QS={class:"response-time"},ZS={class:"logs-card glass-card"},XS={class:"card-header"},e2={class:"log-controls"},t2={class:"logs-content",ref:"logsContainer"},s2={class:"log-time"},n2={class:"log-level"},o2={class:"log-message"},l2={class:"resources-card glass-card"},i2={class:"resources-content"},a2={class:"resource-item"},r2={class:"resource-info"},c2={class:"resource-usage"},d2={class:"resource-bar"},u2={class:"resource-item"},f2={class:"resource-info"},m2={class:"resource-usage"},p2={class:"resource-bar"},g2={class:"resource-item"},v2={class:"resource-info"},h2={class:"resource-usage"},b2={class:"resource-bar"};function y2(s,e,o,t,i,r){return c(),d("div",rS,[n("div",cS,[n("div",dS,[n("div",uS,[e[2]||(e[2]=n("h3",null,"System Performance",-1)),n("div",{class:G(["refresh-indicator",{spinning:t.isRefreshing}])},"",2)]),n("div",fS,[n("div",mS,[e[3]||(e[3]=n("div",{class:"metric-label"},"CPU Usage",-1)),n("div",pS,[n("div",{class:"bar-fill cpu",style:ct({width:`${t.metrics.cpu}%`})},null,4),n("span",gS,m(t.metrics.cpu)+"%",1)])]),n("div",vS,[e[4]||(e[4]=n("div",{class:"metric-label"},"Memory Usage",-1)),n("div",hS,[n("div",{class:"bar-fill memory",style:ct({width:`${t.metrics.memory}%`})},null,4),n("span",bS,m(t.metrics.memory)+"%",1)])]),n("div",yS,[e[5]||(e[5]=n("div",{class:"metric-label"},"GPU Usage",-1)),n("div",wS,[n("div",{class:"bar-fill gpu",style:ct({width:`${t.metrics.gpu}%`})},null,4),n("span",kS,m(t.metrics.gpu)+"%",1)])]),n("div",_S,[e[6]||(e[6]=n("div",{class:"metric-label"},"NPU Usage",-1)),n("div",xS,[n("div",{class:"bar-fill npu",style:ct({width:`${t.metrics.npu}%`})},null,4),n("span",CS,m(t.metrics.npu)+"%",1)])]),n("div",SS,[e[7]||(e[7]=n("div",{class:"metric-label"},"Network I/O",-1)),n("div",TS,[n("div",{class:"bar-fill network",style:ct({width:`${t.metrics.network}%`})},null,4),n("span",ES,m(t.formatBytes(t.metrics.networkSpeed))+"/s",1)])])])]),n("div",IS,[n("div",PS,[e[8]||(e[8]=n("h3",null,"Service Status",-1)),n("div",RS,m(t.onlineServices)+"/"+m(t.totalServices)+" Online",1)]),n("div",DS,[(c(!0),d(pe,null,ye(t.services,l=>(c(),d("div",{class:"service-item",key:l.name},[n("div",MS,[n("div",AS,m(l.name),1),n("div",US,m(l.version),1)]),n("div",{class:G(["service-status",l.status])},[e[9]||(e[9]=n("div",{class:"status-dot"},null,-1)),n("span",null,m(l.statusText),1)],2)]))),128))])]),n("div",LS,[n("div",OS,[e[10]||(e[10]=n("h3",null,"Performance History",-1)),n("div",FS,[(c(!0),d(pe,null,ye(t.timeframes,l=>(c(),d("button",{key:l.value,class:G(["time-btn",{active:t.selectedTimeframe===l.value}]),onClick:a=>t.selectedTimeframe=l.value,"aria-label":"{{ timeframe.label }}"},m(l.label),11,NS))),128))])]),n("div",VS,[n("canvas",jS,null,512)])]),n("div",BS,[n("div",KS,[e[11]||(e[11]=n("h3",null,"API Health",-1)),n("div",WS,m(t.healthyEndpoints)+"/"+m(t.totalEndpoints)+" Healthy",1)]),n("div",HS,[(c(!0),d(pe,null,ye(t.apiEndpoints,l=>(c(),d("div",{class:"endpoint-group",key:l.name},[n("div",qS,m(l.name),1),n("div",GS,[(c(!0),d(pe,null,ye(l.endpoints,a=>(c(),d("div",{class:G(["endpoint-item",a.status]),key:a.path},[n("div",$S,[n("span",zS,m(a.method),1),n("span",JS,m(a.path),1)]),n("div",YS,[n("span",QS,m(a.responseTime)+"ms",1),n("div",{class:G(["status-indicator",a.status])},null,2)])],2))),128))])]))),128))])]),n("div",ZS,[n("div",XS,[e[13]||(e[13]=n("h3",null,"System Logs",-1)),n("div",e2,[B(n("select",{"onUpdate:modelValue":e[0]||(e[0]=l=>t.selectedLogLevel=l),class:"log-filter"},e[12]||(e[12]=[n("option",{value:"all"},"All Levels",-1),n("option",{value:"error"},"Errors",-1),n("option",{value:"warning"},"Warnings",-1),n("option",{value:"info"},"Info",-1)]),512),[[Ze,t.selectedLogLevel]]),n("button",{class:"clear-logs",onClick:e[1]||(e[1]=(...l)=>t.clearLogs&&t.clearLogs(...l)),"aria-label":"Clear"},"Clear")])]),n("div",t2,[(c(!0),d(pe,null,ye(t.filteredLogs,l=>(c(),d("div",{class:G(["log-entry",l.level]),key:l.id},[n("span",s2,m(l.timestamp),1),n("span",n2,m(l.level.toUpperCase()),1),n("span",o2,m(l.message),1)],2))),128))],512)]),n("div",l2,[e[20]||(e[20]=n("div",{class:"card-header"},[n("h3",null,"Resource Usage")],-1)),n("div",i2,[n("div",a2,[e[15]||(e[15]=n("div",{class:"resource-icon"},"",-1)),n("div",r2,[e[14]||(e[14]=n("div",{class:"resource-name"},"Storage",-1)),n("div",c2,m(t.formatBytes(t.storage.used))+" / "+m(t.formatBytes(t.storage.total)),1),n("div",d2,[n("div",{class:"bar-fill storage",style:ct({width:`${t.storage.used/t.storage.total*100}%`})},null,4)])])]),n("div",u2,[e[17]||(e[17]=n("div",{class:"resource-icon"},"",-1)),n("div",f2,[e[16]||(e[16]=n("div",{class:"resource-name"},"LLM Memory",-1)),n("div",m2,m(t.formatBytes(t.llmMemory.used))+" / "+m(t.formatBytes(t.llmMemory.total)),1),n("div",p2,[n("div",{class:"bar-fill llm",style:ct({width:`${t.llmMemory.used/t.llmMemory.total*100}%`})},null,4)])])]),n("div",g2,[e[19]||(e[19]=n("div",{class:"resource-icon"},"",-1)),n("div",v2,[e[18]||(e[18]=n("div",{class:"resource-name"},"Knowledge Base",-1)),n("div",h2,m(t.knowledge.entries)+" entries",1),n("div",b2,[n("div",{class:"bar-fill kb",style:ct({width:`${Math.min(t.knowledge.entries/1e4*100,100)}%`})},null,4)])])])])])])])}const w2=Xe(aS,[["render",y2],["__scopeId","data-v-ec011284"]]),k2={name:"PhaseProgressionIndicator",data(){return{phases:[],systemMaturity:0,progressionHistory:[],autoProgressionEnabled:!0,loading:!1,loadingMessage:"",validationInProgress:!1,progressionInProgress:!1,showDetails:!0,canManagePhases:!0,refreshInterval:null}},mounted(){this.loadPhaseData(),this.startAutoRefresh()},beforeUnmount(){this.stopAutoRefresh()},methods:{async loadPhaseData(){this.loading=!0,this.loadingMessage="Loading phase data...";try{const s=await fetch("/api/phases/phases/available");if(s.ok){const o=await s.json();this.phases=o.phases}const e=await fetch("/api/phases/capabilities/current");if(e.ok){const o=await e.json();this.systemMaturity=o.capabilities.system_maturity,this.progressionHistory=o.capabilities.progression_history,this.autoProgressionEnabled=o.capabilities.auto_progression_enabled}if(this.phases.length>0){const o=this.phases.reduce((t,i)=>t+i.completion_percentage,0);this.systemMaturity=Math.round(o/this.phases.length)}}catch(s){console.error("Failed to load phase data:",s),this.$emit("error","Failed to load phase progression data")}finally{this.loading=!1}},async runFullValidation(){this.validationInProgress=!0,this.loading=!0,this.loadingMessage="Running comprehensive system validation...";try{const s=await fetch("/api/phases/validation/full");if(s.ok){const e=await s.json();this.$emit("validation-complete",e),await this.loadPhaseData(),this.$emit("success","System validation completed successfully")}else throw new Error("Validation request failed")}catch(s){console.error("Validation failed:",s),this.$emit("error","System validation failed")}finally{this.validationInProgress=!1,this.loading=!1}},async triggerAutoProgression(){this.progressionInProgress=!0,this.loading=!0,this.loadingMessage="Executing automated progression...";try{if((await fetch("/api/phases/progression/auto",{method:"POST"})).ok)this.$emit("success","Auto-progression started successfully"),setTimeout(async()=>{await this.loadPhaseData()},3e3);else throw new Error("Auto-progression request failed")}catch(s){console.error("Auto-progression failed:",s),this.$emit("error","Auto-progression failed")}finally{this.progressionInProgress=!1,this.loading=!1}},async triggerProgression(s){this.progressionInProgress=!0,this.loading=!0,this.loadingMessage=`Progressing to ${s}...`;try{const e=await fetch("/api/phases/progression/manual",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phase_name:s,user_id:"web_ui",trigger:"user_request"})}),o=await e.json();if(e.ok)this.$emit("success",`Successfully progressed to ${s}`),await this.loadPhaseData();else throw new Error(o.message||"Progression failed")}catch(e){console.error("Manual progression failed:",e),this.$emit("error",`Failed to progress to ${s}: ${e.message}`)}finally{this.progressionInProgress=!1,this.loading=!1}},async validatePhase(s){this.validationInProgress=!0,this.loadingMessage=`Validating ${s}...`;try{const e=await fetch("/api/phases/validation/run",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phases:[s],include_details:!0})});if(e.ok){const o=await e.json();this.$emit("phase-validated",{phase:s,result:o}),await this.loadPhaseData()}else throw new Error("Phase validation failed")}catch(e){console.error("Phase validation failed:",e),this.$emit("error",`Validation failed for ${s}`)}finally{this.validationInProgress=!1}},async updateAutoProgression(){try{(await fetch("/api/phases/config/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auto_progression_enabled:this.autoProgressionEnabled})})).ok&&this.$emit("success",`Auto-progression ${this.autoProgressionEnabled?"enabled":"disabled"}`)}catch(s){console.error("Failed to update auto-progression setting:",s),this.autoProgressionEnabled=!this.autoProgressionEnabled}},startAutoRefresh(){this.refreshInterval=setInterval(()=>{this.loadPhaseData()},3e4)},stopAutoRefresh(){this.refreshInterval&&clearInterval(this.refreshInterval)},getPhaseCardClass(s){return["phase-card-status",s.status==="complete"?"phase-complete":s.status==="mostly_complete"?"phase-mostly-complete":s.status==="in_progress"?"phase-in-progress":"phase-incomplete"]},getPhaseIcon(s){return{"Phase 1: Core Infrastructure":"fas fa-server","Phase 2: Knowledge Base and Memory":"fas fa-database","Phase 3: LLM Integration":"fas fa-brain","Phase 4: Security and Authentication":"fas fa-shield-alt","Phase 5: Performance Optimization":"fas fa-tachometer-alt","Phase 6: Monitoring and Alerting":"fas fa-chart-line","Phase 7: Frontend and UI":"fas fa-desktop","Phase 8: Agent Orchestration":"fas fa-sitemap","Phase 9: Advanced AI Features":"fas fa-robot","Phase 10: Production Readiness":"fas fa-cloud"}[s.name]||"fas fa-cog"},getStatusClass(s){return{complete:"status-complete",mostly_complete:"status-mostly-complete",in_progress:"status-in-progress",incomplete:"status-incomplete",promoted:"status-complete",eligible:"status-in-progress",blocked:"status-incomplete"}[s]||"status-unknown"},getProgressClass(s){return s>=95?"progress-complete":s>=75?"progress-mostly-complete":s>=50?"progress-in-progress":"progress-incomplete"},getMaturityClass(s){return s>=95?"maturity-production":s>=80?"maturity-beta":s>=50?"maturity-alpha":"maturity-development"},formatStatus(s){return s.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())},formatTime(s){return new Date(s).toLocaleString()},canTriggerProgression(s){return s.completion_percentage<95&&s.auto_progression},isPrerequisiteMet(s){const e=this.phases.find(o=>o.name===s);return e?e.completion_percentage>=95:!1}}},_2={class:"phase-progression-container"},x2={class:"phase-header"},C2={class:"overall-maturity"},S2={class:"maturity-bar"},T2={class:"maturity-percentage"},E2={class:"phases-grid"},I2={class:"phase-card-header"},P2={class:"phase-icon"},R2={class:"phase-info"},D2={class:"phase-name"},M2={class:"phase-completion"},A2={class:"progress-container"},U2={class:"progress-bar"},L2={key:0,class:"phase-details"},O2={key:0,class:"capabilities"},F2={class:"capability-tags"},N2={key:1,class:"prerequisites"},V2={class:"prereq-list"},j2={key:0,class:"fas fa-check text-green-500"},B2={key:1,class:"fas fa-times text-red-500"},K2={key:2,class:"next-phases"},W2={class:"next-phases-list"},H2={key:1,class:"phase-actions"},q2=["onClick","disabled"],G2=["onClick","disabled"],$2={key:0,class:"progression-history"},z2={class:"history-timeline"},J2={class:"history-content"},Y2={class:"history-time"},Q2={class:"auto-progression-controls"},Z2={class:"controls-grid"},X2={class:"control-item"},e3={class:"switch"},t3=["disabled"],s3=["disabled"],n3={key:1,class:"loading-overlay"},o3={class:"loading-spinner"};function l3(s,e,o,t,i,r){return c(),d("div",_2,[n("div",x2,[e[5]||(e[5]=n("h2",{class:"phase-title"},[n("i",{class:"fas fa-rocket"}),U(" System Phase Status ")],-1)),n("div",C2,[e[4]||(e[4]=n("span",{class:"maturity-label"},"System Maturity:",-1)),n("div",S2,[n("div",{class:G(["maturity-fill",r.getMaturityClass(i.systemMaturity)]),style:ct({width:`${i.systemMaturity}%`})},null,6)]),n("span",T2,m(i.systemMaturity)+"%",1)])]),n("div",E2,[(c(!0),d(pe,null,ye(i.phases,l=>(c(),d("div",{key:l.name,class:G(["phase-card",r.getPhaseCardClass(l)])},[n("div",I2,[n("div",P2,[n("i",{class:G(r.getPhaseIcon(l))},null,2)]),n("div",R2,[n("h3",D2,m(l.name),1),n("span",{class:G(["phase-status",r.getStatusClass(l.status)])},m(r.formatStatus(l.status)),3)]),n("div",M2,m(l.completion_percentage)+"% ",1)]),n("div",A2,[n("div",U2,[n("div",{class:G(["progress-fill",r.getProgressClass(l.completion_percentage)]),style:ct({width:`${l.completion_percentage}%`})},null,6)])]),i.showDetails?(c(),d("div",L2,[l.capabilities_unlocked?.length?(c(),d("div",O2,[e[6]||(e[6]=n("strong",null,"Capabilities:",-1)),n("div",F2,[(c(!0),d(pe,null,ye(l.capabilities_unlocked,a=>(c(),d("span",{key:a,class:"capability-tag"},m(a),1))),128))])])):C("",!0),l.prerequisites?.length?(c(),d("div",N2,[e[7]||(e[7]=n("strong",null,"Prerequisites:",-1)),n("ul",V2,[(c(!0),d(pe,null,ye(l.prerequisites,a=>(c(),d("li",{key:a},[r.isPrerequisiteMet(a)?(c(),d("i",j2)):(c(),d("i",B2)),U(" "+m(a),1)]))),128))])])):C("",!0),l.next_phases?.length?(c(),d("div",K2,[e[8]||(e[8]=n("strong",null,"Unlocks:",-1)),n("ul",W2,[(c(!0),d(pe,null,ye(l.next_phases,a=>(c(),d("li",{key:a},m(a),1))),128))])])):C("",!0)])):C("",!0),i.canManagePhases?(c(),d("div",H2,[r.canTriggerProgression(l)?(c(),d("button",{key:0,onClick:a=>r.triggerProgression(l.name),class:"btn-progression",disabled:i.progressionInProgress},e[9]||(e[9]=[n("i",{class:"fas fa-play"},null,-1),U(" Progress ",-1)]),8,q2)):C("",!0),n("button",{onClick:a=>r.validatePhase(l.name),class:"btn-validate",disabled:i.validationInProgress},e[10]||(e[10]=[n("i",{class:"fas fa-check-circle"},null,-1),U(" Validate ",-1)]),8,G2)])):C("",!0)],2))),128))]),i.progressionHistory?.length?(c(),d("div",$2,[e[12]||(e[12]=n("h3",null,[n("i",{class:"fas fa-history"}),U(" Recent Progressions ")],-1)),n("div",z2,[(c(!0),d(pe,null,ye(i.progressionHistory.slice(-5),l=>(c(),d("div",{key:l.timestamp,class:"history-item"},[e[11]||(e[11]=n("div",{class:"history-icon"},[n("i",{class:"fas fa-arrow-right text-blue-500"})],-1)),n("div",J2,[n("strong",null,m(l.phase),1),n("span",{class:G(["history-status",r.getStatusClass(l.status)])},m(r.formatStatus(l.status)),3),n("div",Y2,m(r.formatTime(l.timestamp)),1)])]))),128))])])):C("",!0),n("div",Q2,[e[17]||(e[17]=n("div",{class:"control-header"},[n("h3",null,[n("i",{class:"fas fa-cog"}),U(" Auto-Progression Settings ")])],-1)),n("div",Z2,[n("div",X2,[n("label",e3,[B(n("input",{type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=l=>i.autoProgressionEnabled=l),onChange:e[1]||(e[1]=(...l)=>r.updateAutoProgression&&r.updateAutoProgression(...l))},null,544),[[Ne,i.autoProgressionEnabled]]),e[13]||(e[13]=n("span",{class:"slider"},null,-1))]),e[14]||(e[14]=n("span",{class:"control-label"},"Auto-Progression Enabled",-1))]),n("button",{onClick:e[2]||(e[2]=(...l)=>r.runFullValidation&&r.runFullValidation(...l)),class:"btn-full-validation",disabled:i.validationInProgress},e[15]||(e[15]=[n("i",{class:"fas fa-play-circle"},null,-1),U(" Run Full System Validation ",-1)]),8,t3),n("button",{onClick:e[3]||(e[3]=(...l)=>r.triggerAutoProgression&&r.triggerAutoProgression(...l)),class:"btn-auto-progression",disabled:i.progressionInProgress||!i.autoProgressionEnabled},e[16]||(e[16]=[n("i",{class:"fas fa-forward"},null,-1),U(" Trigger Auto-Progression ",-1)]),8,s3)])]),i.loading?(c(),d("div",n3,[n("div",o3,[e[18]||(e[18]=n("i",{class:"fas fa-spinner fa-spin"},null,-1)),n("span",null,m(i.loadingMessage),1)])])):C("",!0)])}const i3=Xe(k2,[["render",l3],["__scopeId","data-v-34c612b0"]]),a3={name:"ElevationDialog",props:{show:{type:Boolean,default:!1},operation:{type:String,default:""},command:{type:String,default:""},reason:{type:String,default:""},riskLevel:{type:String,default:"MEDIUM",validator:s=>["LOW","MEDIUM","HIGH","CRITICAL"].includes(s)},requestId:{type:String,required:!0}},emits:["approved","cancelled","close"],setup(s,{emit:e}){const o=b(!1),t=b(""),i=b(!1),r=b(!1),l=b(!1),a=b(""),u=()=>{i.value=!i.value},p=async()=>{if(!t.value.trim()){a.value="Password is required";return}l.value=!0,a.value="";try{const h=await lt.post("/system/elevation/authorize",{request_id:s.requestId,password:t.value,remember_session:r.value});h.data.success?(e("approved",{requestId:s.requestId,sessionToken:h.data.session_token}),v()):a.value=h.data.message||"Authorization failed"}catch(h){a.value=h.response?.data?.message||"Authorization failed"}finally{l.value=!1}},f=()=>{e("cancelled",s.requestId),v()},v=()=>{o.value=!1,t.value="",a.value="",l.value=!1,e("close")},w=h=>{h.key==="Escape"&&o.value&&!l.value&&f()};return it(()=>{o.value=s.show,document.addEventListener("keydown",w)}),ut(()=>{document.removeEventListener("keydown",w)}),{showDialog:o,password:t,showPassword:i,rememberForSession:r,isProcessing:l,error:a,togglePasswordVisibility:u,handleApprove:p,handleCancel:f,updateShow:h=>{o.value=h,h&&(a.value="",t.value="")}}},watch:{show:{handler(s){this.updateShow(s)},immediate:!0}}},r3={key:0,class:"elevation-overlay"},c3={class:"elevation-dialog"},d3={class:"elevation-header"},u3={class:"elevation-title"},f3={class:"elevation-subtitle"},m3={class:"elevation-body"},p3={class:"elevation-details"},g3={class:"operation-info"},v3={class:"info-item"},h3={class:"command"},b3={key:0,class:"info-item"},y3={class:"reason"},w3={key:1,class:"info-item"},k3={class:"elevation-form"},_3={class:"form-group"},x3={class:"password-input-group"},C3=["type","disabled"],S3=["disabled"],T3={class:"security-options"},E3={class:"checkbox-label"},I3=["disabled"],P3={key:0,class:"warning-message"},R3={class:"elevation-footer"},D3={class:"button-group"},M3=["disabled"],A3=["disabled"],U3={key:0,class:"fas fa-spinner fa-spin"},L3={key:1,class:"fas fa-check"};function O3(s,e,o,t,i,r){return t.showDialog?(c(),d("div",r3,[n("div",c3,[n("div",d3,[e[7]||(e[7]=n("div",{class:"elevation-icon"},[n("i",{class:"fas fa-shield-alt"})],-1)),n("div",u3,[e[6]||(e[6]=n("h3",null,"Administrator Access Required",-1)),n("p",f3,m(o.operation||"This operation requires administrator privileges"),1)])]),n("div",m3,[n("div",p3,[e[11]||(e[11]=n("h4",null,"Operation Details:",-1)),n("div",g3,[n("div",v3,[e[8]||(e[8]=n("span",{class:"label"},"Command:",-1)),n("code",h3,m(o.command||"System operation"),1)]),o.reason?(c(),d("div",b3,[e[9]||(e[9]=n("span",{class:"label"},"Reason:",-1)),n("span",y3,m(o.reason),1)])):C("",!0),o.riskLevel?(c(),d("div",w3,[e[10]||(e[10]=n("span",{class:"label"},"Risk Level:",-1)),n("span",{class:G(["risk-badge",o.riskLevel.toLowerCase()])},m(o.riskLevel),3)])):C("",!0)])]),n("div",k3,[n("div",_3,[e[12]||(e[12]=n("label",{for:"sudo-password"},"Administrator Password:",-1)),n("div",x3,[B(n("input",{id:"sudo-password","onUpdate:modelValue":e[0]||(e[0]=l=>t.password=l),type:t.showPassword?"text":"password",class:"password-input",placeholder:"Enter your password",onKeyup:e[1]||(e[1]=ve((...l)=>t.handleApprove&&t.handleApprove(...l),["enter"])),disabled:t.isProcessing,autocomplete:"current-password"},null,40,C3),[[Lc,t.password]]),n("button",{type:"button",class:"password-toggle",onClick:e[2]||(e[2]=(...l)=>t.togglePasswordVisibility&&t.togglePasswordVisibility(...l)),disabled:t.isProcessing,"aria-label":"Action button"},[n("i",{class:G(t.showPassword?"fas fa-eye-slash":"fas fa-eye")},null,2)],8,S3)])]),n("div",T3,[n("label",E3,[B(n("input",{type:"checkbox","onUpdate:modelValue":e[3]||(e[3]=l=>t.rememberForSession=l),disabled:t.isProcessing},null,8,I3),[[Ne,t.rememberForSession]]),e[13]||(e[13]=n("span",{class:"checkmark"},null,-1)),e[14]||(e[14]=U(" Remember for this session (15 minutes) ",-1))])]),t.error?(c(),d("div",P3,[e[15]||(e[15]=n("i",{class:"fas fa-exclamation-triangle"},null,-1)),n("span",null,m(t.error),1)])):C("",!0)])]),n("div",R3,[n("div",D3,[n("button",{class:"btn btn-cancel",onClick:e[4]||(e[4]=(...l)=>t.handleCancel&&t.handleCancel(...l)),disabled:t.isProcessing,"aria-label":"Cancel"},e[16]||(e[16]=[n("i",{class:"fas fa-times"},null,-1),U(" Cancel ",-1)]),8,M3),n("button",{class:G(["btn btn-approve",{processing:t.isProcessing}]),onClick:e[5]||(e[5]=(...l)=>t.handleApprove&&t.handleApprove(...l)),disabled:!t.password||t.isProcessing,"aria-label":"Confirm"},[t.isProcessing?(c(),d("i",U3)):(c(),d("i",L3)),U(" "+m(t.isProcessing?"Verifying...":"Authorize"),1)],10,A3)]),e[17]||(e[17]=n("div",{class:"security-note"},[n("i",{class:"fas fa-info-circle"}),n("span",null,"Your password is used only for this authorization and is not stored.")],-1))])])])):C("",!0)}const F3=Xe(a3,[["render",O3],["__scopeId","data-v-4b09596c"]]),N3={name:"RumDashboard",setup(){const s=b(!1),e=b("Overview"),o=b({apiCalls:[],errors:[],webSocketEvents:[],sessionDuration:0}),t=b([]),i=["Overview","API Calls","Errors","WebSocket","Critical"],r=!1,l=Se(()=>o.value.apiCalls.filter(A=>A.isSlow).length),a=Se(()=>o.value.apiCalls.filter(A=>A.isTimeout).length),u=Se(()=>o.value.apiCalls.slice(-20).reverse()),p=Se(()=>o.value.errors.slice(-10).reverse()),f=Se(()=>o.value.webSocketEvents.slice(-20).reverse()),v=Se(()=>o.value.sessionDuration||0),w=Se(()=>{const A=o.value.webSocketEvents.slice(-5);return A.some(ae=>ae.event==="connection_opened")?"connected":A.some(ae=>ae.event==="error")?"error":"disconnected"}),k=Se(()=>{const A=w.value;return A==="connected"?" Connected":A==="error"?" Error":" Disconnected"}),h=()=>{window.rum&&(o.value=window.rum.getMetrics(),t.value=JSON.parse(localStorage.getItem("rum_critical_issues")||"[]"))},P=()=>{window.rum&&window.rum.exportData()},x=()=>{window.rum&&(window.rum.clear(),h())},_=()=>{s.value=!s.value,s.value&&h()},S=A=>new Date(A).toLocaleTimeString(),L=A=>{const ae=Math.floor(A/1e3),se=Math.floor(ae/60);return se>0?`${se}m ${ae%60}s`:`${ae}s`};return it(()=>{}),ut(()=>{}),{isVisible:s,activeTab:e,metrics:o,criticalIssues:t,tabs:i,isDev:r,slowApiCalls:l,timeoutApiCalls:a,recentApiCalls:u,recentErrors:p,recentWsEvents:f,sessionDuration:v,wsStatus:w,wsStatusText:k,refreshData:h,exportData:P,clearData:x,toggleVisibility:_,formatTime:S,formatDuration:L}}},V3={key:0,class:"rum-dashboard"},j3={class:"rum-header"},B3={class:"rum-controls"},K3={class:"rum-tabs"},W3=["onClick"],H3={class:"rum-content"},q3={key:0,class:"rum-section"},G3={class:"rum-stats"},$3={class:"stat-card"},z3={class:"stat-card"},J3={key:0,class:"stat-card error"},Y3={key:1,class:"stat-card critical"},Q3={key:2,class:"stat-card error"},Z3={key:1,class:"rum-section"},X3={class:"rum-table"},e4={key:2,class:"rum-section"},t4={class:"error-list"},s4={class:"error-header"},n4={class:"error-type"},o4={class:"error-time"},l4={class:"error-message"},i4={key:0,class:"error-details"},a4={key:3,class:"rum-section"},r4={class:"websocket-status"},c4={class:"rum-table"},d4={key:4,class:"rum-section"},u4={class:"critical-issues"},f4={class:"critical-header"},m4={class:"critical-type"},p4={class:"critical-time"},g4={class:"critical-data"};function v4(s,e,o,t,i,r){return c(),d(pe,null,[t.isVisible?(c(),d("div",V3,[n("div",j3,[e[5]||(e[5]=n("h3",null," RUM Dashboard (Dev Mode)",-1)),n("div",B3,[n("button",{onClick:e[0]||(e[0]=(...l)=>t.refreshData&&t.refreshData(...l)),class:"btn-sm"},"Refresh"),n("button",{onClick:e[1]||(e[1]=(...l)=>t.exportData&&t.exportData(...l)),class:"btn-sm"},"Export"),n("button",{onClick:e[2]||(e[2]=(...l)=>t.clearData&&t.clearData(...l)),class:"btn-sm btn-warning"},"Clear"),n("button",{onClick:e[3]||(e[3]=(...l)=>t.toggleVisibility&&t.toggleVisibility(...l)),class:"btn-sm"},"Hide")])]),n("div",K3,[(c(!0),d(pe,null,ye(t.tabs,l=>(c(),d("button",{key:l,onClick:a=>t.activeTab=l,class:G([{active:t.activeTab===l},"rum-tab"])},m(l),11,W3))),128))]),n("div",H3,[t.activeTab==="Overview"?(c(),d("div",q3,[n("div",G3,[n("div",$3,[e[6]||(e[6]=n("h4",null,"Session",-1)),n("p",null,m(t.formatDuration(t.sessionDuration)),1)]),n("div",z3,[e[7]||(e[7]=n("h4",null,"API Calls",-1)),n("p",null,m(t.metrics.apiCalls.length),1)]),t.slowApiCalls>0?(c(),d("div",J3,[e[8]||(e[8]=n("h4",null,"Slow API",-1)),n("p",null,m(t.slowApiCalls),1)])):C("",!0),t.timeoutApiCalls>0?(c(),d("div",Y3,[e[9]||(e[9]=n("h4",null,"Timeouts",-1)),n("p",null,m(t.timeoutApiCalls),1)])):C("",!0),t.metrics.errors.length>0?(c(),d("div",Q3,[e[10]||(e[10]=n("h4",null,"Errors",-1)),n("p",null,m(t.metrics.errors.length),1)])):C("",!0)])])):C("",!0),t.activeTab==="API Calls"?(c(),d("div",Z3,[n("div",X3,[n("table",null,[e[11]||(e[11]=n("thead",null,[n("tr",null,[n("th",null,"Time"),n("th",null,"Method"),n("th",null,"Endpoint"),n("th",null,"Duration"),n("th",null,"Status")])],-1)),n("tbody",null,[(c(!0),d(pe,null,ye(t.recentApiCalls,l=>(c(),d("tr",{key:l.timestamp,class:G({slow:l.isSlow,timeout:l.isTimeout,error:l.status==="error"})},[n("td",null,m(t.formatTime(l.timestamp)),1),n("td",null,m(l.method),1),n("td",null,m(l.url),1),n("td",null,m(l.duration.toFixed(0))+"ms",1),n("td",null,m(l.status),1)],2))),128))])])])])):C("",!0),t.activeTab==="Errors"?(c(),d("div",e4,[n("div",t4,[(c(!0),d(pe,null,ye(t.recentErrors,l=>(c(),d("div",{key:l.timestamp,class:"error-item"},[n("div",s4,[n("span",n4,m(l.type),1),n("span",o4,m(t.formatTime(l.timestamp)),1)]),n("div",l4,m(l.message||l.reason),1),l.stack?(c(),d("div",i4,[n("pre",null,m(l.stack),1)])):C("",!0)]))),128))])])):C("",!0),t.activeTab==="WebSocket"?(c(),d("div",a4,[n("div",r4,[n("div",{class:G(["ws-indicator",t.wsStatus])},m(t.wsStatusText),3)]),n("div",c4,[n("table",null,[e[12]||(e[12]=n("thead",null,[n("tr",null,[n("th",null,"Time"),n("th",null,"Event"),n("th",null,"Details")])],-1)),n("tbody",null,[(c(!0),d(pe,null,ye(t.recentWsEvents,l=>(c(),d("tr",{key:l.timestamp},[n("td",null,m(t.formatTime(l.timestamp)),1),n("td",null,m(l.event),1),n("td",null,m(JSON.stringify(l.data)),1)]))),128))])])])])):C("",!0),t.activeTab==="Critical"?(c(),d("div",d4,[n("div",u4,[(c(!0),d(pe,null,ye(t.criticalIssues,l=>(c(),d("div",{key:l.timestamp,class:"critical-item"},[n("div",f4,[n("span",m4," "+m(l.type),1),n("span",p4,m(t.formatTime(l.timestamp)),1)]),n("div",g4,[n("pre",null,m(JSON.stringify(l.data,null,2)),1)])]))),128))])])):C("",!0)])])):C("",!0),!t.isVisible&&t.isDev?(c(),d("button",{key:1,onClick:e[4]||(e[4]=(...l)=>t.toggleVisibility&&t.toggleVisibility(...l)),class:"rum-toggle",title:"Show RUM Dashboard"},"  ")):C("",!0)],64)}const h4=Xe(N3,[["render",v4],["__scopeId","data-v-7d9378a7"]]);class b4{constructor(){this.pendingRequests=rs(new Map),this.activeSession=b(null),this.sessionExpiry=b(null),this.elevationDialog=b(null),this.startSessionMonitor()}registerDialog(e){this.elevationDialog.value=e}async requestElevation(e,o,t,i="MEDIUM"){try{const r=await lt.post("/system/elevation/request",{operation:e,command:o,reason:t,risk_level:i});if(r.data.success){const l=r.data.request_id;return this.pendingRequests.set(l,{operation:e,command:o,reason:t,riskLevel:i,timestamp:new Date,status:"pending"}),await this.showElevationDialog(l,e,o,t,i)}throw new Error(r.data.message||"Failed to create elevation request")}catch(r){throw console.error("Elevation request failed:",r),r}}async showElevationDialog(e,o,t,i,r){return new Promise((l,a)=>{if(!this.elevationDialog.value){a(new Error("Elevation dialog not registered"));return}this.elevationDialog.value.show=!0,this.elevationDialog.value.requestId=e,this.elevationDialog.value.operation=o,this.elevationDialog.value.command=t,this.elevationDialog.value.reason=i,this.elevationDialog.value.riskLevel=r;const u=v=>{this.activeSession.value=v.sessionToken,this.updateSessionExpiry(900),l({approved:!0,sessionToken:v.sessionToken}),f()},p=()=>{l({approved:!1,sessionToken:null}),f()},f=()=>{this.elevationDialog.value.$off("approved",u),this.elevationDialog.value.$off("cancelled",p)};this.elevationDialog.value.$on("approved",u),this.elevationDialog.value.$on("cancelled",p)})}async executeElevatedCommand(e,o=null){const t=o||this.activeSession.value;if(!t)throw new Error("No active elevation session");try{const i=await lt.post(`/system/elevation/execute/${t}`,{command:e});if(i.data.success)return{success:!0,output:i.data.output,error:i.data.error,returnCode:i.data.return_code};throw new Error(i.data.message||"Command execution failed")}catch(i){throw i.response?.status===401&&this.clearSession(),i}}hasActiveSession(){return!!this.activeSession.value&&this.sessionExpiry.value&&new Date<this.sessionExpiry.value}async clearSession(){if(this.activeSession.value)try{await lt.delete(`/system/elevation/session/${this.activeSession.value}`)}catch(e){console.error("Failed to revoke session:",e)}this.activeSession.value=null,this.sessionExpiry.value=null}updateSessionExpiry(e){this.sessionExpiry.value=new Date(Date.now()+e*1e3)}startSessionMonitor(){setInterval(()=>{this.sessionExpiry.value&&new Date>=this.sessionExpiry.value&&this.clearSession()},1e4)}async getPendingRequests(){try{const e=await lt.get("/system/elevation/pending");return e.data.success?e.data.pending_requests:{}}catch(e){return console.error("Failed to get pending requests:",e),{}}}withElevation(e,o,t="MEDIUM"){return async i=>async(...r)=>{try{return await i(...r)}catch(l){if(l.message?.includes("permission denied")||l.message?.includes("sudo")||l.code==="EACCES"){const a=l.command||`${e} operation`,u=await this.requestElevation(e,a,o,t);if(u.approved)return await i(...r,{elevationToken:u.sessionToken});throw new Error("Elevation request cancelled by user")}throw l}}}}const y4=new b4,w4={name:"App",components:{ChatInterface:Yb,VoiceInterface:Ty,KnowledgeManager:B0,TerminalWindow:qo,SettingsPanel:xx,SecretsManager:NC,FileBrowser:iS,SystemMonitor:w2,WorkflowApproval:oa,PhaseProgressionIndicator:i3,ElevationDialog:F3,RumDashboard:h4},setup(){const s=b("dashboard"),e=b(`chat-${Date.now()}`),o=b(!1),t=b(null),i=b("terminal"),r=b("voice"),l=J=>{s.value=J,o.value=!1},a=b(3),u=b(1247),p=b(89),f=b(92),v=b({text:"Checking...",class:"warning",message:"Connecting to backend..."}),w=b({text:"Checking...",class:"warning",message:"Connecting to LLM..."}),k=b({text:"Checking...",class:"warning",message:"Connecting to Redis..."}),h=Se(()=>({dashboard:"Dashboard",chat:"AI Assistant",voice:"Voice Interface",knowledge:"Knowledge Base",terminal:"Terminal",settings:"Settings",files:"File Manager",monitor:"System Monitor"})[s.value]||"AutoBot"),P=()=>{o.value=!o.value},x=J=>{o.value&&t.value&&!t.value.contains(J.target)&&(o.value=!1)},_=()=>{e.value=`chat-${Date.now()}`},S=()=>{},L=J=>{console.log("Phase operation successful:",J)},A=J=>{console.error("Phase operation failed:",J)},ae=J=>{console.log("Validation completed:",J)},se=J=>{console.log("Phase validated:",J)},be=b(null),z=b(!1),q=b(""),X=b(""),Ee=b(""),Pe=b("MEDIUM"),ee=b(""),xe=J=>{z.value=!1},fe=J=>{z.value=!1},Z=()=>{z.value=!1},O=async()=>{try{const J=await fetch("http://localhost:8001/api/system/health");if(J.ok){const W=await J.json();v.value={text:"Connected",class:"connected",message:"Backend is running"},w.value=W.llm_status?{text:"Ready",class:"connected",message:"LLM is ready"}:{text:"Error",class:"error",message:"LLM connection failed"},k.value=W.redis_status?{text:"Connected",class:"connected",message:"Redis is running"}:{text:"Error",class:"error",message:"Redis connection failed"}}else v.value={text:"Error",class:"error",message:"Backend connection failed"}}catch{v.value={text:"Offline",class:"error",message:"Cannot reach backend"},w.value={text:"Unknown",class:"warning",message:"Status unknown"},k.value={text:"Unknown",class:"warning",message:"Status unknown"}}};let M;return it(()=>{O(),M=setInterval(O,1e4),document.addEventListener("click",x),be.value&&y4.registerDialog(be.value),setInterval(()=>{a.value=Math.floor(Math.random()*5)+1,f.value=Math.floor(Math.random()*20)+80},5e3)}),ut(()=>{M&&clearInterval(M),document.removeEventListener("click",x)}),{activeTab:s,activeChatId:e,navbarOpen:o,mobileMenuContainer:t,activeToolTab:i,activeMonitoringTab:r,backendStatus:v,llmStatus:w,redisStatus:k,pageTitle:h,activeSessions:a,knowledgeItems:u,tasksCompleted:p,performance:f,toggleNavbar:P,updateRoute:l,newChat:_,refreshStats:S,elevationDialog:be,showElevationDialog:z,elevationOperation:q,elevationCommand:X,elevationReason:Ee,elevationRiskLevel:Pe,elevationRequestId:ee,onElevationApproved:xe,onElevationCancelled:fe,onElevationClose:Z,onPhaseSuccess:L,onPhaseError:A,onValidationComplete:ae,onPhaseValidated:se}}},k4={class:"min-h-screen bg-blueGray-50"},_4={class:"bg-white shadow-lg flex flex-wrap items-center justify-between w-full z-[9998] relative py-4 px-6"},x4={class:"flex flex-row items-center justify-between w-full mx-auto"},C4={class:"relative",ref:"mobileMenuContainer"},S4={class:"mt-2 bg-white rounded-lg p-4 shadow-xl border border-blueGray-200",style:{"box-shadow":"0 25px 50px -12px rgba(0, 0, 0, 0.25)"}},T4={class:"flex flex-col space-y-2"},E4={class:"relative bg-gradient-to-br from-indigo-600 to-indigo-800 md:pt-4 pb-4 pt-2 z-40"},I4={class:"px-4 md:px-10 mx-auto w-full"},P4={class:"flex flex-col md:flex-row md:items-center md:justify-between"},R4={class:"flex items-center relative"},D4={class:"hidden md:flex"},M4={class:"flex flex-row list-none space-x-1"},A4={key:"dashboard"},U4={class:"w-full mb-6"},L4={class:"relative flex flex-col min-w-0 break-words w-full mb-6 shadow-lg rounded-lg bg-white"},O4={class:"flex-auto px-6 py-6"},F4={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},N4={class:"bg-blueGray-50 rounded-lg p-6"},V4={class:"grid grid-cols-2 gap-3"},j4={class:"mt-6"},B4={class:"grid grid-cols-2 gap-4 px-8"},K4={class:"relative flex flex-col min-w-0 break-words bg-blueGray-50 rounded-lg shadow-sm"},W4={class:"flex-auto p-3"},H4={class:"flex flex-wrap"},q4={class:"relative w-full pr-4 max-w-full flex-grow flex-1"},G4={class:"font-semibold text-xl text-blueGray-700"},$4={class:"relative flex flex-col min-w-0 break-words bg-blueGray-50 rounded-lg shadow-sm"},z4={class:"flex-auto p-3"},J4={class:"flex flex-wrap"},Y4={class:"relative w-full pr-4 max-w-full flex-grow flex-1"},Q4={class:"font-semibold text-xl text-blueGray-700"},Z4={class:"relative flex flex-col min-w-0 break-words bg-blueGray-50 rounded-lg shadow-sm"},X4={class:"flex-auto p-3"},eT={class:"flex flex-wrap"},tT={class:"relative w-full pr-4 max-w-full flex-grow flex-1"},sT={class:"font-semibold text-xl text-blueGray-700"},nT={class:"relative flex flex-col min-w-0 break-words bg-blueGray-50 rounded-lg shadow-sm"},oT={class:"flex-auto p-3"},lT={class:"flex flex-wrap"},iT={class:"relative w-full pr-4 max-w-full flex-grow flex-1"},aT={class:"font-semibold text-xl text-blueGray-700"},rT={key:"chat",class:"w-full flex-1 flex justify-start"},cT={class:"w-full flex-1"},dT={key:"knowledge",class:"card"},uT={class:"card-body p-0"},fT={key:"tools",class:"card"},mT={class:"card-body"},pT={class:"mb-6"},gT={class:"flex flex-wrap gap-2 mb-6"},vT={key:0,class:"tools-content bg-blueGray-900 rounded"},hT={key:1,class:"tools-content"},bT={key:2,class:"tools-content"},yT={key:"monitoring",class:"card"},wT={class:"card-body"},kT={class:"mb-6"},_T={class:"flex flex-wrap gap-2 mb-6"},xT={key:0,class:"monitoring-content"},CT={key:1,class:"monitoring-content"},ST={class:"mb-4"},TT={key:"workflows",class:"card"},ET={class:"card-body p-0"},IT={key:"secrets",class:"card"},PT={class:"card-body p-0"},RT={key:"settings",class:"card"},DT={class:"card-body"},MT={key:"files",class:"card"},AT={class:"card-body p-0"},UT={key:"terminal",class:"card bg-blueGray-900"},LT={class:"card-body p-0"},OT={key:"voice",class:"card"},FT={class:"card-body"},NT={key:"monitor",class:"card"},VT={class:"card-body p-0"},jT={class:"mb-4 px-6 pt-6"};function BT(s,e,o,t,i,r){const l=Je("PhaseProgressionIndicator"),a=Je("ChatInterface"),u=Je("KnowledgeManager"),p=Je("TerminalWindow"),f=Je("FileBrowser"),v=Je("WorkflowApproval"),w=Je("VoiceInterface"),k=Je("SystemMonitor"),h=Je("SecretsManager"),P=Je("SettingsPanel"),x=Je("ElevationDialog"),_=Je("RumDashboard");return c(),d(pe,null,[n("div",k4,[n("nav",_4,[n("div",x4,[e[36]||(e[36]=n("div",{class:"flex items-center flex-shrink-0"},[n("div",{class:"w-12 h-12 bg-gradient-to-br from-indigo-500 to-indigo-700 rounded-full flex items-center justify-center shadow-lg"},[n("span",{class:"text-white text-xl font-bold"},"A")]),n("span",{class:"ml-3 text-xl font-semibold text-blueGray-700"},"AutoBot Pro")],-1)),n("div",C4,[n("button",{class:"cursor-pointer text-black opacity-50 md:hidden px-3 py-1 text-xl leading-none bg-transparent rounded border border-solid border-transparent",type:"button",onClick:e[0]||(e[0]=(...S)=>t.toggleNavbar&&t.toggleNavbar(...S)),"aria-label":"No"},[n("i",{class:G(["fas fa-bars",t.navbarOpen?"fa-times":"fa-bars"])},null,2)]),t.navbarOpen?(c(),d("div",{key:0,class:"md:hidden fixed top-16 right-4 z-[99999] w-64",onClick:e[8]||(e[8]=ze(()=>{},["stop"])),tabindex:"0",onKeyup:[e[9]||(e[9]=ve(S=>S.target.click(),["enter"])),e[10]||(e[10]=ve(S=>S.target.click(),["space"]))]},[n("div",S4,[n("ul",T4,[n("li",null,[n("a",{onClick:e[1]||(e[1]=S=>t.updateRoute("dashboard")),class:G([[t.activeTab==="dashboard"?"text-indigo-600 bg-indigo-100":"text-blueGray-700 hover:text-indigo-600 hover:bg-indigo-50"],"text-xs uppercase py-2 px-3 font-bold inline-flex items-center rounded-lg cursor-pointer transition-all duration-150 w-full"])},e[29]||(e[29]=[n("i",{class:"fas fa-tachometer-alt mr-2 text-sm"},null,-1),U(" Dashboard ",-1)]),2)]),n("li",null,[n("a",{onClick:e[2]||(e[2]=S=>t.updateRoute("chat")),class:G([[t.activeTab==="chat"?"text-indigo-600 bg-indigo-100":"text-blueGray-700 hover:text-indigo-600 hover:bg-indigo-50"],"text-xs uppercase py-2 px-3 font-bold inline-flex items-center rounded-lg cursor-pointer transition-all duration-150 w-full"])},e[30]||(e[30]=[n("i",{class:"fas fa-comments mr-2 text-sm"},null,-1),U(" AI Assistant ",-1)]),2)]),n("li",null,[n("a",{onClick:e[3]||(e[3]=S=>t.updateRoute("knowledge")),class:G([[t.activeTab==="knowledge"?"text-indigo-600 bg-indigo-100":"text-blueGray-700 hover:text-indigo-600 hover:bg-indigo-50"],"text-xs uppercase py-2 px-3 font-bold inline-flex items-center rounded-lg cursor-pointer transition-all duration-150 w-full"])},e[31]||(e[31]=[n("i",{class:"fas fa-brain mr-2 text-sm"},null,-1),U(" Knowledge Base ",-1)]),2)]),n("li",null,[n("a",{onClick:e[4]||(e[4]=S=>t.updateRoute("tools")),class:G([[t.activeTab==="tools"?"text-indigo-600 bg-indigo-100":"text-blueGray-700 hover:text-indigo-600 hover:bg-indigo-50"],"text-xs uppercase py-2 px-3 font-bold inline-flex items-center rounded-lg cursor-pointer transition-all duration-150 w-full"])},e[32]||(e[32]=[n("i",{class:"fas fa-tools mr-2 text-sm"},null,-1),U(" Tools ",-1)]),2)]),n("li",null,[n("a",{onClick:e[5]||(e[5]=S=>t.updateRoute("monitoring")),class:G([[t.activeTab==="monitoring"?"text-indigo-600 bg-indigo-100":"text-blueGray-700 hover:text-indigo-600 hover:bg-indigo-50"],"text-xs uppercase py-2 px-3 font-bold inline-flex items-center rounded-lg cursor-pointer transition-all duration-150 w-full"])},e[33]||(e[33]=[n("i",{class:"fas fa-chart-bar mr-2 text-sm"},null,-1),U(" Monitoring ",-1)]),2)]),n("li",null,[n("a",{onClick:e[6]||(e[6]=S=>t.updateRoute("secrets")),class:G([[t.activeTab==="secrets"?"text-indigo-600 bg-indigo-100":"text-blueGray-700 hover:text-indigo-600 hover:bg-indigo-50"],"text-xs uppercase py-2 px-3 font-bold inline-flex items-center rounded-lg cursor-pointer transition-all duration-150 w-full"])},e[34]||(e[34]=[n("i",{class:"fas fa-key mr-2 text-sm"},null,-1),U(" Secrets ",-1)]),2)]),n("li",null,[n("a",{onClick:e[7]||(e[7]=S=>t.updateRoute("settings")),class:G([[t.activeTab==="settings"?"text-indigo-600 bg-indigo-100":"text-blueGray-700 hover:text-indigo-600 hover:bg-indigo-50"],"text-xs uppercase py-2 px-3 font-bold inline-flex items-center rounded-lg cursor-pointer transition-all duration-150 w-full"])},e[35]||(e[35]=[n("i",{class:"fas fa-cog mr-2 text-sm"},null,-1),U(" Settings ",-1)]),2)])])])],32)):C("",!0)],512),e[37]||(e[37]=n("div",{class:"flex items-center flex-shrink-0"},[n("a",{class:"text-blueGray-600 hover:text-blueGray-800 px-3 py-2 flex items-center text-xs uppercase font-bold"},[n("i",{class:"fas fa-user-circle text-lg mr-2"}),U(" Admin User ")])],-1))])]),n("div",{class:G(["relative bg-blueGray-50",t.activeTab==="chat"?"h-screen flex flex-col":"min-h-screen"])},[n("div",E4,[n("div",I4,[n("div",P4,[n("div",R4,[n("div",D4,[n("ul",M4,[n("li",null,[n("a",{onClick:e[11]||(e[11]=S=>t.updateRoute("dashboard")),class:G([[t.activeTab==="dashboard"?"text-white bg-indigo-500":"text-indigo-200 hover:text-white hover:bg-white hover:bg-opacity-10"],"text-xs uppercase py-2 px-3 font-bold inline-flex items-center rounded-lg cursor-pointer transition-all duration-150"])},e[38]||(e[38]=[n("i",{class:"fas fa-tachometer-alt mr-2 text-sm"},null,-1),U(" Dashboard ",-1)]),2)]),n("li",null,[n("a",{onClick:e[12]||(e[12]=S=>t.updateRoute("chat")),class:G([[t.activeTab==="chat"?"text-white bg-indigo-500":"text-indigo-200 hover:text-white hover:bg-white hover:bg-opacity-10"],"text-xs uppercase py-2 px-3 font-bold inline-flex items-center rounded-lg cursor-pointer transition-all duration-150"])},e[39]||(e[39]=[n("i",{class:"fas fa-comments mr-2 text-sm"},null,-1),U(" AI Assistant ",-1)]),2)]),n("li",null,[n("a",{onClick:e[13]||(e[13]=S=>t.updateRoute("knowledge")),class:G([[t.activeTab==="knowledge"?"text-white bg-indigo-500":"text-indigo-200 hover:text-white hover:bg-white hover:bg-opacity-10"],"text-xs uppercase py-2 px-3 font-bold inline-flex items-center rounded-lg cursor-pointer transition-all duration-150"])},e[40]||(e[40]=[n("i",{class:"fas fa-brain mr-2 text-sm"},null,-1),U(" Knowledge Base ",-1)]),2)]),n("li",null,[n("a",{onClick:e[14]||(e[14]=S=>t.updateRoute("tools")),class:G([[t.activeTab==="tools"?"text-white bg-indigo-500":"text-indigo-200 hover:text-white hover:bg-white hover:bg-opacity-10"],"text-xs uppercase py-2 px-3 font-bold inline-flex items-center rounded-lg cursor-pointer transition-all duration-150"])},e[41]||(e[41]=[n("i",{class:"fas fa-tools mr-2 text-sm"},null,-1),U(" Tools ",-1)]),2)]),n("li",null,[n("a",{onClick:e[15]||(e[15]=S=>t.updateRoute("monitoring")),class:G([[t.activeTab==="monitoring"?"text-white bg-indigo-500":"text-indigo-200 hover:text-white hover:bg-white hover:bg-opacity-10"],"text-xs uppercase py-2 px-3 font-bold inline-flex items-center rounded-lg cursor-pointer transition-all duration-150"])},e[42]||(e[42]=[n("i",{class:"fas fa-chart-bar mr-2 text-sm"},null,-1),U(" Monitoring ",-1)]),2)]),n("li",null,[n("a",{onClick:e[16]||(e[16]=S=>t.updateRoute("secrets")),class:G([[t.activeTab==="secrets"?"text-white bg-indigo-500":"text-indigo-200 hover:text-white hover:bg-white hover:bg-opacity-10"],"text-xs uppercase py-2 px-3 font-bold inline-flex items-center rounded-lg cursor-pointer transition-all duration-150"])},e[43]||(e[43]=[n("i",{class:"fas fa-key mr-2 text-sm"},null,-1),U(" Secrets ",-1)]),2)]),n("li",null,[n("a",{onClick:e[17]||(e[17]=S=>t.updateRoute("settings")),class:G([[t.activeTab==="settings"?"text-white bg-indigo-500":"text-indigo-200 hover:text-white hover:bg-white hover:bg-opacity-10"],"text-xs uppercase py-2 px-3 font-bold inline-flex items-center rounded-lg cursor-pointer transition-all duration-150"])},e[44]||(e[44]=[n("i",{class:"fas fa-cog mr-2 text-sm"},null,-1),U(" Settings ",-1)]),2)])])])])])])]),n("div",{class:G(["px-4 md:px-10 mx-auto w-full",t.activeTab==="dashboard"?"mt-0":t.activeTab==="chat"?"flex-1 flex flex-col":"mt-4"])},[n("div",{class:G(["flex flex-wrap",t.activeTab==="chat"?"flex-1 h-full":"mt-4"])},[n("div",{class:G(["w-full px-4",t.activeTab==="chat"?"flex-1 h-full flex flex-col":"mb-12"])},[n("div",null,[t.activeTab==="dashboard"?(c(),d("div",A4,[n("div",U4,[Oe(l,{onSuccess:t.onPhaseSuccess,onError:t.onPhaseError,onValidationComplete:t.onValidationComplete,onPhaseValidated:t.onPhaseValidated},null,8,["onSuccess","onError","onValidationComplete","onPhaseValidated"])]),n("div",L4,[e[64]||(e[64]=hs('<div class="rounded-t mb-0 px-6 py-6"><div class="text-center flex justify-between"><h6 class="text-blueGray-700 text-xl font-bold">System Overview</h6><button class="bg-indigo-500 text-white active:bg-indigo-600 text-xs font-bold uppercase px-3 py-1 rounded outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150" type="button" aria-label="No"><i class="fas fa-sync mr-1"></i> Refresh </button></div></div>',1)),n("div",O4,[n("div",F4,[e[50]||(e[50]=hs('<div class="bg-blueGray-50 rounded-lg p-6"><h3 class="text-lg font-semibold text-blueGray-700 mb-4">Recent Activity</h3><div class="space-y-3"><div class="flex items-center"><div class="w-2 h-2 bg-emerald-500 rounded-full mr-3"></div><span class="text-sm text-blueGray-600">New knowledge item added</span><span class="ml-auto text-xs text-blueGray-400">2 min ago</span></div><div class="flex items-center"><div class="w-2 h-2 bg-lightBlue-500 rounded-full mr-3"></div><span class="text-sm text-blueGray-600">Voice command processed</span><span class="ml-auto text-xs text-blueGray-400">5 min ago</span></div><div class="flex items-center"><div class="w-2 h-2 bg-orange-500 rounded-full mr-3"></div><span class="text-sm text-blueGray-600">File uploaded successfully</span><span class="ml-auto text-xs text-blueGray-400">12 min ago</span></div></div></div>',1)),n("div",N4,[e[49]||(e[49]=n("h3",{class:"text-lg font-semibold text-blueGray-700 mb-4"},"Quick Actions",-1)),n("div",V4,[n("button",{onClick:e[18]||(e[18]=S=>t.updateRoute("chat")),class:"btn btn-primary text-sm","aria-label":"Button"},e[45]||(e[45]=[n("i",{class:"fas fa-comments mr-2"},null,-1),U(" New Chat ",-1)])),n("button",{onClick:e[19]||(e[19]=S=>t.updateRoute("knowledge")),class:"btn btn-secondary text-sm","aria-label":"No"},e[46]||(e[46]=[n("i",{class:"fas fa-plus mr-2"},null,-1),U(" Add Knowledge ",-1)])),n("button",{onClick:e[20]||(e[20]=S=>t.updateRoute("tools")),class:"btn btn-secondary text-sm","aria-label":"Tools"},e[47]||(e[47]=[n("i",{class:"fas fa-tools mr-2"},null,-1),U(" Tools ",-1)])),n("button",{onClick:e[21]||(e[21]=S=>t.updateRoute("monitoring")),class:"btn btn-outline text-sm","aria-label":"Monitoring"},e[48]||(e[48]=[n("i",{class:"fas fa-chart-bar mr-2"},null,-1),U(" Monitoring ",-1)]))])])]),n("div",j4,[e[63]||(e[63]=n("h3",{class:"text-lg font-semibold text-blueGray-700 mb-4 px-6"},"System Statistics",-1)),n("div",B4,[n("div",K4,[n("div",W4,[n("div",H4,[n("div",q4,[e[51]||(e[51]=n("h5",{class:"text-blueGray-400 uppercase font-bold text-xs"},"Active Sessions",-1)),n("span",G4,m(t.activeSessions),1)]),e[52]||(e[52]=n("div",{class:"relative w-auto pl-4 flex-initial"},[n("div",{class:"text-white p-3 text-center inline-flex items-center justify-center w-12 h-12 shadow-lg rounded-full bg-red-500"},[n("i",{class:"fas fa-users"})])],-1))]),e[53]||(e[53]=n("p",{class:"text-sm text-blueGray-400 mt-4"},[n("span",{class:"text-emerald-500 mr-2"},[n("i",{class:"fas fa-arrow-up"}),U(" 3.48% ")]),n("span",{class:"whitespace-nowrap"},"Since last month")],-1))])]),n("div",$4,[n("div",z4,[n("div",J4,[n("div",Y4,[e[54]||(e[54]=n("h5",{class:"text-blueGray-400 uppercase font-bold text-xs"},"Knowledge Items",-1)),n("span",Q4,m(t.knowledgeItems),1)]),e[55]||(e[55]=n("div",{class:"relative w-auto pl-4 flex-initial"},[n("div",{class:"text-white p-3 text-center inline-flex items-center justify-center w-12 h-12 shadow-lg rounded-full bg-orange-500"},[n("i",{class:"fas fa-database"})])],-1))]),e[56]||(e[56]=n("p",{class:"text-sm text-blueGray-400 mt-4"},[n("span",{class:"text-emerald-500 mr-2"},[n("i",{class:"fas fa-arrow-up"}),U(" 12% ")]),n("span",{class:"whitespace-nowrap"},"Since last week")],-1))])]),n("div",Z4,[n("div",X4,[n("div",eT,[n("div",tT,[e[57]||(e[57]=n("h5",{class:"text-blueGray-400 uppercase font-bold text-xs"},"Tasks Completed",-1)),n("span",sT,m(t.tasksCompleted),1)]),e[58]||(e[58]=n("div",{class:"relative w-auto pl-4 flex-initial"},[n("div",{class:"text-white p-3 text-center inline-flex items-center justify-center w-12 h-12 shadow-lg rounded-full bg-emerald-500"},[n("i",{class:"fas fa-check-circle"})])],-1))]),e[59]||(e[59]=n("p",{class:"text-sm text-blueGray-400 mt-4"},[n("span",{class:"text-orange-500 mr-2"},[n("i",{class:"fas fa-arrow-down"}),U(" 1.10% ")]),n("span",{class:"whitespace-nowrap"},"Since yesterday")],-1))])]),n("div",nT,[n("div",oT,[n("div",lT,[n("div",iT,[e[60]||(e[60]=n("h5",{class:"text-blueGray-400 uppercase font-bold text-xs"},"Performance",-1)),n("span",aT,m(t.performance)+"%",1)]),e[61]||(e[61]=n("div",{class:"relative w-auto pl-4 flex-initial"},[n("div",{class:"text-white p-3 text-center inline-flex items-center justify-center w-12 h-12 shadow-lg rounded-full bg-lightBlue-500"},[n("i",{class:"fas fa-tachometer-alt"})])],-1))]),e[62]||(e[62]=n("p",{class:"text-sm text-blueGray-400 mt-4"},[n("span",{class:"text-emerald-500 mr-2"},[n("i",{class:"fas fa-arrow-up"}),U(" 12% ")]),n("span",{class:"whitespace-nowrap"},"Since last month")],-1))])])])])])])])):t.activeTab==="chat"?(c(),d("div",rT,[n("div",cT,[(c(),$s(a,{key:t.activeChatId}))])])):t.activeTab==="knowledge"?(c(),d("section",dT,[n("div",uT,[Oe(u)])])):t.activeTab==="tools"?(c(),d("section",fT,[n("div",mT,[n("div",pT,[e[68]||(e[68]=n("h3",{class:"text-xl font-semibold text-blueGray-700 mb-4"},"Tools",-1)),n("div",gT,[n("button",{onClick:e[22]||(e[22]=S=>t.activeToolTab="terminal"),class:G([[t.activeToolTab==="terminal"?"bg-indigo-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"],"px-4 py-2 rounded font-medium transition-colors"])},e[65]||(e[65]=[n("i",{class:"fas fa-terminal mr-2"},null,-1),U("Terminal ",-1)]),2),n("button",{onClick:e[23]||(e[23]=S=>t.activeToolTab="files"),class:G([[t.activeToolTab==="files"?"bg-indigo-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"],"px-4 py-2 rounded font-medium transition-colors"])},e[66]||(e[66]=[n("i",{class:"fas fa-folder mr-2"},null,-1),U("File Manager ",-1)]),2),n("button",{onClick:e[24]||(e[24]=S=>t.activeToolTab="workflows"),class:G([[t.activeToolTab==="workflows"?"bg-indigo-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"],"px-4 py-2 rounded font-medium transition-colors"])},e[67]||(e[67]=[n("i",{class:"fas fa-project-diagram mr-2"},null,-1),U("Workflows ",-1)]),2)])]),t.activeToolTab==="terminal"?(c(),d("div",vT,[Oe(p)])):t.activeToolTab==="files"?(c(),d("div",hT,[Oe(f)])):t.activeToolTab==="workflows"?(c(),d("div",bT,[Oe(v)])):C("",!0)])])):t.activeTab==="monitoring"?(c(),d("section",yT,[n("div",wT,[n("div",kT,[e[71]||(e[71]=n("h3",{class:"text-xl font-semibold text-blueGray-700 mb-4"},"Monitoring",-1)),n("div",_T,[n("button",{onClick:e[25]||(e[25]=S=>t.activeMonitoringTab="voice"),class:G([[t.activeMonitoringTab==="voice"?"bg-indigo-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"],"px-4 py-2 rounded font-medium transition-colors"])},e[69]||(e[69]=[n("i",{class:"fas fa-microphone mr-2"},null,-1),U("Voice Interface ",-1)]),2),n("button",{onClick:e[26]||(e[26]=S=>t.activeMonitoringTab="system"),class:G([[t.activeMonitoringTab==="system"?"bg-indigo-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"],"px-4 py-2 rounded font-medium transition-colors"])},e[70]||(e[70]=[n("i",{class:"fas fa-chart-line mr-2"},null,-1),U("System Monitor ",-1)]),2)])]),t.activeMonitoringTab==="voice"?(c(),d("div",xT,[Oe(w)])):t.activeMonitoringTab==="system"?(c(),d("div",CT,[n("div",ST,[n("button",{onClick:e[27]||(e[27]=(...S)=>t.refreshStats&&t.refreshStats(...S)),class:"btn btn-primary text-sm","aria-label":"Refresh"},e[72]||(e[72]=[n("i",{class:"fas fa-sync mr-2"},null,-1),U(" Refresh ",-1)]))]),Oe(k)])):C("",!0)])])):t.activeTab==="workflows"?(c(),d("section",TT,[n("div",ET,[Oe(v)])])):t.activeTab==="secrets"?(c(),d("section",IT,[n("div",PT,[Oe(h)])])):t.activeTab==="settings"?(c(),d("section",RT,[n("div",DT,[Oe(P)])])):t.activeTab==="files"?(c(),d("section",MT,[n("div",AT,[Oe(f)])])):t.activeTab==="terminal"?(c(),d("section",UT,[n("div",LT,[Oe(p)])])):t.activeTab==="voice"?(c(),d("section",OT,[n("div",FT,[Oe(w)])])):t.activeTab==="monitor"?(c(),d("section",NT,[n("div",VT,[n("div",jT,[n("button",{onClick:e[28]||(e[28]=(...S)=>t.refreshStats&&t.refreshStats(...S)),class:"btn btn-primary text-sm","aria-label":"Refresh"},e[73]||(e[73]=[n("i",{class:"fas fa-sync mr-2"},null,-1),U(" Refresh ",-1)]))]),Oe(k)])])):C("",!0)])],2)],2)],2)],2)]),Oe(x,{ref:"elevationDialog",show:t.showElevationDialog,operation:t.elevationOperation,command:t.elevationCommand,reason:t.elevationReason,"risk-level":t.elevationRiskLevel,"request-id":t.elevationRequestId,onApproved:t.onElevationApproved,onCancelled:t.onElevationCancelled,onClose:t.onElevationClose},null,8,["show","operation","command","reason","risk-level","request-id","onApproved","onCancelled","onClose"]),Oe(_)],64)}const la=Xe(w4,[["render",BT]]),ia=hu({history:Gd(),routes:[{path:"/",name:"home",component:la},{path:"/terminal/:sessionId?",name:"terminal",component:qo,props:!0}]});class KT{isEnabled;sessionId;startTime;metrics;thresholds;constructor(){this.isEnabled=localStorage.getItem("rum_enabled")==="true",this.sessionId=this.generateSessionId(),this.startTime=performance.now(),this.metrics={apiCalls:[],errors:[],userInteractions:[],webSocketEvents:[],pageMetrics:{},resourceTimings:[],sessionDuration:0},this.thresholds={slowApiCall:1e3,verySlowApiCall:5e3,timeoutThreshold:3e4},this.isEnabled&&this.initialize()}generateSessionId(){return"rum_"+Math.random().toString(36).substr(2,9)+"_"+Date.now()}initialize(){console.log(" RUM Agent initialized for session:",this.sessionId),this.monitorPagePerformance(),this.monitorResourceTimings(),this.monitorErrors(),this.setupPeriodicReporting(),this.logMetric("session_start",{sessionId:this.sessionId,userAgent:navigator.userAgent,timestamp:new Date().toISOString(),url:window.location.href})}trackApiCall(e,o,t,i,r,l){const a=i-t,u=a>this.thresholds.timeoutThreshold,p=a>this.thresholds.slowApiCall,f=a>this.thresholds.verySlowApiCall,v={timestamp:new Date().toISOString(),method:e,url:o,duration:a,status:r,error:l?.message||null,isTimeout:u,isSlow:p,isVerySlow:f,sessionId:this.sessionId};return this.metrics.apiCalls.push(v),u?(console.error(" API TIMEOUT:",v),this.reportCriticalIssue("api_timeout",v)):f?console.warn(" VERY SLOW API:",v):p?console.warn(" SLOW API:",v):console.log(" API Call:",`${e} ${o} - ${a}ms`),v}trackWebSocketEvent(e,o={}){const t={timestamp:new Date().toISOString(),event:e,data:o,sessionId:this.sessionId};this.metrics.webSocketEvents.push(t),e==="error"||e==="close"?console.warn(" WebSocket Issue:",t):console.log(" WebSocket:",e,o)}trackUserInteraction(e,o,t={}){const i={timestamp:new Date().toISOString(),action:e,element:o?.tagName||"unknown",elementId:o?.id||null,elementClass:o?.className||null,context:t,sessionId:this.sessionId};this.metrics.userInteractions.push(i),console.log(" User Interaction:",i)}monitorErrors(){window.addEventListener("error",e=>{this.trackError("javascript_error",{message:e.message,filename:e.filename,lineno:e.lineno,colno:e.colno,stack:e.error?.stack})}),window.addEventListener("unhandledrejection",e=>{this.trackError("unhandled_promise_rejection",{reason:e.reason?.toString(),stack:e.reason?.stack})})}trackError(e,o){const t={timestamp:new Date().toISOString(),type:e,...o,sessionId:this.sessionId,url:window.location.href,userAgent:navigator.userAgent};this.metrics.errors.push(t),console.error(" Error Tracked:",t),this.reportCriticalIssue("error",t)}monitorPagePerformance(){window.addEventListener("load",()=>{setTimeout(()=>{const e=performance.getEntriesByType("navigation")[0];e&&(this.metrics.pageMetrics={domContentLoaded:e.domContentLoadedEventEnd-e.domContentLoadedEventStart,loadComplete:e.loadEventEnd-e.loadEventStart,domInteractive:e.domInteractive-e.fetchStart,firstPaint:this.getFirstPaint(),timestamp:new Date().toISOString()},console.log(" Page Performance:",this.metrics.pageMetrics))},0)})}getFirstPaint(){const o=performance.getEntriesByType("paint").find(t=>t.name==="first-paint");return o?o.startTime:null}monitorResourceTimings(){new PerformanceObserver(o=>{for(const t of o.getEntries())t.duration>1e3&&this.metrics.resourceTimings.push({name:t.name,duration:t.duration,size:t.transferSize,timestamp:new Date().toISOString()})}).observe({entryTypes:["resource"]})}logMetric(e,o){const t={type:e,timestamp:new Date().toISOString(),sessionId:this.sessionId,...o};return console.log(" Metric:",t),t}reportCriticalIssue(e,o){const t={type:e,severity:"critical",timestamp:new Date().toISOString(),sessionId:this.sessionId,data:o},i=JSON.parse(localStorage.getItem("rum_critical_issues")||"[]");i.push(t),localStorage.setItem("rum_critical_issues",JSON.stringify(i.slice(-50))),console.error(" CRITICAL ISSUE:",t)}setupPeriodicReporting(){setInterval(()=>{this.generateReport()},3e4)}generateReport(){const o=performance.now()-this.startTime,t={sessionId:this.sessionId,sessionDuration:o,timestamp:new Date().toISOString(),summary:{totalApiCalls:this.metrics.apiCalls.length,slowApiCalls:this.metrics.apiCalls.filter(r=>r.isSlow).length,timeoutApiCalls:this.metrics.apiCalls.filter(r=>r.isTimeout).length,totalErrors:this.metrics.errors.length,userInteractions:this.metrics.userInteractions.length,webSocketEvents:this.metrics.webSocketEvents.length},recentIssues:[...this.metrics.apiCalls.filter(r=>r.isTimeout||r.isVerySlow).slice(-5),...this.metrics.errors.slice(-5)]};console.log(" RUM Report:",t);const i=JSON.parse(localStorage.getItem("rum_reports")||"[]");return i.push(t),localStorage.setItem("rum_reports",JSON.stringify(i.slice(-20))),t}getMetrics(){return{...this.metrics,sessionId:this.sessionId,sessionDuration:performance.now()-this.startTime}}exportData(){const e={sessionId:this.sessionId,metrics:this.getMetrics(),reports:JSON.parse(localStorage.getItem("rum_reports")||"[]"),criticalIssues:JSON.parse(localStorage.getItem("rum_critical_issues")||"[]"),timestamp:new Date().toISOString()},o=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),t=URL.createObjectURL(o),i=document.createElement("a");i.href=t,i.download=`rum-data-${this.sessionId}.json`,i.click(),URL.revokeObjectURL(t)}enable(){this.isEnabled=!0,localStorage.setItem("rum_enabled","true"),console.log(" RUM Agent enabled")}disable(){this.isEnabled=!1,localStorage.removeItem("rum_enabled"),console.log(" RUM Agent disabled")}clear(){this.metrics={apiCalls:[],errors:[],userInteractions:[],webSocketEvents:[],pageMetrics:{},resourceTimings:[],sessionDuration:0},localStorage.removeItem("rum_reports"),localStorage.removeItem("rum_critical_issues"),console.log(" RUM data cleared")}}const ms=new KT;window.rum=ms;const WT={install(s,e={}){s.config.errorHandler=(o,t,i)=>{ms.trackError("vue_error",{message:o.message,stack:o.stack,componentInfo:i,component:t?.$options?.name||"unknown"}),console.error("Vue Error:",o,i)},s.config.globalProperties.$rum=ms,s.provide("rum",ms),s.mixin({beforeMount(){this.$options.name&&(this._rumMountStart=performance.now())},mounted(){if(this.$options.name&&this._rumMountStart){const o=performance.now()-this._rumMountStart;o>100&&ms.logMetric("component_mount",{component:this.$options.name,duration:o})}},beforeUpdate(){this.$options.name&&(this._rumUpdateStart=performance.now())},updated(){if(this.$options.name&&this._rumUpdateStart){const o=performance.now()-this._rumUpdateStart;o>50&&ms.logMetric("component_update",{component:this.$options.name,duration:o})}}}),e.router&&e.router.beforeEach((o,t,i)=>{ms.trackUserInteraction("route_change",null,{from:t.path,to:o.path}),i()}),console.log(" Vue RUM Plugin installed")}},Go=Kc(la);Go.use(ia);Go.use(WT,{router:ia});Go.mount("#app");
