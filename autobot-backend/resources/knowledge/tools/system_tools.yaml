metadata:
  category: system
  description: System administration, monitoring, and diagnostic tools
  last_updated: "2024-01-01T00:00:00"
  version: "1.0.0"

tools:
  - name: htop
    type: process_monitor
    purpose: Interactive process viewer and system monitor
    installation:
      apt: sudo apt-get install htop
      yum: sudo yum install htop
      pacman: sudo pacman -S htop
      brew: brew install htop
    usage:
      interactive: htop
      sort_cpu: htop --sort-key PERCENT_CPU
      sort_mem: htop --sort-key PERCENT_MEM
      user_filter: htop -u {username}
    common_examples:
      - description: Launch interactive process monitor
        command: htop
        expected_output: "Real-time system and process information"
      - description: Show processes for specific user
        command: htop -u apache
        expected_output: "Processes owned by apache user only"
    keyboard_shortcuts:
      - "F9 or k: Kill process"
      - "F6 or >: Sort by column"
      - "F4 or \\: Filter processes"
      - "F5: Tree view"
      - "F10 or q: Quit"
      - "Space: Tag process"
    related_tools: ["top", "ps", "pgrep", "systemctl"]

  - name: ps
    type: process_list
    purpose: Display information about running processes
    installation:
      system: Pre-installed on Unix/Linux systems
    usage:
      all_processes: ps aux
      user_processes: ps -u {username}
      process_tree: ps -ef --forest
      custom_format: ps -eo pid,ppid,cmd,%mem,%cpu --sort=-%cpu
    common_examples:
      - description: Show all processes with detailed info
        command: ps aux
        expected_output: "Complete process list with resource usage"
      - description: Show process hierarchy tree
        command: ps -ef --forest
        expected_output: "Parent-child process relationships"
      - description: Find processes by name
        command: ps aux | grep nginx
        expected_output: "All nginx-related processes"
      - description: Sort by CPU usage
        command: ps aux --sort=-%cpu | head -10
        expected_output: "Top 10 CPU-consuming processes"
    troubleshooting:
      - problem: "Process list too long"
        solution: "Use grep to filter or head/tail to limit output"
      - problem: "Permission denied for some processes"
        solution: "Run with sudo to see all processes"
    related_tools: ["htop", "pgrep", "pkill", "jobs"]

  - name: lsof
    type: file_descriptor_list
    purpose: List open files and network connections
    installation:
      apt: sudo apt-get install lsof
      yum: sudo yum install lsof
      pacman: sudo pacman -S lsof
      brew: brew install lsof
    usage:
      all_files: lsof
      by_process: lsof -p {pid}
      by_user: lsof -u {username}
      network_only: lsof -i
      specific_port: lsof -i :{port}
      file_usage: lsof {filename}
    common_examples:
      - description: Show all network connections
        command: lsof -i
        expected_output: "All TCP and UDP connections"
      - description: Find what's using a specific port
        command: lsof -i :80
        expected_output: "Processes using port 80"
      - description: Show files opened by process
        command: lsof -p 1234
        expected_output: "All files and connections for PID 1234"
      - description: Find who's using a file
        command: lsof /var/log/syslog
        expected_output: "Processes accessing syslog file"
    troubleshooting:
      - problem: "Permission denied errors"
        solution: "Run with sudo for complete system view"
      - problem: "Output overwhelming"
        solution: "Use specific filters (-i, -p, -u) to narrow results"
    related_tools: ["netstat", "ss", "fuser", "ps"]

  - name: netstat
    type: network_statistics
    purpose: Display network connections, routing tables, and network statistics
    installation:
      apt: sudo apt-get install net-tools
      yum: sudo yum install net-tools
      pacman: sudo pacman -S net-tools
      brew: Pre-installed on macOS
    usage:
      all_connections: netstat -a
      listening_ports: netstat -l
      tcp_only: netstat -t
      udp_only: netstat -u
      with_processes: netstat -p
      routing_table: netstat -r
    common_examples:
      - description: Show all listening ports with processes
        command: netstat -tlnp
        expected_output: "TCP listening ports with PID/program names"
      - description: Display routing table
        command: netstat -r
        expected_output: "Network routing information"
      - description: Show all active connections
        command: netstat -an
        expected_output: "All network connections with addresses"
      - description: Monitor connections continuously
        command: netstat -c
        expected_output: "Refreshes connection list every second"
    related_tools: ["ss", "lsof", "ip", "route"]

  - name: ss
    type: socket_statistics
    purpose: Modern replacement for netstat with better performance
    installation:
      apt: sudo apt-get install iproute2
      yum: sudo yum install iproute2
      pacman: sudo pacman -S iproute2
      brew: Not available (Linux-specific)
    usage:
      all_sockets: ss -a
      listening: ss -l
      tcp_sockets: ss -t
      udp_sockets: ss -u
      with_processes: ss -p
      summary: ss -s
    common_examples:
      - description: Show all TCP connections with processes
        command: ss -tlnp
        expected_output: "TCP listening sockets with process info"
      - description: Display socket statistics summary
        command: ss -s
        expected_output: "Summary of socket usage by type"
      - description: Show established connections only
        command: ss -o state established
        expected_output: "Only established TCP connections"
      - description: Filter by port
        command: ss -tlnp '( sport = :22 )'
        expected_output: "SSH daemon listening socket"
    advantages_over_netstat:
      - "Faster and more efficient"
      - "Better filtering capabilities"
      - "More detailed socket information"
      - "Supports modern Linux features"
    related_tools: ["netstat", "lsof", "ip"]

  - name: systemctl
    type: service_manager
    purpose: Control systemd services and units
    installation:
      system: Pre-installed on systemd-based distributions
    usage:
      list_services: systemctl list-units --type=service
      service_status: systemctl status {service}
      start_service: systemctl start {service}
      stop_service: systemctl stop {service}
      enable_service: systemctl enable {service}
      disable_service: systemctl disable {service}
      reload_service: systemctl reload {service}
    common_examples:
      - description: Check status of a service
        command: systemctl status nginx
        expected_output: "Service status, recent logs, and configuration info"
      - description: List all running services
        command: systemctl list-units --type=service --state=running
        expected_output: "All currently active services"
      - description: Enable service to start at boot
        command: systemctl enable apache2
        expected_output: "Service will start automatically at boot"
      - description: View service logs
        command: systemctl -l --no-pager status sshd
        expected_output: "Detailed status with full log lines"
    troubleshooting:
      - problem: "Failed to start service"
        solution: "Check 'systemctl status service' and 'journalctl -u service' for errors"
      - problem: "Permission denied"
        solution: "Use sudo for service control operations"
    related_tools: ["journalctl", "service", "chkconfig"]

  - name: journalctl
    type: log_viewer
    purpose: View and query systemd journal logs
    installation:
      system: Pre-installed on systemd-based distributions
    usage:
      all_logs: journalctl
      specific_unit: journalctl -u {service}
      follow_logs: journalctl -f
      since_time: journalctl --since "{time}"
      priority_level: journalctl -p {priority}
      boot_logs: journalctl -b
    common_examples:
      - description: Follow logs in real-time
        command: journalctl -f
        expected_output: "Continuous stream of new log entries"
      - description: Show logs for specific service
        command: journalctl -u nginx.service
        expected_output: "All logs related to nginx service"
      - description: Show logs since last boot
        command: journalctl -b
        expected_output: "All logs from current boot session"
      - description: Show only error messages
        command: journalctl -p err
        expected_output: "Only error and critical messages"
      - description: Show logs from last hour
        command: journalctl --since "1 hour ago"
        expected_output: "Recent log entries from past hour"
    log_priorities:
      - "0 (emerg): Emergency"
      - "1 (alert): Alert"
      - "2 (crit): Critical"
      - "3 (err): Error"
      - "4 (warning): Warning"
      - "5 (notice): Notice"
      - "6 (info): Information"
      - "7 (debug): Debug"
    related_tools: ["systemctl", "dmesg", "tail", "grep"]

  - name: dmesg
    type: kernel_messages
    purpose: Display kernel ring buffer messages
    installation:
      system: Pre-installed on Linux systems
    usage:
      all_messages: dmesg
      follow_new: dmesg -w
      human_readable: dmesg -T
      level_filter: dmesg -l {level}
      facility_filter: dmesg -f {facility}
      clear_buffer: dmesg -c
    common_examples:
      - description: Show all kernel messages with timestamps
        command: dmesg -T
        expected_output: "Kernel messages with human-readable timestamps"
      - description: Follow new kernel messages
        command: dmesg -w
        expected_output: "Real-time display of new kernel messages"
      - description: Show only error messages
        command: dmesg -l err
        expected_output: "Kernel error messages only"
      - description: Search for specific hardware
        command: dmesg | grep -i usb
        expected_output: "All USB-related kernel messages"
    message_levels:
      - "emerg: Emergency (system unusable)"
      - "alert: Action must be taken immediately"
      - "crit: Critical conditions"
      - "err: Error conditions"
      - "warn: Warning conditions"
      - "notice: Normal but significant condition"
      - "info: Informational messages"
      - "debug: Debug-level messages"
    troubleshooting:
      - problem: "Permission denied"
        solution: "Modern systems may require sudo for security"
      - problem: "Messages scrolling too fast"
        solution: "Use -w with grep or pipe to less"
    related_tools: ["journalctl", "klogd", "syslog"]

  - name: iostat
    type: io_statistics
    purpose: Report CPU and I/O statistics
    installation:
      apt: sudo apt-get install sysstat
      yum: sudo yum install sysstat
      pacman: sudo pacman -S sysstat
      brew: brew install sysstat
    usage:
      basic: iostat
      extended: iostat -x
      continuous: iostat {interval} {count}
      specific_device: iostat -d {device}
      cpu_only: iostat -c
    common_examples:
      - description: Show extended I/O statistics
        command: iostat -x 1 5
        expected_output: "Detailed I/O stats updated every second, 5 times"
      - description: Monitor specific disk
        command: iostat -x /dev/sda 2
        expected_output: "Extended stats for sda device every 2 seconds"
      - description: Show only CPU statistics
        command: iostat -c 1 10
        expected_output: "CPU usage statistics updated every second"
    key_metrics:
      - "%util: Percentage of time device was busy"
      - "await: Average wait time for I/O requests"
      - "svctm: Average service time"
      - "r/s, w/s: Read/write operations per second"
      - "rkB/s, wkB/s: Kilobytes read/written per second"
    related_tools: ["vmstat", "iotop", "sar", "pidstat"]
