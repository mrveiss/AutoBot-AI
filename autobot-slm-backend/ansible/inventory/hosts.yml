# AutoBot Ansible Inventory
all:
  vars:
    ansible_user: autobot
    ansible_ssh_private_key_file: ~/.ssh/autobot_key
    python_interpreter: /usr/bin/python3

  children:
    autobot_cluster:
      vars:
        # AutoBot Internal network with firewall
        network_subnet: "172.16.168.0/24"
        network_gateway: "172.16.168.1"
        dns_servers:
          - "8.8.8.8"
          - "1.1.1.1"

      children:
        frontend:
          hosts:
            autobot-frontend:
              ansible_host: 172.16.168.21
              services:
                - { name: "vue-dev", port: 5173, command: "npm run dev" }
                - { name: "nginx", port: 80, command: "nginx -g 'daemon off;'" }

        backend:
          hosts:
            autobot-backend:
              ansible_host: 172.16.168.20
              services:
                - { name: "fastapi", port: 8001, command: "uvicorn backend.fast_app_factory_fix:app --host 0.0.0.0 --port 8001" }
              environment:
                REDIS_HOST: "172.16.168.23"
                AI_STACK_HOST: "172.16.168.24"
                NPU_WORKER_HOST: "172.16.168.22"

        ai_stack:
          hosts:
            autobot-aistack:
              ansible_host: 172.16.168.24
              services:
                - { name: "llm-server", port: 8080, command: "python -m src.ai_stack_main" }
              gpu_enabled: true
              memory_gb: 16

        npu_workers:
          hosts:
            autobot-npu:
              ansible_host: 172.16.168.22
              services:
                - { name: "npu-service", port: 8081, command: "python -m src.npu_worker_main" }
              npu_enabled: true
              memory_gb: 8

        database:
          hosts:
            autobot-redis:
              ansible_host: 172.16.168.23
              services:
                - { name: "redis-stack", port: 6379, command: "redis-stack-server --bind 0.0.0.0" }
              storage_gb: 100
