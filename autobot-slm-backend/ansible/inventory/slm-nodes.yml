# AutoBot - AI-Powered Automation Platform
# Copyright (c) 2025 mrveiss
# Author: mrveiss
#
# SLM Managed Nodes Inventory
# Nodes registered in SLM admin dashboard
---
all:
  vars:
    ansible_user: autobot
    ansible_ssh_private_key_file: ~/.ssh/autobot_key
    ansible_python_interpreter: /usr/bin/python3

  children:
    slm_nodes:
      hosts:
        # SLM Manager - main admin machine
        00-SLM-Manager:
          ansible_host: 172.16.168.19
          slm_node_id: "00-SLM-Manager"
          slm_node_role: "slm-manager"
          slm_services_to_monitor:
            - autobot-slm-backend
            - slm-admin-ui
            - nginx
            - postgresql@16-main

        # Backend server
        01-Backend:
          ansible_host: 172.16.168.20
          slm_node_id: "01-Backend"
          slm_node_role: "backend"
          slm_services_to_monitor:
            - autobot-backend
            - ollama
            - nginx

        # Frontend server
        02-Frontend:
          ansible_host: 172.16.168.21
          slm_node_id: "02-Frontend"
          slm_services_to_monitor:
            - nginx

        # NPU Worker
        npu-worker:
          ansible_host: 172.16.168.22
          slm_node_id: "npu-worker"
          slm_services_to_monitor:
            - autobot-npu-worker
            - autobot-tts-worker
            - nginx

        # AI Stack
        03-AI-Stack:
          ansible_host: 172.16.168.24
          slm_node_id: "03-AI-Stack"
          slm_services_to_monitor:
            - autobot-ai-stack
            - autobot-chromadb
            - nginx

        # Databases
        04-Databases:
          ansible_host: 172.16.168.23
          slm_node_id: "04-Databases"
          slm_services_to_monitor:
            - redis-stack-server
            - redis_exporter
            - nginx

        # Browser automation
        browser-automation:
          ansible_host: 172.16.168.25
          slm_node_id: "browser-automation"
          slm_services_to_monitor:
            - autobot-playwright
            - nginx

        # LLM CPU node (#1040)
        05-LLM-CPU:
          ansible_host: 172.16.168.26
          slm_node_id: "05-LLM-CPU"
          slm_node_role: "llm"
          slm_services_to_monitor:
            - ollama

        # Reserved node - pending role assignment
        06-Node-27:
          ansible_host: 172.16.168.27
          slm_node_id: "06-Node-27"
          slm_services_to_monitor: []

    # Role-based groups for targeted provisioning
    main:
      hosts:
        01-Backend:

    frontend:
      hosts:
        02-Frontend:

    npu_worker:
      hosts:
        npu-worker:

    browser_worker:
      hosts:
        browser-automation:

    redis:
      hosts:
        04-Databases:

    ai_stack:
      hosts:
        03-AI-Stack:

    slm_server:
      hosts:
        00-SLM-Manager:

    # LLM inference nodes (CPU or GPU) â€” #1040
    llm_nodes:
      hosts:
        05-LLM-CPU:

    # Aggregate for all infrastructure nodes
    infrastructure:
      children:
        main:
        frontend:
        npu_worker:
        browser_worker:
        redis:
        ai_stack:
        slm_server:
        llm_nodes:
