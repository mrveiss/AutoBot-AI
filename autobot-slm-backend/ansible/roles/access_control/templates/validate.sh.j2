#!/bin/bash
# AutoBot - AI-Powered Automation Platform
# Copyright (c) 2025 mrveiss
# Author: mrveiss
#
# Access Control Validation Script
# Generated by Ansible - DO NOT EDIT MANUALLY

set -e

# Colors
GREEN='\033[0;32m'
RED='\033[0;31m'
NC='\033[0m'

echo "ðŸ” Validating Access Control Configuration"
echo "=========================================="

PASSED=0
FAILED=0

# Test 1: Check configuration files
echo -n "Configuration files... "
if [ -f "{{ config_dir }}/access_control/policies.yml" ]; then
    echo -e "${GREEN}âœ“${NC}"
    ((PASSED++))
else
    echo -e "${RED}âœ—${NC}"
    ((FAILED++))
fi

# Test 2: Check audit logging
echo -n "Audit logging... "
if [ -d "{{ logs_dir }}/audit" ]; then
    echo -e "${GREEN}âœ“${NC}"
    ((PASSED++))
else
    echo -e "${RED}âœ—${NC}"
    ((FAILED++))
fi

# Test 3: Check monitoring service
echo -n "Monitoring service... "
if systemctl is-active autobot-access-monitor.timer >/dev/null 2>&1; then
    echo -e "${GREEN}âœ“${NC}"
    ((PASSED++))
else
    echo -e "${RED}âœ—${NC}"
    ((FAILED++))
fi

echo ""
echo "Results: $PASSED passed, $FAILED failed"

exit $([ $FAILED -eq 0 ] && echo 0 || echo 1)
