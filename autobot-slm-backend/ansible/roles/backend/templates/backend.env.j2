# AutoBot - AI-Powered Automation Platform
# Copyright (c) 2025 mrveiss
# Author: mrveiss
# Backend Environment Configuration

# Server (Issue #858: Use SSOT config variable names)
HOST={{ backend_host }}
AUTOBOT_BACKEND_PORT={{ backend_port }}

# Application Paths (Issue #858: Database and schema paths)
AUTOBOT_BASE_DIR={{ backend_code_dir }}
AUTOBOT_SCHEMA_DIR={{ backend_code_dir }}/database/schemas
AUTOBOT_DB_PATH=/var/lib/autobot/conversation_files.db
AUTOBOT_STORAGE_DIR=/var/lib/autobot/conversation_files

# Redis
REDIS_HOST={{ backend_redis_host }}
REDIS_PORT={{ backend_redis_port }}
{% if backend_redis_password | length > 0 %}
REDIS_PASSWORD={{ backend_redis_password }}
{% endif %}

# Security
SECRET_KEY={{ backend_secret_key }}
AUTOBOT_JWT_SECRET={{ backend_jwt_secret | default(backend_secret_key) }}
CORS_ORIGINS={{ backend_cors_origins }}

# Service Authentication
SERVICE_ID={{ service_auth_service_id | default('main-backend') }}
SERVICE_KEY_FILE={{ service_auth_keys_dir | default('/etc/autobot/service-keys') }}/{{ service_auth_service_id | default('main-backend') }}.env
AUTH_TIMESTAMP_WINDOW={{ service_auth_timestamp_window | default(300) }}
SERVICE_AUTH_ENFORCEMENT_MODE={{ service_auth_enforcement_mode | default(true) | lower }}
{% if service_auth_override_token | default('') | length > 0 %}
SERVICE_AUTH_OVERRIDE_TOKEN={{ service_auth_override_token }}
{% endif %}
SERVICE_AUTH_CIRCUIT_BREAKER_PERCENTAGE={{ service_auth_circuit_breaker_percentage | default(100) }}
SERVICE_AUTH_RATE_LIMIT_WINDOW={{ service_auth_rate_limit_window | default(300) }}
SERVICE_AUTH_RATE_LIMIT_MAX_FAILURES={{ service_auth_rate_limit_max_failures | default(10) }}

# Logging
LOG_LEVEL=INFO

# LLM Provider Configuration (Issue #858: Required for agent initialization)
# Each agent requires explicit provider, endpoint, and model configuration
AUTOBOT_LLM_PROVIDER={{ backend_llm_provider | default('ollama') }}
AUTOBOT_LLM_ENDPOINT={{ backend_llm_endpoint | default('http://127.0.0.1:11434') }}
AUTOBOT_DEFAULT_LLM_MODEL={{ backend_llm_model | default('mistral:7b-instruct') }}

# Orchestrator Agent
AUTOBOT_ORCHESTRATOR_PROVIDER={{ backend_llm_provider | default('ollama') }}
AUTOBOT_ORCHESTRATOR_ENDPOINT={{ backend_llm_endpoint | default('http://127.0.0.1:11434') }}
AUTOBOT_ORCHESTRATOR_MODEL={{ backend_llm_model | default('mistral:7b-instruct') }}

# Chat Agent
AUTOBOT_CHAT_PROVIDER={{ backend_llm_provider | default('ollama') }}
AUTOBOT_CHAT_ENDPOINT={{ backend_llm_endpoint | default('http://127.0.0.1:11434') }}
AUTOBOT_CHAT_MODEL={{ backend_llm_model | default('mistral:7b-instruct') }}

# Classification Agent
AUTOBOT_CLASSIFICATION_PROVIDER={{ backend_llm_provider | default('ollama') }}
AUTOBOT_CLASSIFICATION_ENDPOINT={{ backend_llm_endpoint | default('http://127.0.0.1:11434') }}
AUTOBOT_CLASSIFICATION_MODEL={{ backend_llm_model | default('mistral:7b-instruct') }}

# System Commands Agent
AUTOBOT_SYSTEM_COMMANDS_PROVIDER={{ backend_llm_provider | default('ollama') }}
AUTOBOT_SYSTEM_COMMANDS_ENDPOINT={{ backend_llm_endpoint | default('http://127.0.0.1:11434') }}
AUTOBOT_SYSTEM_COMMANDS_MODEL={{ backend_llm_model | default('mistral:7b-instruct') }}

# KB Librarian Agent
AUTOBOT_KB_LIBRARIAN_PROVIDER={{ backend_llm_provider | default('ollama') }}
AUTOBOT_KB_LIBRARIAN_ENDPOINT={{ backend_llm_endpoint | default('http://127.0.0.1:11434') }}
AUTOBOT_KB_LIBRARIAN_MODEL={{ backend_llm_model | default('mistral:7b-instruct') }}

# Knowledge Extraction Agent
AUTOBOT_KNOWLEDGE_EXTRACTION_PROVIDER={{ backend_llm_provider | default('ollama') }}
AUTOBOT_KNOWLEDGE_EXTRACTION_ENDPOINT={{ backend_llm_endpoint | default('http://127.0.0.1:11434') }}
AUTOBOT_KNOWLEDGE_EXTRACTION_MODEL={{ backend_llm_model | default('mistral:7b-instruct') }}

# Knowledge Retrieval Agent
AUTOBOT_KNOWLEDGE_RETRIEVAL_PROVIDER={{ backend_llm_provider | default('ollama') }}
AUTOBOT_KNOWLEDGE_RETRIEVAL_ENDPOINT={{ backend_llm_endpoint | default('http://127.0.0.1:11434') }}
AUTOBOT_KNOWLEDGE_RETRIEVAL_MODEL={{ backend_llm_model | default('mistral:7b-instruct') }}

# Librarian Assistant Agent
AUTOBOT_LIBRARIAN_ASSISTANT_PROVIDER={{ backend_llm_provider | default('ollama') }}
AUTOBOT_LIBRARIAN_ASSISTANT_ENDPOINT={{ backend_llm_endpoint | default('http://127.0.0.1:11434') }}
AUTOBOT_LIBRARIAN_ASSISTANT_MODEL={{ backend_llm_model | default('mistral:7b-instruct') }}

# LLM Failsafe Agent
AUTOBOT_LLM_FAILSAFE_PROVIDER={{ backend_llm_provider | default('ollama') }}
AUTOBOT_LLM_FAILSAFE_ENDPOINT={{ backend_llm_endpoint | default('http://127.0.0.1:11434') }}
AUTOBOT_LLM_FAILSAFE_MODEL={{ backend_llm_model | default('mistral:7b-instruct') }}

# RAG Agent
AUTOBOT_RAG_PROVIDER={{ backend_llm_provider | default('ollama') }}
AUTOBOT_RAG_ENDPOINT={{ backend_llm_endpoint | default('http://127.0.0.1:11434') }}
AUTOBOT_RAG_MODEL={{ backend_llm_model | default('mistral:7b-instruct') }}
