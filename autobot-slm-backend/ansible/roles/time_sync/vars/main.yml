---
# Variables specific to time synchronization role

# Regional NTP server pools for different geographic locations
ntp_regional_pools:
  europe:
    latvia:
      - "0.lv.pool.ntp.org"
      - "1.lv.pool.ntp.org"
      - "2.lv.pool.ntp.org"
      - "3.lv.pool.ntp.org"
    generic:
      - "0.europe.pool.ntp.org"
      - "1.europe.pool.ntp.org"
      - "2.europe.pool.ntp.org"
      - "3.europe.pool.ntp.org"

  north_america:
    - "0.north-america.pool.ntp.org"
    - "1.north-america.pool.ntp.org"
    - "2.north-america.pool.ntp.org"
    - "3.north-america.pool.ntp.org"

  asia:
    - "0.asia.pool.ntp.org"
    - "1.asia.pool.ntp.org"
    - "2.asia.pool.ntp.org"
    - "3.asia.pool.ntp.org"

# Global fallback servers (highly reliable)
global_ntp_servers:
  google:
    - "time1.google.com"
    - "time2.google.com"
    - "time3.google.com"
    - "time4.google.com"

  cloudflare:
    - "time.cloudflare.com"

  apple:
    - "time.apple.com"
    - "time1.apple.com"
    - "time2.apple.com"

  microsoft:
    - "time.windows.com"

# Timezone mappings for common geographic locations
timezone_mappings:
  "Europe/Riga":
    description: "Latvia (EEST/EET)"
    utc_offset: "+0200/+0300"
    ntp_pool: "{{ ntp_regional_pools.europe.latvia }}"

  "Europe/London":
    description: "United Kingdom (GMT/BST)"
    utc_offset: "+0000/+0100"
    ntp_pool: "{{ ntp_regional_pools.europe.generic }}"

  "America/New_York":
    description: "US Eastern Time (EST/EDT)"
    utc_offset: "-0500/-0400"
    ntp_pool: "{{ ntp_regional_pools.north_america }}"

  "UTC":
    description: "Coordinated Universal Time"
    utc_offset: "+0000"
    ntp_pool: "{{ ntp_regional_pools.europe.generic }}"

# Service-specific configuration
service_configs:
  systemd_timesyncd:
    config_file: "/etc/systemd/timesyncd.conf"
    service_name: "systemd-timesyncd"
    status_command: "timedatectl timesync-status"

  chrony:
    config_file: "/etc/chrony/chrony.conf"
    service_name: "chrony"
    status_command: "chronyc sources"
    tracking_command: "chronyc tracking"

# Validation commands and thresholds
validation:
  commands:
    check_sync: "timedatectl status | grep 'System clock synchronized' | grep -q 'yes'"
    get_timezone: "timedatectl show --property=Timezone --value"
    get_time: "date '+%Y-%m-%d %H:%M:%S %Z (UTC%z)'"

  thresholds:
    critical_drift_seconds: 300   # 5 minutes
    warning_drift_seconds: 60     # 1 minute
    sync_timeout_seconds: 120     # 2 minutes
