[pytest]
# AutoBot pytest configuration

# Test markers
markers =
    integration: Integration tests that may require external services
    slow: Tests that take a long time to run
    distributed: Tests for distributed multi-VM scenarios
    performance: Performance and load tests
    security: Security-related tests

# Test discovery - colocated tests live next to source files (#734)
testpaths =
    autobot-user-backend
    autobot-slm-backend
    autobot-npu-worker
    autobot-shared
    autobot-user-frontend
    autobot-browser-worker
    infrastructure/shared/tests
python_files = test_*.py *_test.py *.e2e_test.py *.integration_test.py
python_classes = Test*
python_functions = test_*

# Output options
addopts =
    --verbose
    --strict-markers
    --tb=short
    --asyncio-mode=auto

# Coverage options
# Run with: pytest --cov=autobot-user-backend --cov=autobot-slm-backend --cov-report=html
[coverage:run]
source = autobot-user-backend,autobot-slm-backend,autobot-npu-worker,autobot-shared
omit = *_test.py,*/test_*,*/venv/*,*/__pycache__/*

[coverage:report]
precision = 2
skip_empty = True
