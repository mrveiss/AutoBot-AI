# AutoBot Time Synchronization Log Rotation Configuration
# Generated by Ansible for {{ ansible_hostname }}

{{ time_sync.logging.log_file }} {
    # Rotate daily
    daily

    # Keep 30 days of logs
    rotate 30

    # Compress old logs
    compress
    delaycompress

    # Don't rotate if empty
    notifempty

    # Create new log file with specific permissions
    create 644 root root

    # Use date as extension
    dateext
    dateformat _%Y%m%d

    # Truncate original file after rotation
    copytruncate

    # Don't mail logs
    nomail

    # Handle missing log file gracefully
    missingok

    # Post-rotation script
    postrotate
        # Send HUP signal to rsyslog if running
        /bin/kill -HUP `cat /var/run/rsyslogd.pid 2> /dev/null` 2> /dev/null || true
    endscript
}